{
  "permissions": {
    "allow": [
      "Bash(cat:*)",
      "Bash(wc:*)",
      "Bash(ls:*)",
      "Bash(curl:*)",
      "Bash(python:*)",
      "Bash($env:PYTHONIOENCODING='utf-8')",
      "Bash(pip install:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(cmd.exe /c \"d:\\\\vnss_tms\\\\restart_backend.bat\")",
      "Bash(timeout /t 5 /nobreak)",
      "Bash(taskkill:*)",
      "Bash(cmd.exe /c \"taskkill /F /PID 8828\")",
      "Bash(start cmd:*)",
      "Bash(restart_backend.bat)",
      "Bash(.venv/Scripts/pip install:*)",
      "Bash(timeout /t 3 /nobreak)",
      "Bash(del d:/vnss_tms/backend/app/api/v1/routes/orders_append.py)",
      "Bash(tasklist:*)",
      "Bash(cmd.exe /c \"taskkill /F /PID 8528\")",
      "Bash(xargs:*)",
      "Bash(cmd.exe /c \"start cmd /c \"\"cd d:\\\\vnss_tms\\\\backend && .venv\\\\Scripts\\\\python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload\"\"\")",
      "Bash(find:*)",
      "Bash(timeout:*)",
      "Bash(.venvScriptspython migrate_drivers_trailer.py)",
      "Bash(\".venv\\\\Scripts\\\\python\" migrate_drivers_trailer.py)",
      "Bash(cmd.exe /c \"taskkill /F /PID 24240\")",
      "Bash(cmd.exe /c \"taskkill /F /PID 7404\")",
      "Bash(\".venv\\\\Scripts\\\\python\" migrate_merge_trailers_to_vehicles.py)",
      "Bash(\".venv\\\\Scripts\\\\python\" migrate_add_tractor_id.py)",
      "Bash(cmd.exe /c \"taskkill /F /PID 10452\")",
      "Bash(cmd.exe /c \"start cmd /c \"\"cd d:\\\\vnss_tms\\\\backend && .venv\\\\Scripts\\\\python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload\" \")",
      "Bash(\".venv\\\\Scripts\\\\python\" migrate_add_customer_requested_date.py)",
      "Bash(move page.tsx page_old_backup.tsx)",
      "Bash(move page_new.tsx page.tsx)",
      "Bash(python -m migrations.migrate_add_vehicle_fields:*)",
      "Bash(python -m migrations.migrate_add_driver_fields:*)",
      "Bash(python -m migrations.migrate_add_rates_table:*)",
      "Bash(python -m migrations.migrate_redesign_rates_multi_customer:*)",
      "Bash(python -m migrations.migrate_location_and_rate_redesign:*)",
      "Bash(python -m migrations.migrate_final_location_site_rate:*)",
      "Bash(npm install:*)",
      "Bash(wmic process where \"name=''python.exe''\" delete)",
      "Bash(.venvScriptspip install openpyxl)",
      "Bash(.venv/Scripts/python:*)",
      "Bash(.venv/Scripts/uvicorn:*)",
      "Bash(python -m migrations.migrate_add_location_ward:*)",
      "Bash(python -m migrations.migrate_add_driver_salary:*)",
      "Bash(python -m migrations.migrate_update_driver_salary_settings:*)",
      "Bash(python -m migrations.migrate_expand_distance_brackets:*)",
      "Bash(python -m migrations.migrate_add_order_status_log_and_salary_flags:*)",
      "Bash(python -m json.tool:*)",
      "Bash(.venvScriptsuvicorn app.main:app --host 127.0.0.1 --port 8000 --reload)",
      "Bash(ping:*)",
      "Bash(python -m migrations.migrate_add_driver_tax_fields:*)",
      "Bash(.venvScriptspython -c \"from app.db.session import engine; from sqlalchemy import inspect; insp = inspect\\(engine\\); print\\(''Tables:'', insp.get_table_names\\(\\)\\); print\\(''income_tax_settings exists:'', ''income_tax_settings'' in insp.get_table_names\\(\\)\\)\")",
      "Bash(npx tsc:*)",
      "Bash(npm run build:*)",
      "Bash(cd:*)",
      "Bash(.venvScriptspython -m migrations.migrate_add_freight_charge)",
      "Bash(.venvScriptspython -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload)",
      "Bash(if [ -f .env ])",
      "Bash(then echo \".env file exists\")",
      "Bash(else echo \".env file does NOT exist\")",
      "Bash(fi)",
      "Bash(.venvScriptspython migrationsmigrate_add_role_permissions.py)",
      "Bash(where:*)",
      "Bash(npx react-native@latest init:*)",
      "Bash(npx @react-native-community/cli init DriverApp --directory mobile --skip-install)",
      "Bash(java -version:*)",
      "Bash(npx react-native doctor)",
      "Bash(setx:*)",
      "Bash(wmic:*)",
      "Bash(C:UsersADMINAppDataLocalAndroidSdkplatform-toolsadb.exe devices)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" devices)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" kill-server)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" start-server)",
      "Bash(npx react-native start)",
      "Bash(npx react-native run-android)",
      "Bash(./gradlew.bat app:installDebug:*)",
      "Bash(dir:*)",
      "Bash(powershell:*)",
      "Bash(./gradlew.bat clean:*)",
      "Bash(./gradlew.bat --stop)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" install d:/vnss_tms/mobile/android/app/build/outputs/apk/debug/app-debug.apk)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" reverse tcp:8081 tcp:8081)",
      "Bash(python -c \"\nfrom app.core.security import get_password_hash\nimport asyncio\nfrom sqlalchemy import text\nfrom app.core.database import AsyncSessionLocal\n\nasync def reset_driver_password\\(\\):\n    # Hash mật khẩu mới\n    new_password = ''driver123''\n    hashed = get_password_hash\\(new_password\\)\n    \n    async with AsyncSessionLocal\\(\\) as db:\n        # Tìm user của driver có phone 0918376763\n        result = await db.execute\\(text\\(''''''\n            SELECT u.id, u.username, u.email, d.full_name, d.phone\n            FROM users u\n            JOIN drivers d ON u.id = d.user_id\n            WHERE d.phone = :phone\n        ''''''\\), {''phone'': ''0918376763''}\\)\n        user = result.fetchone\\(\\)\n        \n        if user:\n            print\\(f''Found user: {user.username} - {user.full_name}''\\)\n            # Update password\n            await db.execute\\(text\\(''''''\n                UPDATE users SET hashed_password = :password WHERE id = :id\n            ''''''\\), {''password'': hashed, ''id'': user.id}\\)\n            await db.commit\\(\\)\n            print\\(f''Password reset to: {new_password}''\\)\n            print\\(f''Username for login: {user.username}''\\)\n        else:\n            print\\(''User not found''\\)\n\nasyncio.run\\(reset_driver_password\\(\\)\\)\n\")",
      "Bash(docker ps:*)",
      "Bash(\"C:\\\\Program Files\\\\PostgreSQL\\\\16\\\\bin\\\\psql.exe\":*)",
      "Bash(\"C:\\\\Program Files\\\\PostgreSQL\\\\15\\\\bin\\\\psql.exe\":*)",
      "Bash(psql:*)",
      "Bash(dir \"C:\\\\Program Files\\\\PostgreSQL\"\")",
      "Bash(\"/c/Program Files/PostgreSQL/17/bin/psql.exe\":*)",
      "Bash(PGPASSWORD=postgres \"/c/Program Files/PostgreSQL/17/bin/psql.exe\":*)",
      "Bash(PGPASSWORD=tms \"/c/Program Files/PostgreSQL/17/bin/psql.exe\":*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NjQ2ODg3N30.hd7gCsB9QcsHgBjPeEASGAZ9Bx6Sfv72GCC6j0Ctcok\")",
      "Bash(USER_ID=\"6606b8a5-e880-4319-bced-16c32e3311e5\":*)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" install -r d:/vnss_tms/mobile/android/app/build/outputs/apk/debug/app-debug.apk)",
      "Bash(ipconfig:*)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" reverse tcp:8000 tcp:8000)",
      "Bash(DRIVER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NjA2YjhhNS1lODgwLTQzMTktYmNlZC0xNmMzMmUzMzExZTUiLCJyb2xlIjoiRFJJVkVSIiwidGVuYW50X2lkIjoiVEVOQU5UX0RFTU8iLCJleHAiOjE3NjY0NzIyMDJ9.kNoTDH7q_7hTnPFDj6k_HC8jTnZZpejNZbLIk2uQZA8\":*)",
      "Bash(dir \"d:\\\\vnss_tms\"\")",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" -s R7AY30DDK7D reverse tcp:8000 tcp:8000)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" -s emulator-5554 reverse tcp:8000 tcp:8000)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" -s R7AY30DDK7D reverse tcp:8081 tcp:8081)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" -s emulator-5554 reverse tcp:8081 tcp:8081)",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" -s R7AY30DDK7D reverse --list)",
      "Bash(./gradlew.bat app:assembleDebug)",
      "Bash(PGPASSWORD=tms123 \"/c/Program Files/PostgreSQL/17/bin/psql.exe\":*)",
      "Bash(PGPASSWORD=postgres \"/c/Program Files/PostgreSQL/17/bin/psql.exe\" -h localhost -U postgres -d tms -c \"SELECT column_name FROM information_schema.columns WHERE table_name = ''empty_returns'' ORDER BY ordinal_position;\")",
      "Bash(\"C:/Users/ADMIN/AppData/Local/Android/Sdk/platform-tools/adb.exe\" -s emulator-5554 install -r d:/vnss_tms/mobile/android/app/build/outputs/apk/debug/app-debug.apk)",
      "Bash(DRIVER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NjA2YjhhNS1lODgwLTQzMTktYmNlZC0xNmMzMmUzMzExZTUiLCJyb2xlIjoiRFJJVkVSIiwidGVuYW50X2lkIjoiVEVOQU5UX0RFTU8iLCJleHAiOjE3NjY0NzIyMDJ9.kNoTDH7q_7hTnPFDj6k_HC8jTnZZpejNZbLIk2uQZA8\" curl -s -X GET \"http://localhost:8000/api/v1/mobile/empty-returns\"  -H \"Authorization: Bearer $DRIVER_TOKEN\")",
      "Bash(taskkill //F //PID 24084)",
      "Bash(head:*)",
      "Bash(python3:*)",
      "Bash(docker exec:*)",
      "Bash(npm run start:*)",
      "Bash(npx tsc --noEmit)",
      "Bash(adb reverse:*)",
      "Bash(source .venv/Scripts/activate)",
      "Bash(PYTHONIOENCODING=utf-8 python:*)",
      "Bash(.venvScriptspython.exe:*)",
      "Bash(d:)",
      "Bash(cmd /c \"cd /d d:\\\\vnss_tms\\\\backend && .venv\\\\Scripts\\\\python.exe import_sites.py\")",
      "Bash(cmd /c \"cd /d d:\\\\vnss_tms\\\\backend && .venv\\\\Scripts\\\\python.exe import_sites.py 2>&1\")",
      "Bash(cmd /c \"chcp 65001 && cd /d d:\\\\vnss_tms\\\\backend && .venv\\\\Scripts\\\\python.exe import_sites.py\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe import_sites.py\")",
      "Bash(powershell -Command:*)",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nsys.path.insert\\(0, ''.''\\)\nfrom app.db.session import engine\nfrom sqlmodel import Session, select\nfrom app.models import Order, Driver, Location, Site\n\nwith Session\\(engine\\) as session:\n    loc = session.exec\\(select\\(Location\\)\\).first\\(\\)\n    tenant_id = str\\(loc.tenant_id\\)\n    \n    # Get a driver\n    driver = session.exec\\(select\\(Driver\\).where\\(Driver.tenant_id == tenant_id\\)\\).first\\(\\)\n    print\\(''Driver:'', driver.name if driver else ''None''\\)\n    \n    # Get orders for driver\n    orders = session.exec\\(\n        select\\(Order\\).where\\(\n            Order.tenant_id == tenant_id,\n            Order.driver_id == str\\(driver.id\\)\n        \\).limit\\(3\\)\n    \\).all\\(\\)\n    \n    print\\(''Orders:'', len\\(orders\\)\\)\n    for o in orders:\n        print\\(f''  - {o.order_code}: pickup_site_id={o.pickup_site_id}, delivery_site_id={o.delivery_site_id}''\\)\n        \n        if o.pickup_site_id:\n            site = session.get\\(Site, o.pickup_site_id\\)\n            print\\(f''    Pickup site: {site.code if site else \"\"NOT FOUND\"\"}''\\)\n\"\"\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nsys.path.insert\\(0, ''.''\\)\nfrom app.db.session import engine\nfrom sqlmodel import Session, select\nfrom app.models import Order, Driver, Location, Site\n\nwith Session\\(engine\\) as session:\n    loc = session.exec\\(select\\(Location\\)\\).first\\(\\)\n    tenant_id = str\\(loc.tenant_id\\)\n    \n    # Get a driver\n    driver = session.exec\\(select\\(Driver\\).where\\(Driver.tenant_id == tenant_id\\)\\).first\\(\\)\n    print\\(''Driver:'', driver.name if driver else ''None''\\)\n    \n    # Get orders for driver\n    orders = session.exec\\(\n        select\\(Order\\).where\\(\n            Order.tenant_id == tenant_id,\n            Order.driver_id == str\\(driver.id\\)\n        \\).limit\\(3\\)\n    \\).all\\(\\)\n    \n    print\\(''Orders:'', len\\(orders\\)\\)\n    for o in orders:\n        print\\(f''  - {o.order_code}: pickup={o.pickup_site_id}''\\)\n\"\"\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nsys.path.insert\\(0, ''.''\\)\nfrom app.db.session import engine\nfrom sqlmodel import Session, select, func\nfrom app.models import Order, Driver, Location, Site, Vehicle, Customer\n\nwith Session\\(engine\\) as session:\n    loc = session.exec\\(select\\(Location\\)\\).first\\(\\)\n    tenant_id = str\\(loc.tenant_id\\)\n    \n    # Get Tuyen driver\n    driver = session.exec\\(select\\(Driver\\).where\\(Driver.tenant_id == tenant_id, Driver.name == ''Nguyễn Văn Tuyến''\\)\\).first\\(\\)\n    print\\(''Driver:'', driver.name\\)\n    print\\(''Driver vehicle_id:'', driver.vehicle_id\\)\n    \n    # Check if vehicle exists\n    if driver.vehicle_id:\n        vehicle = session.get\\(Vehicle, driver.vehicle_id\\)\n        print\\(''Vehicle:'', vehicle.plate_no if vehicle else ''NOT FOUND''\\)\n    \n    # Get one order\n    order = session.exec\\(\n        select\\(Order\\).where\\(\n            Order.tenant_id == tenant_id,\n            Order.driver_id == str\\(driver.id\\)\n        \\).limit\\(1\\)\n    \\).first\\(\\)\n    \n    if order:\n        print\\(''Order:'', order.order_code\\)\n        print\\(''  customer_id:'', order.customer_id\\)\n        if order.customer_id:\n            customer = session.get\\(Customer, order.customer_id\\)\n            print\\(''  Customer:'', customer.name if customer else ''NOT FOUND''\\)\n        \n        print\\(''  pickup_site_id:'', order.pickup_site_id\\)\n        if order.pickup_site_id:\n            site = session.get\\(Site, order.pickup_site_id\\)\n            print\\(''  Pickup Site:'', site.code if site else ''NOT FOUND''\\)\n\"\"\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"\nimport sys\nsys.path.insert\\(0, ''.''\\)\ntry:\n    from app.api.v1.routes.mobile_api import router\n    print\\(''Import OK''\\)\nexcept Exception as e:\n    print\\(''Import Error:'', e\\)\n\"\"\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nsys.path.insert\\(0, ''.''\\)\nfrom app.db.session import engine\nfrom sqlmodel import Session, select, func\nfrom app.models import Order, Driver, Location, Site, Vehicle, Customer\n\ntenant_id = ''TENANT_DEMO''\n\nwith Session\\(engine\\) as session:\n    # Simulate the API query\n    driver = session.exec\\(select\\(Driver\\).where\\(Driver.tenant_id == tenant_id, Driver.name == ''Nguyễn Văn Tuyến''\\)\\).first\\(\\)\n    \n    query = select\\(Order\\).where\\(\n        Order.tenant_id == tenant_id,\n        Order.driver_id == str\\(driver.id\\)\n    \\)\n    \n    # Count total\n    count_query = select\\(func.count\\(\\)\\).select_from\\(query.subquery\\(\\)\\)\n    total = session.exec\\(count_query\\).one\\(\\)\n    print\\(''Total orders:'', total\\)\n    \n    # Get orders\n    query = query.order_by\\(Order.updated_at.desc\\(\\)\\).limit\\(5\\)\n    orders = session.exec\\(query\\).all\\(\\)\n    \n    for order in orders:\n        pickup_location = order.pickup_text\n        if order.pickup_site_id:\n            pickup_site = session.get\\(Site, order.pickup_site_id\\)\n            if pickup_site:\n                pickup_location = pickup_site.code or pickup_site.company_name\n        \n        print\\(f''{order.order_code}: pickup={pickup_location}''\\)\n\"\"\")",
      "Bash(..venvScriptsalembic.exe revision --autogenerate -m \"add_document_fields_to_order\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\alembic.exe revision --autogenerate -m ''add_document_fields_to_order''\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -m alembic revision --autogenerate -m ''add_document_fields_to_order''\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -m migrations.migrate_add_order_document_fields\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -m migrations.migrate_add_order_documents_table\":*)",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\frontend; npx tsc --noEmit 2>&1 | Select-Object -First 30\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"from app.api.v1.routes.mobile_api import router; print\\(''Import OK''\\)\"\"\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\frontend; npx tsc --noEmit 2>&1 | Select-Object -First 20\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"from app.api.v1.routes.order_documents import router; print\\(''Import OK''\\)\"\"\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\mobile; npm install react-native-pdf react-native-blob-util --save 2>&1\")",
      "Bash(powershell -Command \"cd d:\\\\vnss_tms\\\\backend; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nsys.path.insert\\(0, ''.''\\)\nfrom app.db.session import engine\nfrom sqlmodel import Session, select\nfrom app.models.location import Location\n\nwith Session\\(engine\\) as session:\n    # Check existing locations\n    locs = session.exec\\(select\\(Location\\).limit\\(5\\)\\).all\\(\\)\n    print\\(''Existing locations:''\\)\n    for loc in locs:\n        print\\(f''  - {loc.code}: {loc.name} \\({loc.type}\\) - {loc.province}''\\)\n    \n    # Get tenant_id\n    if locs:\n        print\\(f''Tenant ID: {locs[0].tenant_id}''\\)\n\"\"\")",
      "Bash(npx react-native:*)",
      "Bash(cmd /c \"D:\\\\vnss_tms\\\\export_db.bat\")",
      "Bash(cmd /c \"set PGPASSWORD=tms && \"C:Program FilesPostgreSQL17binpsql.exe\" -U tms -h localhost -p 5432 -d tms -c \"dt\" 2>&1\")",
      "Bash(cmd /c \"set PGPASSWORD=tms&& \"C:Program FilesPostgreSQL17binpsql.exe\" -U tms -h localhost -p 5433 -d tms -c \"dt\"\")",
      "Bash(powershell -ExecutionPolicy Bypass -File \"D:\\\\vnss_tms\\\\test_db.ps1\")",
      "Bash(ssh root@103.176.20.95 \"ls -la /home/tms/backup.sql\")",
      "Bash(ssh root@103.176.20.95 \"cd /home/tms/ops && docker cp /home/tms/backup.sql tms-db:/backup.sql && docker exec tms-db psql -U tms -d tms -c ''DROP SCHEMA public CASCADE; CREATE SCHEMA public;'' && docker exec tms-db psql -U tms -d tms -f /backup.sql\")",
      "Bash(ssh root@103.176.20.95 \"cd /home/tms/ops && docker compose -f docker-compose.prod.yml ps\")",
      "Bash(ssh root@103.176.20.95 \"docker cp /home/tms/backup.sql ops-db-1:/backup.sql && docker exec ops-db-1 psql -U tms -d tms -c ''DROP SCHEMA public CASCADE; CREATE SCHEMA public;'' && docker exec ops-db-1 psql -U tms -d tms -f /backup.sql\")",
      "Bash(ssh root@103.176.20.95 \"docker exec ops-db-1 psql -U tms -d tms -c ''SELECT count\\(*\\) as users FROM users; SELECT count\\(*\\) as orders FROM orders; SELECT count\\(*\\) as drivers FROM drivers;''\")",
      "Bash(ssh root@103.176.20.95 \"cd /home/tms/ops && docker compose -f docker-compose.prod.yml restart backend\")",
      "Bash(ssh root@103.176.20.95 \"docker exec ops-db-1 psql -U tms -d tms -c \"\"SELECT username, role FROM users LIMIT 10;\"\"\")",
      "Bash(ssh root@103.176.20.95 \"docker exec ops-db-1 psql -U tms -d tms -c \"\"SELECT username, role FROM users WHERE role = ''ADMIN'';\"\"\")",
      "Bash(ssh root@103.176.20.95 \"ls -la /home/tms/backend/app/api/v1/routes/auth.py 2>/dev/null && echo ''Backend uploaded''\")",
      "Bash(ssh root@103.176.20.95 \"ls -la /home/tms/frontend/app/ 2>/dev/null | head -5 && echo ''Frontend exists''\")",
      "Bash(ssh root@103.176.20.95 \"cd /home/tms/ops && docker compose -f docker-compose.prod.yml up -d --build backend frontend\")",
      "Bash(ssh root@103.176.20.95 \"ls -la /home/tms/backend/start.sh /home/tms/backend/alembic.ini\")",
      "Bash(ssh root@103.176.20.95 \"ls -la /home/tms/backend/start.sh /home/tms/backend/alembic.ini 2>&1\")",
      "Bash(ssh root@103.176.20.95 \"docker logs ops-backend-1 --tail 30\")",
      "Bash(ssh root@103.176.20.95 \"cd /home/tms/ops && docker compose -f docker-compose.prod.yml up -d --build backend\")",
      "Bash(ssh:*)",
      "Bash(scp:*)",
      "Bash(ssh root@103.176.20.95 \"cd /home/tms/ops && docker compose -f docker-compose.prod.yml up -d --build frontend\")",
      "Bash(npx react-native log-android)",
      "Bash(ssh root@103.176.20.95 \"ls /home/tms/ops/\")",
      "Bash(ssh root@103.176.20.95 \"ls /home/tms/\")",
      "Bash(ssh root@103.176.20.95 \"mv /tmp/freight_calculator.py /home/tms/backend/app/services/ && mv /tmp/trip_revenue.py /home/tms/backend/app/api/v1/routes/ && mv /tmp/__init__.py /home/tms/backend/app/api/v1/routes/ && mv /tmp/orders.py /home/tms/backend/app/api/v1/routes/\")",
      "Bash(ssh root@103.176.20.95 \"mkdir -p ''/home/tms/frontend/app/\\(protected\\)/trip-revenue'' && mv /tmp/page.tsx ''/home/tms/frontend/app/\\(protected\\)/trip-revenue/'' && mv /tmp/Sidebar.tsx /home/tms/frontend/components/\")",
      "Bash(alembic upgrade:*)",
      "Bash(docker compose run:*)",
      "Bash(set:*)",
      "Bash(DATABASE_URL=postgresql+psycopg://tms:tms@localhost:5432/tms python -m alembic:*)",
      "Bash(where python)",
      "Bash($env:DATABASE_URL='postgresql+psycopg://postgres:!Tnt01087@localhost:5432/tms')",
      "Bash(D:vnss_tmsbackendrun_migration.bat)",
      "Bash(D:vnss_tmsbackend.venvScriptspython.exe -m alembic upgrade head)",
      "Bash(grep:*)",
      "Bash(DATABASE_URL=postgresql+psycopg://postgres:!Tnt01087@localhost:5432/tms .venvScriptspython.exe -m alembic revision --autogenerate -m \"update_crm_tms_hrm_models\")",
      "Bash(D:)",
      "Bash(.venvScriptspython.exe -m alembic revision --autogenerate -m \"update_crm_tms_hrm_models\")",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(DATABASE_URL=\"postgresql+psycopg://postgres:!Tnt01087@localhost:5432/tms\" .venv/Scripts/python.exe -m alembic:*)",
      "Bash(dir /s /b \"D:\\\\vnss_tms\\\\frontend\\\\app\\\\\\(protected\\)\\\\accounting\")",
      "Bash(.venvScriptspython.exe -c \"from app.api.v1.routes.accounting import seed; print\\(''OK''\\)\")",
      "Bash(D:\\\\vnss_tms\\\\backend\\\\.venv\\\\Scripts\\\\python.exe:*)",
      "Bash(.venvScriptspython.exe -c \"from app.models.wms import Warehouse, Product, StockLevel, GoodsReceipt, DeliveryOrder; print\\(''WMS models imported successfully''\\)\")",
      "Bash(D:\\\\vnss_tms\\\\backend\\\\.venv\\\\Scripts\\\\python.exe -c \"from app.models.document import Folder, Document, DocumentTemplate; print\\(''DMS models OK''\\)\")",
      "Bash(Select-String -Pattern \"Document Management|Workflow|Project Management|WMS|Controlling\")",
      "Bash(Select-Object -First 10)",
      "Bash(npx tsc --noEmit --skipLibCheck)",
      "Bash(.venvScriptspython.exe -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload)",
      "Bash(.venvScriptspython.exe -m uvicorn app.main:app --host 0.0.0.0 --port 8001)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2Njk4ODA4Nn0.TG729uCPvgbpvEju7th2JK8aB4uHxQmDBQlydo4nW8Q\":*)",
      "Bash(D:\\\\vnss_tms\\\\backend\\\\.venv\\\\Scripts\\\\python.exe -c:*)",
      "Bash(.venvScriptspython.exe D:vnss_tmstest_api.py)",
      "Bash(D:\\\\\\\\vnss_tms\\\\\\\\backend\\\\\\\\.venv\\\\\\\\Scripts\\\\\\\\python.exe:*)",
      "Bash(del D:vnss_tmstest_api.py)",
      "Bash(DATABASE_URL=\"postgresql+psycopg://postgres:!Tnt01087@localhost:5432/tms\" .venv/Scripts/python.exe -m alembic revision:*)",
      "Bash(.venvScriptspython.exe -m alembic revision --autogenerate -m \"add_workflow_trigger_condition_fields\")",
      "Bash(.venvScriptspython.exe -c \"\nfrom sqlalchemy import create_engine, text\n\n# Connect as postgres superuser\nengine = create_engine\\(''postgresql+psycopg://postgres:!Tnt01087@localhost:5432/tms''\\)\n\nwith engine.connect\\(\\) as conn:\n    # Check current columns\n    result = conn.execute\\(text\\(\"\"\"\"\"\"\n        SELECT column_name FROM information_schema.columns \n        WHERE table_name = ''wf_definitions'' \n        AND column_name IN \\(''trigger_condition'', ''trigger_priority''\\)\n    \"\"\"\"\"\"\\)\\)\n    existing = [r[0] for r in result.fetchall\\(\\)]\n    print\\(f''Existing columns: {existing}''\\)\n    \n    # Add columns if not exist\n    if ''trigger_condition'' not in existing:\n        conn.execute\\(text\\(''ALTER TABLE wf_definitions ADD COLUMN trigger_condition TEXT''\\)\\)\n        print\\(''Added trigger_condition column''\\)\n    \n    if ''trigger_priority'' not in existing:\n        conn.execute\\(text\\(''ALTER TABLE wf_definitions ADD COLUMN trigger_priority INTEGER NOT NULL DEFAULT 0''\\)\\)\n        print\\(''Added trigger_priority column''\\)\n    \n    conn.commit\\(\\)\n    print\\(''Done!''\\)\n\")",
      "Bash(D:vnss_tmsbackend.venvScriptspython.exe -c \"from sqlalchemy import create_engine, text; engine = create_engine\\(''postgresql+psycopg://postgres:!Tnt01087@localhost:5432/tms''\\); conn = engine.connect\\(\\); result = conn.execute\\(text\\(\"\"SELECT column_name FROM information_schema.columns WHERE table_name = ''wf_definitions'' AND column_name IN \\(''trigger_condition'', ''trigger_priority''\\)\"\"\\)\\); existing = [r[0] for r in result.fetchall\\(\\)]; print\\(f''Existing columns: {existing}''\\)\")",
      "Bash(powershell -ExecutionPolicy Bypass -File:*)",
      "Bash(.venv\\\\Scripts\\\\python.exe -c \"from app.api.v1.routes.fms.seed import router; print\\(''OK'', router.prefix\\)\")",
      "Bash(D:\\\\\\\\vnss_tms\\\\\\\\backend\\\\\\\\.venv\\\\\\\\Scripts\\\\\\\\python.exe -m uvicorn:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NzAyNTE2Nn0.xHWjxNQeSQhDJOUy7d3F5wKozlTWSKIw0hE9dmCvJTg\")",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NzAyNTc4Nn0.N56jQpWxfCxoaqPXE4srf6WFILXGsM6pEYZTJFlwV0U\":*)",
      "Bash(.venvScriptspython.exe -c \"\nimport psycopg2\nconn = psycopg2.connect\\(''postgresql://postgres:admin123@localhost:5432/vnss_tms''\\)\ncur = conn.cursor\\(\\)\ncur.execute\\(\"\"SELECT column_name FROM information_schema.columns WHERE table_name = ''fms_freight_rates'' ORDER BY ordinal_position\"\"\\)\nrows = cur.fetchall\\(\\)\nfor row in rows:\n    print\\(row[0]\\)\nconn.close\\(\\)\n\")",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NzAyODAxNn0.BOfTCq4GiBkFMfqI-0yZNA9xW0NA95A1V90-gfzBfrU\")",
      "Bash(.venvScriptspython.exe -c \"from app.api.v1.routes.fms import rates; print\\(''rates OK''\\)\")",
      "Bash($TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NzAyODAxNn0.BOfTCq4GiBkFMfqI-0yZNA9xW0NA95A1V90-gfzBfrU\")",
      "Bash(.venvScriptspython.exe -c \"\nimport sys\nsys.path.insert\\(0, ''.''\\)\nfrom app.db.session import engine\nfrom sqlmodel import Session, select\nfrom app.models import User, Tenant\n\nwith Session\\(engine\\) as session:\n    print\\(''=== ALL USERS ===''\\)\n    users = session.exec\\(select\\(User\\)\\).all\\(\\)\n    for u in users:\n        print\\(f''ID: {u.id}''\\)\n        print\\(f''  Email: {u.email}''\\)\n        print\\(f''  Full Name: {u.full_name}''\\)\n        print\\(f''  Role: {u.role}''\\)\n        print\\(f''  System Role: {u.system_role}''\\)\n        print\\(f''  Tenant ID: {u.tenant_id}''\\)\n        print\\(\\)\n    \n    print\\(''=== ALL TENANTS ===''\\)\n    tenants = session.exec\\(select\\(Tenant\\)\\).all\\(\\)\n    for t in tenants:\n        print\\(f''ID: {t.id}''\\)\n        print\\(f''  Name: {t.name}''\\)\n        print\\(f''  Code: {getattr\\(t, \"\"code\"\", \"\"N/A\"\"\\)}''\\)\n        print\\(\\)\n\")",
      "Bash(D:vnss_tmsbackend.venvScriptspython.exe -c \"import json,sys; d=json.load\\(sys.stdin\\); paths = [p for p in d.get\\(''paths'',{}\\).keys\\(\\) if ''tenant'' in p]; print\\(chr\\(10\\).join\\(paths\\)\\)\")",
      "Bash(.venvScriptspython.exe -c \"from app.api.v1.routes.admin_billing import router; print\\(''admin_billing router OK''\\); print\\(''Routes:'', [r.path for r in router.routes]\\)\")",
      "Bash(.venvScriptspython.exe -c \"from app.api.v1.routes.mes import router; print\\(''MES routes imported successfully''\\)\")",
      "Bash(D:/vnss_tms/backend/.venv/Scripts/python.exe:*)",
      "Bash(.venvScriptspython.exe -c \"from app.api.v1.routes.crm.chat import router; print\\(''Chat router imported OK''\\); print\\(''Routes:'', [r.path for r in router.routes]\\)\")",
      "Bash(d:/vnss_tms/backend/.venv/Scripts/python.exe:*)",
      "Bash(taskkill /F /PID 10764)",
      "Bash(powershell.exe:*)",
      "Bash(xargs -I{} powershell.exe -Command \"Stop-Process -Id {} -Force -ErrorAction SilentlyContinue\")",
      "Bash(D:/ngrok.exe config add-authtoken 2VF4GS5TRHRZ3M6CFIFXERN7H5AEKN4)",
      "Bash(D:/ngrok.exe config add-authtoken 2VF4GS5TRHRZ3M6CFIFXERN7H5AEKN4_37VzdsTnnfcNngLzY1qJiNVkI0a_4K7KUwNZSanc8n3bj4bAF)",
      "Bash(D:/ngrok.exe config add-authtoken 37VzdsTnnfcNngLzY1qJiNVkI0a_4K7KUwNZSanc8n3bj4bAF)",
      "Bash(done)",
      "Bash(ssh root@103.176.20.95 \"ls -la /root/ && pwd\")",
      "Bash(ssh root@103.176.20.95 \"ls -la /var/www/ 2>/dev/null || ls -la /opt/ 2>/dev/null || echo ''checking apps''\")",
      "Bash(rsync:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJiNWI4ZTRkYy00ZDc3LTQ0MzYtYjQzNy1kNDM4MDg0YzBkYmYiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NzEwMTQ3Nn0.vOQk6rJ5AIhVfzBQnmqB8E2pezXYe61DXy1Apcy9EdY\" curl -s \"https://9log.tech/api/v1/dashboard/stats\" -H \"Authorization: Bearer $TOKEN\" -k)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1OTljMDhjYS02N2U0LTRjNmQtOTMwYS1lMWRkMWVkYzZlYjUiLCJyb2xlIjoiQURNSU4iLCJ0ZW5hbnRfaWQiOiJURU5BTlRfREVNTyIsImV4cCI6MTc2NzEwMTY1N30.0kAQnXHEkWdUUtvW8xI3auwr9_zK1OGpNp_lvIOfRxI\" echo \"=== Dashboard Stats ===\")",
      "Bash(adb devices:*)",
      "Bash(./gradlew assembleDebug:*)",
      "Bash(adb install:*)",
      "Bash(adb shell:*)",
      "Bash(npx react-native start --reset-cache)",
      "Bash(du:*)",
      "Bash(for d in */)",
      "Bash(./gradlew clean:*)",
      "Bash(python -m uvicorn:*)",
      "Bash(d:/vnss_tms/backend/venv/Scripts/python.exe:*)",
      "Bash(timeout /t 8 /nobreak)",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe -m pip install:*)",
      "Bash(timeout /t 2 /nobreak)",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe -c \"from app.api.v1.routes.payment_qr import router; print\\(''Import OK''\\)\")",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe -c \"from app.api.v1.routes import api_router; print\\(''All routes imported OK''\\)\")",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe -m uvicorn:*)",
      "Bash(wmic process where \"processid=31008 or processid=60952 or processid=112448\" call terminate)",
      "Bash(wmic process:*)",
      "Bash(PGPASSWORD=tms_pass psql:*)",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe -c:*)",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe -m playwright install:*)",
      "Bash(/c/Users/ADMIN/AppData/Local/Programs/Python/Python311/python.exe:*)",
      "Bash(dir \"C:\\\\Program Files\\\\Tesseract-OCR\")",
      "Bash(d:/vnss_tms/backend/.venv/Scripts/pip.exe install:*)",
      "Bash(for pid in 123108 84116)",
      "Bash(do taskkill //F //PID $pid)",
      "Bash(\"C:\\\\Program Files \\(x86\\)\\\\Tesseract-OCR\\\\tesseract.exe\" --version)",
      "Bash(d:/vnss_tms/backend/.venv/Scripts/pip.exe show:*)",
      "Bash(curl -s https://tinhung.9log.tech/mes/bom -o /dev/null -w \"%{http_code}\")",
      "Bash(taskkill /F /PID 16688)",
      "Bash(npm run dev:*)",
      "Bash(powershell -ExecutionPolicy Bypass -File deploy.ps1 frontend)",
      "Bash(d:vnss_tmsbackend.venvScriptspython.exe -c \"\nfrom PIL import Image, ImageDraw, ImageFont\n\n# Create favicon with RGBA format \\(required by Next.js\\)\nsizes = [16, 32, 48]\nimages = []\n\nfor size in sizes:\n    # Use RGBA mode instead of RGB\n    img = Image.new\\(''RGBA'', \\(size, size\\), \\(0, 0, 0, 255\\)\\)  # black bg with full opacity\n    draw = ImageDraw.Draw\\(img\\)\n    \n    # Calculate font size\n    font_size = int\\(size * 0.8\\)\n    try:\n        font = ImageFont.truetype\\(''arial.ttf'', font_size\\)\n    except:\n        font = ImageFont.load_default\\(\\)\n    \n    # Draw white 9\n    bbox = draw.textbbox\\(\\(0, 0\\), ''9'', font=font\\)\n    text_width = bbox[2] - bbox[0]\n    text_height = bbox[3] - bbox[1]\n    x = \\(size - text_width\\) // 2 - bbox[0]\n    y = \\(size - text_height\\) // 2 - bbox[1]\n    draw.text\\(\\(x, y\\), ''9'', fill=\\(255, 255, 255, 255\\), font=font\\)  # white with full opacity\n    \n    images.append\\(img\\)\n\n# Save as ICO with RGBA format\nimages[1].save\\(''app/favicon.ico'', format=''ICO'', sizes=[\\(16,16\\), \\(32,32\\), \\(48,48\\)]\\)\nprint\\(''Favicon created with RGBA format''\\)\n\")",
      "Bash(d:\\\\vnss_tms\\\\backend\\\\.venv\\\\Scripts\\\\python.exe:*)",
      "Bash(powershell -ExecutionPolicy Bypass -File deploy_fast.ps1 frontend)",
      "Bash(copy:*)",
      "Bash(npm run lint)",
      "Bash(python -m alembic:*)",
      "Bash(\"C:\\\\Users\\\\ADMIN\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python313\\\\python.exe\" -m venv .venv)",
      "Bash(./.venv/Scripts/pip.exe install:*)",
      "Bash(./.venv/Scripts/python.exe:*)",
      "Bash(docker compose:*)",
      "Bash(git init:*)",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git config:*)"
    ]
  }
}
