"""Add driver_payroll table with workflow integration

Revision ID: 3b5030725556
Revises: 20260109_0008
Create Date: 2026-01-14 23:45:00.317565+00:00

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
import sqlmodel
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = '3b5030725556'
down_revision: Union[str, None] = '20260109_0008'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('driver_payroll',
    sa.Column('tenant_id', sqlmodel.sql.sqltypes.AutoString(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('id', sqlmodel.sql.sqltypes.AutoString(), nullable=False),
    sa.Column('driver_id', sqlmodel.sql.sqltypes.AutoString(), nullable=False),
    sa.Column('year', sa.Integer(), nullable=False),
    sa.Column('month', sa.Integer(), nullable=False),
    sa.Column('status', sqlmodel.sql.sqltypes.AutoString(length=50), nullable=False),
    sa.Column('workflow_instance_id', sqlmodel.sql.sqltypes.AutoString(), nullable=True),
    sa.Column('trip_snapshot', sa.JSON(), nullable=True),
    sa.Column('total_trips', sa.Integer(), nullable=False),
    sa.Column('total_distance_km', sa.Integer(), nullable=False),
    sa.Column('total_salary', sa.Integer(), nullable=False),
    sa.Column('total_bonuses', sa.Integer(), nullable=False),
    sa.Column('total_deductions', sa.Integer(), nullable=False),
    sa.Column('net_salary', sa.Integer(), nullable=False),
    sa.Column('created_by_id', sqlmodel.sql.sqltypes.AutoString(), nullable=False),
    sa.Column('confirmed_by_driver_at', sa.DateTime(), nullable=True),
    sa.Column('confirmed_by_hr_at', sa.DateTime(), nullable=True),
    sa.Column('paid_at', sa.DateTime(), nullable=True),
    sa.Column('notes', sqlmodel.sql.sqltypes.AutoString(length=2000), nullable=True),
    sa.Column('driver_notes', sqlmodel.sql.sqltypes.AutoString(length=2000), nullable=True),
    sa.Column('hr_notes', sqlmodel.sql.sqltypes.AutoString(length=2000), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['workflow_instance_id'], ['wf_instances.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('tenant_id', 'driver_id', 'year', 'month', name='uq_driver_payroll_period')
    )
    op.create_index(op.f('ix_driver_payroll_created_by_id'), 'driver_payroll', ['created_by_id'], unique=False)
    op.create_index(op.f('ix_driver_payroll_driver_id'), 'driver_payroll', ['driver_id'], unique=False)
    op.create_index(op.f('ix_driver_payroll_id'), 'driver_payroll', ['id'], unique=False)
    op.create_index(op.f('ix_driver_payroll_month'), 'driver_payroll', ['month'], unique=False)
    op.create_index(op.f('ix_driver_payroll_status'), 'driver_payroll', ['status'], unique=False)
    op.create_index(op.f('ix_driver_payroll_tenant_id'), 'driver_payroll', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_driver_payroll_workflow_instance_id'), 'driver_payroll', ['workflow_instance_id'], unique=False)
    op.create_index(op.f('ix_driver_payroll_year'), 'driver_payroll', ['year'], unique=False)
    op.drop_index(op.f('ix_ai_usage_logs_feature_code'), table_name='ai_usage_logs')
    op.drop_index(op.f('ix_ai_usage_logs_provider_code'), table_name='ai_usage_logs')
    op.drop_index(op.f('ix_ai_usage_logs_tenant_id'), table_name='ai_usage_logs')
    op.drop_table('ai_usage_logs')
    op.drop_index(op.f('ix_fms_tracking_shipment_id'), table_name='fms_tracking')
    op.drop_index(op.f('ix_fms_tracking_tenant_id'), table_name='fms_tracking')
    op.drop_table('fms_tracking')
    op.drop_index(op.f('ix_fms_rates_rate_code'), table_name='fms_rates')
    op.drop_index(op.f('ix_fms_rates_tenant_id'), table_name='fms_rates')
    op.drop_table('fms_rates')
    op.drop_index(op.f('ix_trip_id'), table_name='trip')
    op.drop_table('trip')
    op.drop_index(op.f('ix_ai_providers_provider_code'), table_name='ai_providers')
    op.drop_table('ai_providers')
    op.drop_index(op.f('idx_trip_shipments_shipment'), table_name='trip_shipments')
    op.drop_index(op.f('idx_trip_shipments_trip'), table_name='trip_shipments')
    op.drop_table('trip_shipments')
    op.drop_index(op.f('ix_ai_feature_configs_feature_code'), table_name='ai_feature_configs')
    op.drop_table('ai_feature_configs')
    op.alter_column('acc_account_balances', 'debit_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'credit_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'currency_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'currency_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_account_balances_id'), 'acc_account_balances', ['id'], unique=False)
    op.alter_column('acc_asset_depreciations', 'opening_book_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'depreciation_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'accumulated_depreciation',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'closing_book_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'is_posted',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_asset_depreciations_depreciation_date'), 'acc_asset_depreciations', ['depreciation_date'], unique=False)
    op.create_index(op.f('ix_acc_asset_depreciations_id'), 'acc_asset_depreciations', ['id'], unique=False)
    op.alter_column('acc_bank_accounts', 'account_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'is_primary',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'current_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'available_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'opening_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'last_reconcile_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_bank_accounts_account_type'), 'acc_bank_accounts', ['account_type'], unique=False)
    op.create_index(op.f('ix_acc_bank_accounts_id'), 'acc_bank_accounts', ['id'], unique=False)
    op.alter_column('acc_bank_reconciliations', 'statement_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'book_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'deposits_in_transit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'outstanding_checks',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'bank_charges',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'bank_interest',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'other_adjustments',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'adjusted_statement_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'adjusted_book_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'difference',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_bank_reconciliations_id'), 'acc_bank_reconciliations', ['id'], unique=False)
    op.create_index(op.f('ix_acc_bank_reconciliations_reconciliation_date'), 'acc_bank_reconciliations', ['reconciliation_date'], unique=False)
    op.create_index(op.f('ix_acc_bank_reconciliations_status'), 'acc_bank_reconciliations', ['status'], unique=False)
    op.alter_column('acc_bank_transactions', 'transaction_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'running_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'is_reconciled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_bank_transactions_id'), 'acc_bank_transactions', ['id'], unique=False)
    op.create_index(op.f('ix_acc_bank_transactions_is_reconciled'), 'acc_bank_transactions', ['is_reconciled'], unique=False)
    op.create_index(op.f('ix_acc_bank_transactions_partner_id'), 'acc_bank_transactions', ['partner_id'], unique=False)
    op.create_index(op.f('ix_acc_bank_transactions_transaction_number'), 'acc_bank_transactions', ['transaction_number'], unique=False)
    op.create_index(op.f('ix_acc_bank_transactions_transaction_type'), 'acc_bank_transactions', ['transaction_type'], unique=False)
    op.alter_column('acc_chart_of_accounts', 'level',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'is_parent',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'classification',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'nature',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'is_system',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'allow_posting',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'require_partner',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'require_cost_center',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'require_project',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'allow_multi_currency',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'opening_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'opening_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'current_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'current_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_chart_of_accounts_category'), 'acc_chart_of_accounts', ['category'], unique=False)
    op.create_index(op.f('ix_acc_chart_of_accounts_id'), 'acc_chart_of_accounts', ['id'], unique=False)
    op.create_index(op.f('ix_acc_chart_of_accounts_is_active'), 'acc_chart_of_accounts', ['is_active'], unique=False)
    op.alter_column('acc_cost_centers', 'budget_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_cost_centers', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_cost_centers_id'), 'acc_cost_centers', ['id'], unique=False)
    op.alter_column('acc_customer_invoice_lines', 'line_number',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'quantity',
               existing_type=sa.NUMERIC(precision=15, scale=4),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'unit_price',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'tax_rate',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'line_total',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_customer_invoice_lines_id'), 'acc_customer_invoice_lines', ['id'], unique=False)
    op.alter_column('acc_customer_invoices', 'invoice_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'subtotal',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'total_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'total_amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'paid_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'balance_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_customer_invoices_due_date'), 'acc_customer_invoices', ['due_date'], unique=False)
    op.create_index(op.f('ix_acc_customer_invoices_id'), 'acc_customer_invoices', ['id'], unique=False)
    op.create_index(op.f('ix_acc_customer_invoices_invoice_date'), 'acc_customer_invoices', ['invoice_date'], unique=False)
    op.create_index(op.f('ix_acc_customer_invoices_invoice_type'), 'acc_customer_invoices', ['invoice_type'], unique=False)
    op.alter_column('acc_fiscal_periods', 'is_open',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fiscal_periods', 'is_adjustment',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_fiscal_periods_id'), 'acc_fiscal_periods', ['id'], unique=False)
    op.alter_column('acc_fiscal_years', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fiscal_years', 'is_closed',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_fiscal_years_id'), 'acc_fiscal_years', ['id'], unique=False)
    op.alter_column('acc_fixed_asset_categories', 'category_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'default_useful_life',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'default_depreciation_method',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'default_salvage_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_fixed_asset_categories_id'), 'acc_fixed_asset_categories', ['id'], unique=False)
    op.alter_column('acc_fixed_assets', 'purchase_price',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'additional_costs',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'original_cost',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'salvage_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'depreciable_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'depreciation_method',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'useful_life_months',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'remaining_life_months',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'monthly_depreciation',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'accumulated_depreciation',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'book_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'disposal_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'disposal_gain_loss',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'is_fully_depreciated',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_fixed_assets_id'), 'acc_fixed_assets', ['id'], unique=False)
    op.create_index(op.f('ix_acc_fixed_assets_vehicle_id'), 'acc_fixed_assets', ['vehicle_id'], unique=False)
    op.alter_column('acc_general_ledger', 'opening_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'opening_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'period_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'period_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'closing_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'closing_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_general_ledger_account_code'), 'acc_general_ledger', ['account_code'], unique=False)
    op.create_index(op.f('ix_acc_general_ledger_id'), 'acc_general_ledger', ['id'], unique=False)
    op.create_index(op.f('ix_acc_general_ledger_partner_id'), 'acc_general_ledger', ['partner_id'], unique=False)
    op.alter_column('acc_journal_entries', 'total_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'total_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_journal_entries_id'), 'acc_journal_entries', ['id'], unique=False)
    op.create_index(op.f('ix_acc_journal_entries_journal_id'), 'acc_journal_entries', ['journal_id'], unique=False)
    op.alter_column('acc_journal_entry_lines', 'line_number',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'debit_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'credit_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'amount_currency',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'is_reconciled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_journal_entry_lines_id'), 'acc_journal_entry_lines', ['id'], unique=False)
    op.create_index(op.f('ix_acc_journal_entry_lines_partner_id'), 'acc_journal_entry_lines', ['partner_id'], unique=False)
    op.alter_column('acc_journals', 'journal_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journals', 'sequence_prefix',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journals', 'next_sequence',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journals', 'sequence_padding',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_journals', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_journals_id'), 'acc_journals', ['id'], unique=False)
    op.alter_column('acc_payment_receipt_allocations', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_payment_receipt_allocations_id'), 'acc_payment_receipt_allocations', ['id'], unique=False)
    op.create_index(op.f('ix_acc_payment_receipt_allocations_invoice_id'), 'acc_payment_receipt_allocations', ['invoice_id'], unique=False)
    op.create_index(op.f('ix_acc_payment_receipt_allocations_receipt_id'), 'acc_payment_receipt_allocations', ['receipt_id'], unique=False)
    op.alter_column('acc_payment_receipts', 'payment_method',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'unallocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_payment_receipts_id'), 'acc_payment_receipts', ['id'], unique=False)
    op.create_index(op.f('ix_acc_payment_receipts_receipt_date'), 'acc_payment_receipts', ['receipt_date'], unique=False)
    op.alter_column('acc_payment_voucher_allocations', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_payment_voucher_allocations_id'), 'acc_payment_voucher_allocations', ['id'], unique=False)
    op.create_index(op.f('ix_acc_payment_voucher_allocations_invoice_id'), 'acc_payment_voucher_allocations', ['invoice_id'], unique=False)
    op.create_index(op.f('ix_acc_payment_voucher_allocations_voucher_id'), 'acc_payment_voucher_allocations', ['voucher_id'], unique=False)
    op.alter_column('acc_payment_vouchers', 'payment_method',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'unallocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_payment_vouchers_id'), 'acc_payment_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_acc_payment_vouchers_voucher_date'), 'acc_payment_vouchers', ['voucher_date'], unique=False)
    op.alter_column('acc_projects', 'budget_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_projects', 'actual_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_projects', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_projects', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_projects_id'), 'acc_projects', ['id'], unique=False)
    op.alter_column('acc_tax_rates', 'tax_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'rate',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'rate_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'is_default',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_tax_rates_id'), 'acc_tax_rates', ['id'], unique=False)
    op.alter_column('acc_vendor_invoice_lines', 'line_number',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'quantity',
               existing_type=sa.NUMERIC(precision=15, scale=4),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'unit_price',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'tax_rate',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'line_total',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'received_quantity',
               existing_type=sa.NUMERIC(precision=15, scale=4),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_vendor_invoice_lines_id'), 'acc_vendor_invoice_lines', ['id'], unique=False)
    op.alter_column('acc_vendor_invoices', 'invoice_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'is_matched',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'subtotal',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'total_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'total_amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'paid_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'balance_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=None,
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_acc_vendor_invoices_due_date'), 'acc_vendor_invoices', ['due_date'], unique=False)
    op.create_index(op.f('ix_acc_vendor_invoices_id'), 'acc_vendor_invoices', ['id'], unique=False)
    op.create_index(op.f('ix_acc_vendor_invoices_invoice_date'), 'acc_vendor_invoices', ['invoice_date'], unique=False)
    op.create_index(op.f('ix_acc_vendor_invoices_invoice_type'), 'acc_vendor_invoices', ['invoice_type'], unique=False)
    op.alter_column('action_costs', 'cost_tokens',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('action_costs', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('action_costs', 'priority',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_action_costs_unique'), table_name='action_costs')
    op.create_index(op.f('ix_action_costs_id'), 'action_costs', ['id'], unique=False)
    op.alter_column('activity_logs', 'response_status',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('activity_logs', 'success',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('activity_logs', 'cost_tokens',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_activity_logs_tenant_date'), table_name='activity_logs')
    op.drop_index(op.f('ix_activity_logs_tenant_user_date'), table_name='activity_logs')
    op.create_index(op.f('ix_activity_logs_id'), 'activity_logs', ['id'], unique=False)
    op.alter_column('actor_relationships', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actor_relationships', 'message',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('actor_relationships', 'decline_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('actor_relationships', 'total_orders_completed',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actor_relationships', 'total_amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actor_relationships', 'total_amount_pending',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actor_relationships', 'total_ratings',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_actor_relationships_pair_type'), table_name='actor_relationships')
    op.create_index(op.f('ix_actor_relationships_id'), 'actor_relationships', ['id'], unique=False)
    op.alter_column('actor_sessions', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actor_sessions', 'revoked_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_actor_sessions_id'), 'actor_sessions', ['id'], unique=False)
    op.alter_column('actors', 'type',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actors', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('actors', 'avatar_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('actors', 'bio',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('actors', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('actors', 'country',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=True)
    op.alter_column('actors', 'password_hash',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_actors_id'), 'actors', ['id'], unique=False)
    op.alter_column('ai_decisions', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_ai_decisions_driver_id'), 'ai_decisions', ['driver_id'], unique=False)
    op.create_index(op.f('ix_ai_decisions_id'), 'ai_decisions', ['id'], unique=False)
    op.create_index(op.f('ix_ai_decisions_order_id'), 'ai_decisions', ['order_id'], unique=False)
    op.create_index(op.f('ix_ai_decisions_trip_id'), 'ai_decisions', ['trip_id'], unique=False)
    op.create_index(op.f('ix_ai_decisions_vehicle_id'), 'ai_decisions', ['vehicle_id'], unique=False)
    op.alter_column('audit_logs', 'user_agent',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('audit_logs', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_audit_logs_id'), 'audit_logs', ['id'], unique=False)
    op.alter_column('crm_accounts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_accounts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_accounts', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'country',
               existing_type=sa.VARCHAR(length=100),
               nullable=False)
    op.alter_column('crm_accounts', 'credit_limit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_accounts', 'credit_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('crm_accounts', 'currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=False)
    op.alter_column('crm_accounts', 'default_pickup_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'default_delivery_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'service_preferences',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'synced_to_tms',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('crm_accounts', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_crm_accounts_tenant_status'), table_name='crm_accounts')
    op.drop_index(op.f('ix_crm_accounts_tenant_type'), table_name='crm_accounts')
    op.create_index(op.f('ix_crm_accounts_account_type'), 'crm_accounts', ['account_type'], unique=False)
    op.create_index(op.f('ix_crm_accounts_id'), 'crm_accounts', ['id'], unique=False)
    op.create_index(op.f('ix_crm_accounts_status'), 'crm_accounts', ['status'], unique=False)
    op.create_index(op.f('ix_crm_accounts_tax_code'), 'crm_accounts', ['tax_code'], unique=False)
    op.alter_column('crm_activities', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_activities', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_activities', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'priority',
               existing_type=sa.VARCHAR(length=10),
               nullable=False)
    op.alter_column('crm_activities', 'participants',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'reminded',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('crm_activities', 'outcome',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'next_action',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_crm_activities_tenant_type_status'), table_name='crm_activities')
    op.create_index(op.f('ix_crm_activities_id'), 'crm_activities', ['id'], unique=False)
    op.alter_column('crm_activity_logs', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_activity_logs', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_activity_logs', 'old_values',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'new_values',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'changed_fields',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_crm_activity_logs_entity'), table_name='crm_activity_logs')
    op.create_index(op.f('ix_crm_activity_logs_id'), 'crm_activity_logs', ['id'], unique=False)
    op.alter_column('crm_contacts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contacts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contacts', 'last_name',
               existing_type=sa.VARCHAR(length=100),
               nullable=True)
    op.alter_column('crm_contacts', 'full_name',
               existing_type=sa.VARCHAR(length=255),
               nullable=True)
    op.alter_column('crm_contacts', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_contacts', 'is_primary',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('crm_contacts', 'is_billing_contact',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('crm_contacts', 'is_shipping_contact',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('crm_contacts', 'decision_maker',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('crm_contacts', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('crm_contacts', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_crm_contacts_email'), 'crm_contacts', ['email'], unique=False)
    op.create_index(op.f('ix_crm_contacts_id'), 'crm_contacts', ['id'], unique=False)
    op.add_column('crm_contract_items', sa.Column('product_code', sqlmodel.sql.sqltypes.AutoString(length=50), nullable=True))
    op.add_column('crm_contract_items', sa.Column('billing_start_date', sa.Date(), nullable=True))
    op.add_column('crm_contract_items', sa.Column('billing_end_date', sa.Date(), nullable=True))
    op.add_column('crm_contract_items', sa.Column('billing_frequency', sqlmodel.sql.sqltypes.AutoString(length=50), nullable=True))
    op.add_column('crm_contract_items', sa.Column('updated_at', sa.DateTime(), nullable=True))
    op.alter_column('crm_contract_items', 'product_name',
               existing_type=sa.VARCHAR(length=255),
               nullable=False)
    op.alter_column('crm_contract_items', 'quantity',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contract_items', 'unit_price',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contract_items', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contract_items', 'tax_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contract_items', 'line_total',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contract_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.create_index(op.f('ix_crm_contract_items_id'), 'crm_contract_items', ['id'], unique=False)
    op.drop_column('crm_contract_items', 'line_number')
    op.drop_column('crm_contract_items', 'service_type')
    op.drop_column('crm_contract_items', 'notes')
    op.alter_column('crm_contracts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contracts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('crm_contracts', 'start_date',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'end_date',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'signed_date',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'total_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_contracts', 'currency',
               existing_type=sa.VARCHAR(length=10),
               type_=sqlmodel.sql.sqltypes.AutoString(length=3),
               nullable=False)
    op.alter_column('crm_contracts', 'payment_terms',
               existing_type=sa.VARCHAR(length=100),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'auto_renew',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contracts', 'renewal_notice_days',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_contracts', 'terms_conditions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=10000),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.create_index(op.f('ix_crm_contracts_id'), 'crm_contracts', ['id'], unique=False)
    op.alter_column('crm_customer_groups', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_customer_groups', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_customer_groups', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_customer_groups', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_customer_groups', 'credit_limit_default',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_customer_groups', 'priority',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('crm_customer_groups', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.create_index(op.f('ix_crm_customer_groups_id'), 'crm_customer_groups', ['id'], unique=False)
    op.alter_column('crm_leads', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_leads', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_leads', 'code',
               existing_type=sa.VARCHAR(length=50),
               nullable=True)
    op.alter_column('crm_leads', 'last_name',
               existing_type=sa.VARCHAR(length=100),
               nullable=True)
    op.alter_column('crm_leads', 'full_name',
               existing_type=sa.VARCHAR(length=255),
               nullable=True)
    op.alter_column('crm_leads', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_leads', 'country',
               existing_type=sa.VARCHAR(length=100),
               nullable=False)
    op.alter_column('crm_leads', 'estimated_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_leads', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_leads', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_crm_leads_source'), table_name='crm_leads')
    op.drop_index(op.f('ix_crm_leads_tenant_status'), table_name='crm_leads')
    op.create_index(op.f('ix_crm_leads_company_name'), 'crm_leads', ['company_name'], unique=False)
    op.create_index(op.f('ix_crm_leads_email'), 'crm_leads', ['email'], unique=False)
    op.create_index(op.f('ix_crm_leads_id'), 'crm_leads', ['id'], unique=False)
    op.create_foreign_key(None, 'crm_leads', 'crm_opportunities', ['converted_opportunity_id'], ['id'])
    op.create_foreign_key(None, 'crm_leads', 'crm_accounts', ['converted_account_id'], ['id'])
    op.create_foreign_key(None, 'crm_leads', 'crm_contacts', ['converted_contact_id'], ['id'])
    op.alter_column('crm_opportunities', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_opportunities', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_opportunities', 'code',
               existing_type=sa.VARCHAR(length=50),
               nullable=True)
    op.alter_column('crm_opportunities', 'probability',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_opportunities', 'amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_opportunities', 'currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=False)
    op.alter_column('crm_opportunities', 'close_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'next_step',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_crm_opportunities_tenant_stage'), table_name='crm_opportunities')
    op.create_index(op.f('ix_crm_opportunities_id'), 'crm_opportunities', ['id'], unique=False)
    op.alter_column('crm_quote_items', 'line_number',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('crm_quote_items', 'service_category',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_quote_items', 'service_type',
               existing_type=sa.VARCHAR(length=50),
               nullable=True)
    op.alter_column('crm_quote_items', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               nullable=True)
    op.alter_column('crm_quote_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quote_items', 'unit_price',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quote_items', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quote_items', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_quote_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_quotes', 'version',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('crm_quotes', 'subtotal',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quotes', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quotes', 'discount_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quotes', 'tax_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quotes', 'tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quotes', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('crm_quotes', 'currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=False)
    op.alter_column('crm_quotes', 'payment_terms',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'delivery_terms',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'terms_conditions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'rejection_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_quotes', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.create_index(op.f('ix_crm_quotes_id'), 'crm_quotes', ['id'], unique=False)
    op.create_index(op.f('ix_crm_quotes_status'), 'crm_quotes', ['status'], unique=False)
    op.create_foreign_key(None, 'crm_quotes', 'crm_quotes', ['parent_quote_id'], ['id'])
    op.alter_column('crm_sales_order_items', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('crm_sales_order_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=12, scale=4),
               nullable=False)
    op.alter_column('crm_sales_order_items', 'quantity_shipped',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_order_items', 'quantity_delivered',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_order_items', 'quantity_returned',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_order_items', 'unit_price',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_sales_order_items', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('crm_sales_order_items', 'discount_amount',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_order_items', 'tax_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('crm_sales_order_items', 'tax_amount',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_order_items', 'line_total',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_sales_order_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.create_index(op.f('ix_crm_sales_order_items_id'), 'crm_sales_order_items', ['id'], unique=False)
    op.create_index(op.f('ix_crm_sales_order_items_product_id'), 'crm_sales_order_items', ['product_id'], unique=False)
    op.create_foreign_key(None, 'crm_sales_order_items', 'crm_sales_orders', ['sales_order_id'], ['id'])
    op.alter_column('crm_sales_orders', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_orders', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('crm_sales_orders', 'order_date',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Date(),
               nullable=False)
    op.alter_column('crm_sales_orders', 'delivery_date',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'subtotal',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_sales_orders', 'tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_sales_orders', 'discount_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_sales_orders', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_orders', 'shipping_cost',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_orders', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('crm_sales_orders', 'amount_paid',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_orders', 'amount_due',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=None,
               nullable=False)
    op.alter_column('crm_sales_orders', 'currency',
               existing_type=sa.VARCHAR(length=10),
               type_=sqlmodel.sql.sqltypes.AutoString(length=3),
               nullable=False)
    op.alter_column('crm_sales_orders', 'shipping_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'billing_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'payment_terms',
               existing_type=sa.VARCHAR(length=100),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'internal_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.create_index(op.f('ix_crm_sales_orders_created_by'), 'crm_sales_orders', ['created_by'], unique=False)
    op.create_index(op.f('ix_crm_sales_orders_delivery_date'), 'crm_sales_orders', ['delivery_date'], unique=False)
    op.create_index(op.f('ix_crm_sales_orders_id'), 'crm_sales_orders', ['id'], unique=False)
    op.create_index(op.f('ix_crm_sales_orders_order_date'), 'crm_sales_orders', ['order_date'], unique=False)
    op.create_index(op.f('ix_crm_sales_orders_payment_status'), 'crm_sales_orders', ['payment_status'], unique=False)
    op.create_foreign_key(None, 'crm_sales_orders', 'users', ['confirmed_by'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'crm_accounts', ['account_id'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'users', ['updated_by'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'users', ['approved_by'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'crm_quotes', ['quote_id'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'crm_contracts', ['contract_id'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'crm_contacts', ['contact_id'], ['id'])
    op.create_foreign_key(None, 'crm_sales_orders', 'users', ['created_by'], ['id'])
    op.alter_column('customers', 'country',
               existing_type=sa.VARCHAR(length=100),
               server_default=None,
               existing_nullable=False)
    op.alter_column('customers', 'credit_limit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('customers', 'credit_days',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('customers', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('customers', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_customers_tenant_active'), table_name='customers')
    op.create_index(op.f('ix_customers_name'), 'customers', ['name'], unique=False)
    op.alter_column('dispatch_alerts', 'severity',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('dispatch_alerts', 'is_resolved',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('dispatch_alerts', 'is_auto',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_dispatch_alerts_driver_id'), 'dispatch_alerts', ['driver_id'], unique=False)
    op.create_index(op.f('ix_dispatch_alerts_id'), 'dispatch_alerts', ['id'], unique=False)
    op.create_index(op.f('ix_dispatch_alerts_order_id'), 'dispatch_alerts', ['order_id'], unique=False)
    op.create_index(op.f('ix_dispatch_alerts_trip_id'), 'dispatch_alerts', ['trip_id'], unique=False)
    op.create_index(op.f('ix_dispatch_alerts_vehicle_id'), 'dispatch_alerts', ['vehicle_id'], unique=False)
    op.alter_column('dispatch_logs', 'is_ai',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_dispatch_logs_driver_id'), 'dispatch_logs', ['driver_id'], unique=False)
    op.create_index(op.f('ix_dispatch_logs_id'), 'dispatch_logs', ['id'], unique=False)
    op.create_index(op.f('ix_dispatch_logs_order_id'), 'dispatch_logs', ['order_id'], unique=False)
    op.create_index(op.f('ix_dispatch_logs_status'), 'dispatch_logs', ['status'], unique=False)
    op.create_index(op.f('ix_dispatch_logs_trip_id'), 'dispatch_logs', ['trip_id'], unique=False)
    op.create_index(op.f('ix_dispatch_logs_user_id'), 'dispatch_logs', ['user_id'], unique=False)
    op.create_index(op.f('ix_dispatch_logs_vehicle_id'), 'dispatch_logs', ['vehicle_id'], unique=False)
    op.alter_column('dispatcher_order_sequences', 'prefix',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('dispatcher_order_sequences', 'last_seq',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_dispatcher_order_sequences_id'), 'dispatcher_order_sequences', ['id'], unique=False)
    op.alter_column('dispatcher_orders', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('dispatcher_orders', 'pickup_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'delivery_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'cargo_description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('dispatcher_orders', 'dispatcher_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'driver_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_dispatcher_orders_id'), 'dispatcher_orders', ['id'], unique=False)
    op.alter_column('driver_availability', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_availability', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_availability', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_availability', 'note',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('driver_availability', 'recurrence_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_driver_availability_date'), table_name='driver_availability')
    op.create_index(op.f('ix_driver_availability_availability_date'), 'driver_availability', ['availability_date'], unique=False)
    op.create_index(op.f('ix_driver_availability_id'), 'driver_availability', ['id'], unique=False)
    op.create_index(op.f('ix_driver_availability_parent_availability_id'), 'driver_availability', ['parent_availability_id'], unique=False)
    op.alter_column('driver_availability_templates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_availability_templates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_availability_templates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_driver_availability_templates_id'), 'driver_availability_templates', ['id'], unique=False)
    op.alter_column('driver_earnings', 'total_orders',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'gross_earnings',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'deductions',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'net_earnings',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('driver_earnings', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_driver_earnings_id'), 'driver_earnings', ['id'], unique=False)
    op.alter_column('driver_salary_settings', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_1',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_2',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_3',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_4',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_5',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_6',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_7',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_8',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_9',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_10',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_11',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'distance_bracket_12',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_1',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_2',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_3',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_4',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_5',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_6',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_7',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_8',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_9',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_10',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_11',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_12',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_bracket_13',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_1',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_2',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_3',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_4',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_5',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_6',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_7',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_8',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_9',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_10',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_11',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_12',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_13',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'port_gate_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'flatbed_tarp_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'warehouse_to_customer_bonus',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'second_trip_bonus',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'third_trip_bonus',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'bonus_45_50_trips',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'bonus_51_54_trips',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'bonus_55_plus_trips',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'holiday_multiplier',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('driver_salary_settings', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.drop_index(op.f('idx_driver_salary_settings_tenant'), table_name='driver_salary_settings')
    op.create_index(op.f('ix_driver_salary_settings_id'), 'driver_salary_settings', ['id'], unique=False)
    op.create_index(op.f('ix_driver_salary_settings_tenant_id'), 'driver_salary_settings', ['tenant_id'], unique=False)
    op.alter_column('drivers', 'base_salary',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('drivers', 'dependent_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('drivers', 'source',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               nullable=False)
    op.drop_index(op.f('idx_drivers_tractor'), table_name='drivers')
    op.drop_index(op.f('idx_drivers_trailer'), table_name='drivers')
    op.drop_index(op.f('idx_drivers_vehicle'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_phone'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_tenant_status'), table_name='drivers')
    op.create_index(op.f('ix_drivers_tractor_id'), 'drivers', ['tractor_id'], unique=False)
    op.create_index(op.f('ix_drivers_trailer_id'), 'drivers', ['trailer_id'], unique=False)
    op.create_index(op.f('ix_drivers_vehicle_id'), 'drivers', ['vehicle_id'], unique=False)
    op.drop_constraint(op.f('fk_drivers_employee_id'), 'drivers', type_='foreignkey')
    op.create_foreign_key(None, 'drivers', 'trailers', ['trailer_id'], ['id'])
    op.create_foreign_key(None, 'drivers', 'vehicles', ['tractor_id'], ['id'])
    op.create_foreign_key(None, 'drivers', 'vehicles', ['vehicle_id'], ['id'])
    op.alter_column('empty_returns', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('empty_returns', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('empty_returns', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('empty_returns', 'return_date',
               existing_type=sa.DATE(),
               nullable=True)
    op.alter_column('empty_returns', 'port_site_id',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('empty_returns', 'cleaning_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'cleaning_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'lift_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'lift_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'storage_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'storage_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'repair_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'repair_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'other_fee',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'other_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'total_amount',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'total_paid',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('empty_returns', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_empty_returns_order_id'), table_name='empty_returns')
    op.drop_index(op.f('idx_empty_returns_port_site_id'), table_name='empty_returns')
    op.drop_index(op.f('idx_empty_returns_return_date'), table_name='empty_returns')
    op.drop_index(op.f('idx_empty_returns_status'), table_name='empty_returns')
    op.drop_index(op.f('idx_empty_returns_tenant_id'), table_name='empty_returns')
    op.create_index(op.f('ix_empty_returns_id'), 'empty_returns', ['id'], unique=False)
    op.create_index(op.f('ix_empty_returns_order_id'), 'empty_returns', ['order_id'], unique=False)
    op.create_index(op.f('ix_empty_returns_port_site_id'), 'empty_returns', ['port_site_id'], unique=False)
    op.create_index(op.f('ix_empty_returns_return_date'), 'empty_returns', ['return_date'], unique=False)
    op.create_index(op.f('ix_empty_returns_status'), 'empty_returns', ['status'], unique=False)
    op.create_index(op.f('ix_empty_returns_tenant_id'), 'empty_returns', ['tenant_id'], unique=False)
    op.drop_constraint(op.f('empty_returns_order_id_fkey'), 'empty_returns', type_='foreignkey')
    op.create_foreign_key(None, 'empty_returns', 'orders', ['order_id'], ['id'])
    op.alter_column('financial_summaries', 'total_orders',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_revenue',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_freight_charges',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_additional_charges',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_driver_payments',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_fuel_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_maintenance_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_other_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'gross_profit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_receivables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_received',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'outstanding_receivables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_payables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'outstanding_payables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('financial_summaries', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_financial_summaries_id'), 'financial_summaries', ['id'], unique=False)
    op.add_column('fms_agent_agreements', sa.Column('effective_date', sa.DateTime(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('expiry_date', sa.DateTime(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('currency_code', sqlmodel.sql.sqltypes.AutoString(), nullable=False))
    op.add_column('fms_agent_agreements', sa.Column('routes', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('services', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('agreement_file', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('notes', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('updated_at', sa.DateTime(), nullable=False))
    op.add_column('fms_agent_agreements', sa.Column('created_by', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('updated_by', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.alter_column('fms_agent_agreements', 'agreement_no',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('fms_agent_agreements', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_agent_agreements', 'payment_terms',
               existing_type=sa.INTEGER(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_agent_agreements', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_fms_agent_agreements_agent_id'), 'fms_agent_agreements', ['agent_id'], unique=False)
    op.create_index(op.f('ix_fms_agent_agreements_agreement_no'), 'fms_agent_agreements', ['agreement_no'], unique=False)
    op.create_index(op.f('ix_fms_agent_agreements_tenant_id'), 'fms_agent_agreements', ['tenant_id'], unique=False)
    op.drop_constraint(op.f('fms_agent_agreements_agent_id_fkey'), 'fms_agent_agreements', type_='foreignkey')
    op.drop_column('fms_agent_agreements', 'end_date')
    op.drop_column('fms_agent_agreements', 'terms_and_conditions')
    op.drop_column('fms_agent_agreements', 'is_deleted')
    op.drop_column('fms_agent_agreements', 'remarks')
    op.drop_column('fms_agent_agreements', 'start_date')
    op.alter_column('fms_agents', 'agent_type',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('fms_agents', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_agents', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'credit_limit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_agents', 'payment_terms',
               existing_type=sa.INTEGER(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'services',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'trade_lanes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'remarks',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_agents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('fms_agents', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_ai_corrections', 'original_value',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_corrections', 'corrected_value',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_corrections', 'corrected_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_ai_corrections_field'), table_name='fms_ai_corrections')
    op.drop_constraint(op.f('fms_ai_corrections_session_id_fkey'), 'fms_ai_corrections', type_='foreignkey')
    op.drop_constraint(op.f('fms_ai_corrections_output_id_fkey'), 'fms_ai_corrections', type_='foreignkey')
    op.create_foreign_key(None, 'fms_ai_corrections', 'fms_ai_parsing_outputs', ['output_id'], ['id'])
    op.create_foreign_key(None, 'fms_ai_corrections', 'fms_ai_parsing_sessions', ['session_id'], ['id'])
    op.alter_column('fms_ai_customer_rules', 'transform_logic',
               existing_type=postgresql.JSON(astext_type=sa.Text()),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_customer_rules', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_customer_rules', 'times_applied',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_ai_customer_rules', 'times_overridden',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_ai_customer_rules', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('fms_ai_customer_rules', 'is_auto_generated',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('fms_ai_customer_rules', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_ai_rules_type'), table_name='fms_ai_customer_rules')
    op.alter_column('fms_ai_parsing_outputs', 'ai_extracted_value',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_outputs', 'ai_source_content',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_outputs', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_ai_outputs_field'), table_name='fms_ai_parsing_outputs')
    op.drop_constraint(op.f('fms_ai_parsing_outputs_session_id_fkey'), 'fms_ai_parsing_outputs', type_='foreignkey')
    op.create_foreign_key(None, 'fms_ai_parsing_outputs', 'fms_ai_parsing_sessions', ['session_id'], ['id'])
    op.alter_column('fms_ai_parsing_sessions', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('fms_ai_parsing_sessions', 'original_files',
               existing_type=postgresql.JSON(astext_type=sa.Text()),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_sessions', 'document_types',
               existing_type=postgresql.JSON(astext_type=sa.Text()),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_sessions', 'total_fields_parsed',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_ai_parsing_sessions', 'total_fields_corrected',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_ai_parsing_sessions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_ai_sessions_created'), table_name='fms_ai_parsing_sessions')
    op.drop_index(op.f('idx_ai_sessions_status'), table_name='fms_ai_parsing_sessions')
    op.alter_column('fms_ai_partner_matches', 'extracted_name',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_partner_matches', 'extracted_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_partner_matches', 'alternative_matches',
               existing_type=postgresql.JSON(astext_type=sa.Text()),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ai_partner_matches', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_ai_partner_matches_type'), table_name='fms_ai_partner_matches')
    op.drop_constraint(op.f('fms_ai_partner_matches_session_id_fkey'), 'fms_ai_partner_matches', type_='foreignkey')
    op.create_foreign_key(None, 'fms_ai_partner_matches', 'fms_ai_parsing_sessions', ['session_id'], ['id'])
    op.add_column('fms_consolidation_items', sa.Column('item_no', sa.Integer(), nullable=False))
    op.add_column('fms_consolidation_items', sa.Column('house_bl_id', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('house_awb_id', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('shipper_name', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('consignee_name', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('marks_numbers', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('description', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('pieces', sa.Integer(), nullable=False))
    op.add_column('fms_consolidation_items', sa.Column('package_type', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('status', sqlmodel.sql.sqltypes.AutoString(), nullable=False))
    op.add_column('fms_consolidation_items', sa.Column('delivery_date', sa.DateTime(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('delivered_to', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('pod_received', sa.Boolean(), nullable=False))
    op.add_column('fms_consolidation_items', sa.Column('notes', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('updated_at', sa.DateTime(), nullable=False))
    op.alter_column('fms_consolidation_items', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_consolidation_items', 'volume',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_consolidation_items', 'chargeable_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_consolidation_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_consolidation_items', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_fms_consolidation_items_consolidation_id'), 'fms_consolidation_items', ['consolidation_id'], unique=False)
    op.create_index(op.f('ix_fms_consolidation_items_shipment_id'), 'fms_consolidation_items', ['shipment_id'], unique=False)
    op.create_index(op.f('ix_fms_consolidation_items_tenant_id'), 'fms_consolidation_items', ['tenant_id'], unique=False)
    op.drop_constraint(op.f('fms_consolidation_items_shipment_id_fkey'), 'fms_consolidation_items', type_='foreignkey')
    op.drop_column('fms_consolidation_items', 'remarks')
    op.drop_column('fms_consolidation_items', 'packages')
    op.alter_column('fms_containers', 'container_type',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('fms_containers', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_containers', 'tare_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_containers', 'package_qty',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_containers', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_containers', 'net_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_containers', 'volume',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_containers', 'vgm',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'is_reefer',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_containers', 'temperature',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'humidity',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'is_dg',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_containers', 'is_oog',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_containers', 'oog_front',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_back',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_left',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_right',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_top',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'detention_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_containers', 'demurrage_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_containers', 'storage_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_containers', 'detention_cost',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_containers', 'demurrage_cost',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_containers', 'storage_cost',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_containers', 'free_detention_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_containers', 'free_demurrage_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_containers', 'remarks',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_containers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.create_index(op.f('ix_fms_containers_shipment_id'), 'fms_containers', ['shipment_id'], unique=False)
    op.drop_constraint(op.f('fms_containers_shipment_id_fkey'), 'fms_containers', type_='foreignkey')
    op.drop_column('fms_containers', 'over_height')
    op.drop_column('fms_containers', 'over_length_back')
    op.drop_column('fms_containers', 'free_days')
    op.drop_column('fms_containers', 'is_deleted')
    op.drop_column('fms_containers', 'vgm_weight')
    op.drop_column('fms_containers', 'deleted_by')
    op.drop_column('fms_containers', 'volume_cbm')
    op.drop_column('fms_containers', 'un_no')
    op.drop_column('fms_containers', 'empty_return_location')
    op.drop_column('fms_containers', 'ventilation_setting')
    op.drop_column('fms_containers', 'is_dangerous_goods')
    op.drop_column('fms_containers', 'over_length_front')
    op.drop_column('fms_containers', 'humidity_setting')
    op.drop_column('fms_containers', 'vgm_certificate_no')
    op.drop_column('fms_containers', 'demurrage_from')
    op.drop_column('fms_containers', 'temperature_setting')
    op.drop_column('fms_containers', 'deleted_at')
    op.drop_column('fms_containers', 'empty_pickup_location')
    op.drop_column('fms_containers', 'loading_date')
    op.drop_column('fms_containers', 'over_width')
    op.drop_column('fms_containers', 'packages')
    op.drop_column('fms_containers', 'detention_from')
    op.drop_column('fms_containers', 'discharge_date')
    op.drop_column('fms_containers', 'max_payload')
    op.alter_column('fms_countries', 'is_fta_partner',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_countries', 'fta_codes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_countries', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_currencies', 'decimal_places',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_currencies', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_customs_declarations', 'amendment_count',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'commission_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'brokerage_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'packing_cost',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'total_value_foreign',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'total_value_vnd',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'total_items',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'import_duty_payable',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'import_duty_exempted',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'vat_payable',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'vat_exempted',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_customs_declarations', 'ecus_synced',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('fms_customs_exporters', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_exporters', 'name_tokens',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_exporters', 'alias_names',
               existing_type=postgresql.JSON(astext_type=sa.Text()),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_exporters', 'match_priority',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_customs_exporters', 'ai_match_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_customs_exporters', 'user_select_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_customs_exporters', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.drop_index(op.f('idx_exporters_name_hash'), table_name='fms_customs_exporters')
    op.alter_column('fms_customs_importers', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_importers', 'name_tokens',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_importers', 'alias_names',
               existing_type=postgresql.JSON(astext_type=sa.Text()),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_importers', 'match_priority',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_customs_importers', 'ai_match_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_customs_importers', 'user_select_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_customs_importers', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.drop_index(op.f('idx_importers_name_hash'), table_name='fms_customs_importers')
    op.drop_index(op.f('idx_importers_tax_code_hash'), table_name='fms_customs_importers')
    op.alter_column('fms_customs_locations', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_locations', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('fms_customs_offices', 'level',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_customs_offices', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_offices', 'managed_ports',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_customs_offices', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_declaration_types', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_declaration_types', 'requires_license',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_declaration_types', 'requires_co',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_declaration_types', 'special_handling',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_declaration_types', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_exemption_codes', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_exemption_codes', 'legal_reference',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_exemption_codes', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_freight_rates', 'rate_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'currency_code',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'thc_origin_included',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'thc_dest_included',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'doc_fee_included',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'is_contract_rate',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'is_spot_rate',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'is_promotional',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'free_detention_days',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'free_demurrage_days',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'remarks',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'terms_conditions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'internal_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_freight_rates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_code_catalog', 'description_en',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_hs_code_catalog', 'description_vi',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'import_duty_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'vat_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'special_consumption_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'environmental_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'export_duty_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'requires_license',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'requires_inspection',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'special_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_hs_code_catalog', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_codes', 'line_no',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_hs_codes', 'hs_description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'product_name',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'product_specification',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'net_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'unit_price',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'currency_code',
               existing_type=sa.VARCHAR(length=5),
               nullable=False)
    op.alter_column('fms_hs_codes', 'total_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'customs_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'import_duty_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'vat_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'special_consumption_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'environmental_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'import_duty_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'vat_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_hs_codes', 'special_consumption_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'environmental_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'total_tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'exemption_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=False)
    op.alter_column('fms_hs_codes', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_hs_codes', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_fms_hs_codes_product_code'), table_name='fms_hs_codes')
    op.create_index(op.f('ix_fms_hs_codes_product_code'), 'fms_hs_codes', ['product_code'], unique=False)
    op.create_index(op.f('ix_fms_hs_codes_declaration_id'), 'fms_hs_codes', ['declaration_id'], unique=False)
    op.create_index(op.f('ix_fms_hs_codes_hs_code'), 'fms_hs_codes', ['hs_code'], unique=False)
    op.create_index(op.f('ix_fms_hs_codes_tenant_id'), 'fms_hs_codes', ['tenant_id'], unique=False)
    op.drop_column('fms_hs_codes', 'origin_country')
    op.drop_column('fms_hs_codes', 'duty_amount')
    op.drop_column('fms_hs_codes', 'description')
    op.drop_column('fms_hs_codes', 'remarks')
    op.drop_column('fms_hs_codes', 'sct_rate')
    op.drop_column('fms_hs_codes', 'sct_amount')
    op.drop_column('fms_hs_codes', 'duty_rate')
    op.drop_column('fms_hs_codes', 'item_no')
    op.alter_column('fms_parsing_instructions', 'shipper_keywords',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'instructions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('fms_parsing_instructions', 'field_mappings',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'data_source_priority',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'value_transforms',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'examples',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('fms_parsing_instructions', 'priority',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_parsing_instructions', 'times_applied',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.drop_index(op.f('ix_fms_parsing_instructions_pattern'), table_name='fms_parsing_instructions')
    op.alter_column('fms_ports', 'port_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_ports', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_ports', 'is_customs_clearance',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_ports', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.add_column('fms_quotation_items', sa.Column('item_no', sa.Integer(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('description', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_quotation_items', sa.Column('unit_price', sa.Float(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('currency_code', sqlmodel.sql.sqltypes.AutoString(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('amount', sa.Float(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('profit', sa.Float(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('charge_category', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_quotation_items', sa.Column('is_included', sa.Boolean(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('is_optional', sa.Boolean(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('payment_terms', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_quotation_items', sa.Column('payable_to', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_quotation_items', sa.Column('notes', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('fms_quotation_items', sa.Column('updated_at', sa.DateTime(), nullable=False))
    op.add_column('fms_quotation_items', sa.Column('created_by', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.alter_column('fms_quotation_items', 'charge_type',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('fms_quotation_items', 'charge_name',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('fms_quotation_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotation_items', 'buy_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotation_items', 'sell_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotation_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_fms_quotation_items_quotation_id'), 'fms_quotation_items', ['quotation_id'], unique=False)
    op.create_index(op.f('ix_fms_quotation_items_tenant_id'), 'fms_quotation_items', ['tenant_id'], unique=False)
    op.drop_constraint(op.f('fms_quotation_items_quotation_id_fkey'), 'fms_quotation_items', type_='foreignkey')
    op.drop_column('fms_quotation_items', 'is_deleted')
    op.drop_column('fms_quotation_items', 'vendor_id')
    op.drop_column('fms_quotation_items', 'vendor_name')
    op.drop_column('fms_quotation_items', 'remarks')
    op.drop_column('fms_quotation_items', 'buy_amount')
    op.drop_column('fms_quotation_items', 'sell_amount')
    op.alter_column('fms_quotations', 'quotation_date',
               existing_type=sa.DATE(),
               nullable=False)
    op.alter_column('fms_quotations', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'package_qty',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_quotations', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'volume',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'chargeable_weight',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'container_qty',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('fms_quotations', 'is_dangerous_goods',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'is_reefer',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'is_oversize',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'currency_code',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'subtotal',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'discount_amount',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'discount_percent',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'tax_amount',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'total_amount',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'total_buy_rate',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'total_sell_rate',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'profit_amount',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_quotations', 'profit_margin',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'version',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_quotations', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_quotations', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('fms_quotations', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_fms_quotations_customer_id'), 'fms_quotations', ['customer_id'], unique=False)
    op.drop_column('fms_quotations', 'contact_person')
    op.drop_column('fms_quotations', 'cargo_description')
    op.drop_column('fms_quotations', 'terms_and_conditions')
    op.drop_column('fms_quotations', 'rejected_at')
    op.drop_column('fms_quotations', 'deleted_by')
    op.drop_column('fms_quotations', 'volume_cbm')
    op.drop_column('fms_quotations', 'rejection_reason')
    op.drop_column('fms_quotations', 'accepted_by')
    op.drop_column('fms_quotations', 'incoterm')
    op.drop_column('fms_quotations', 'container_40hc')
    op.drop_column('fms_quotations', 'container_40')
    op.drop_column('fms_quotations', 'accepted_at')
    op.drop_column('fms_quotations', 'total_buy_cost')
    op.drop_column('fms_quotations', 'contact_phone')
    op.drop_column('fms_quotations', 'converted_to_shipment_id')
    op.drop_column('fms_quotations', 'total_sell_price')
    op.drop_column('fms_quotations', 'valid_to')
    op.drop_column('fms_quotations', 'sent_by')
    op.drop_column('fms_quotations', 'packages')
    op.drop_column('fms_quotations', 'sent_at')
    op.drop_column('fms_quotations', 'contact_email')
    op.drop_column('fms_quotations', 'remarks')
    op.drop_column('fms_quotations', 'profit')
    op.drop_column('fms_quotations', 'container_20')
    op.alter_column('fms_shipments', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_shipments', 'shipper_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'consignee_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'notify_party_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'pickup_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'delivery_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'etd',
               existing_type=sa.DATE(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'eta',
               existing_type=sa.DATE(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'atd',
               existing_type=sa.DATE(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'ata',
               existing_type=sa.DATE(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'package_qty',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'net_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'volume',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_shipments', 'chargeable_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'container_qty',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'freight_amount',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_shipments', 'freight_currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=False)
    op.alter_column('fms_shipments', 'total_charges',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_shipments', 'total_cost',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'profit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'is_insured',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('fms_shipments', 'insurance_value',
               existing_type=sa.NUMERIC(precision=15, scale=2),
               server_default=None,
               type_=sa.Float(),
               nullable=False)
    op.alter_column('fms_shipments', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'internal_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'special_instructions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_shipments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('fms_shipments', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_fms_shipments_status'), table_name='fms_shipments')
    op.create_index(op.f('ix_fms_shipments_customer_id'), 'fms_shipments', ['customer_id'], unique=False)
    op.drop_column('fms_shipments', 'cargo_description')
    op.drop_column('fms_shipments', 'is_oversized')
    op.drop_column('fms_shipments', 'ops_person_id')
    op.drop_column('fms_shipments', 'volume_cbm')
    op.drop_column('fms_shipments', 'shipper_id')
    op.drop_column('fms_shipments', 'is_reefer')
    op.drop_column('fms_shipments', 'is_dangerous_goods')
    op.drop_column('fms_shipments', 'place_of_receipt')
    op.drop_column('fms_shipments', 'container_count_40')
    op.drop_column('fms_shipments', 'container_count_20')
    op.drop_column('fms_shipments', 'total_sell_rate')
    op.drop_column('fms_shipments', 'master_awb_no')
    op.drop_column('fms_shipments', 'container_count_40hc')
    op.drop_column('fms_shipments', 'total_revenue')
    op.drop_column('fms_shipments', 'total_buy_rate')
    op.drop_column('fms_shipments', 'house_awb_no')
    op.drop_column('fms_shipments', 'consignee_id')
    op.drop_column('fms_shipments', 'place_of_delivery')
    op.drop_column('fms_shipments', 'total_packages')
    op.drop_column('fms_shipments', 'origin_agent_name')
    op.drop_column('fms_shipments', 'container_count_45')
    op.drop_column('fms_shipments', 'currency_code')
    op.drop_column('fms_shipments', 'ops_person_name')
    op.drop_column('fms_shipments', 'customer_ref_no')
    op.drop_column('fms_shipments', 'destination_agent_name')
    op.alter_column('fms_units', 'conversion_factor',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fms_units', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fuel_logs', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('fuel_logs', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('fuel_logs', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('fuel_logs', 'payment_status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_fuel_logs_date'), table_name='fuel_logs')
    op.drop_index(op.f('idx_fuel_logs_driver_id'), table_name='fuel_logs')
    op.drop_index(op.f('idx_fuel_logs_payment_status'), table_name='fuel_logs')
    op.drop_index(op.f('idx_fuel_logs_tenant_id'), table_name='fuel_logs')
    op.drop_index(op.f('idx_fuel_logs_vehicle_id'), table_name='fuel_logs')
    op.create_index(op.f('ix_fuel_logs_date'), 'fuel_logs', ['date'], unique=False)
    op.create_index(op.f('ix_fuel_logs_driver_id'), 'fuel_logs', ['driver_id'], unique=False)
    op.create_index(op.f('ix_fuel_logs_id'), 'fuel_logs', ['id'], unique=False)
    op.create_index(op.f('ix_fuel_logs_payment_status'), 'fuel_logs', ['payment_status'], unique=False)
    op.create_index(op.f('ix_fuel_logs_tenant_id'), 'fuel_logs', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_fuel_logs_vehicle_id'), 'fuel_logs', ['vehicle_id'], unique=False)
    op.drop_constraint(op.f('fuel_logs_driver_id_fkey'), 'fuel_logs', type_='foreignkey')
    op.drop_constraint(op.f('fuel_logs_vehicle_id_fkey'), 'fuel_logs', type_='foreignkey')
    op.create_foreign_key(None, 'fuel_logs', 'vehicles', ['vehicle_id'], ['id'])
    op.create_foreign_key(None, 'fuel_logs', 'drivers', ['driver_id'], ['id'])
    op.alter_column('gps_providers', 'provider_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_providers', 'auth_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_providers', 'sync_interval_seconds',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_providers', 'is_realtime',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_providers', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_providers', 'error_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_providers', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_gps_providers_provider_type'), table_name='gps_providers')
    op.drop_index(op.f('ix_gps_providers_status'), table_name='gps_providers')
    op.alter_column('gps_sync_logs', 'success',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_sync_logs', 'vehicles_synced',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('gps_vehicle_mappings', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_advance_repayments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_advance_repayments', 'repayment_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'repayment_method',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_advance_repayments_id'), 'hrm_advance_repayments', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_advance_repayments_payroll_record_id'), 'hrm_advance_repayments', ['payroll_record_id'], unique=False)
    op.create_index(op.f('ix_hrm_advance_repayments_repayment_date'), 'hrm_advance_repayments', ['repayment_date'], unique=False)
    op.create_foreign_key(None, 'hrm_advance_repayments', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_advance_requests', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_advance_requests', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_advance_requests', 'request_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=30),
               existing_nullable=False)
    op.alter_column('hrm_advance_requests', 'requested_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=False)
    op.alter_column('hrm_advance_requests', 'approved_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_advance_requests', 'purpose',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'advance_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_advance_requests', 'request_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_advance_requests', 'needed_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_advance_requests', 'rejection_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'paid_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'repaid_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_advance_requests', 'remaining_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_advance_requests', 'repayment_method',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               nullable=False)
    op.alter_column('hrm_advance_requests', 'deduction_start_month',
               existing_type=sa.VARCHAR(length=10),
               type_=sqlmodel.sql.sqltypes.AutoString(length=7),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'monthly_deduction_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_advance_requests_id'), 'hrm_advance_requests', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_advance_requests_request_date'), 'hrm_advance_requests', ['request_date'], unique=False)
    op.create_index(op.f('ix_hrm_advance_requests_trip_id'), 'hrm_advance_requests', ['trip_id'], unique=False)
    op.create_foreign_key(None, 'hrm_advance_requests', 'trips', ['trip_id'], ['id'])
    op.create_foreign_key(None, 'hrm_advance_requests', 'users', ['paid_by'], ['id'])
    op.create_foreign_key(None, 'hrm_advance_requests', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_attendance_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_attendance_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_attendance_records', 'date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_attendance_records', 'check_in_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'check_out_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'late_minutes',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'early_leave_minutes',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'working_hours',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'overtime_hours',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'work_units',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=2),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'trip_ids_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'is_approved',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_attendance_records', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.drop_index(op.f('ix_hrm_attendance_tenant_date'), table_name='hrm_attendance_records')
    op.create_index(op.f('ix_hrm_attendance_records_id'), 'hrm_attendance_records', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_attendance_records_shift_id'), 'hrm_attendance_records', ['shift_id'], unique=False)
    op.create_foreign_key(None, 'hrm_attendance_records', 'users', ['approved_by'], ['id'])
    op.alter_column('hrm_branches', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_branches', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_branches', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_branches', 'is_headquarters',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_branches', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_branches', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_branches_id'), 'hrm_branches', ['id'], unique=False)
    op.alter_column('hrm_candidates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_candidates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_candidates', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'resume_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'cover_letter',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'portfolio_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'skills_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'languages_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'status',
               existing_type=sa.VARCHAR(length=30),
               nullable=False)
    op.alter_column('hrm_candidates', 'rejection_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_candidates_id'), 'hrm_candidates', ['id'], unique=False)
    op.alter_column('hrm_certificates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_certificates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_certificates', 'certificate_number',
               existing_type=sa.VARCHAR(length=100),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=False)
    op.alter_column('hrm_certificates', 'certificate_type',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=False)
    op.alter_column('hrm_certificates', 'issue_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_certificates', 'expiry_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'license_class',
               existing_type=sa.VARCHAR(length=20),
               type_=sqlmodel.sql.sqltypes.AutoString(length=10),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'file_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'alert_before_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_certificates', 'is_verified',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_certificates', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_certificates_expiry_date'), 'hrm_certificates', ['expiry_date'], unique=False)
    op.create_index(op.f('ix_hrm_certificates_id'), 'hrm_certificates', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_certificates_issue_date'), 'hrm_certificates', ['issue_date'], unique=False)
    op.create_index(op.f('ix_hrm_certificates_training_id'), 'hrm_certificates', ['training_id'], unique=False)
    op.create_foreign_key(None, 'hrm_certificates', 'users', ['verified_by'], ['id'])
    op.alter_column('hrm_contracts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_contracts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_contracts', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_contracts', 'sign_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_contracts', 'end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'basic_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_contracts', 'insurance_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'allowances_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'probation_salary_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_contracts', 'job_title',
               existing_type=sa.VARCHAR(length=255),
               type_=sqlmodel.sql.sqltypes.AutoString(length=100),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'job_description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'working_hours_per_day',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=1),
               nullable=False)
    op.alter_column('hrm_contracts', 'working_days_per_week',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=1),
               nullable=False)
    op.alter_column('hrm_contracts', 'termination_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'termination_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'contract_file_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'employee_signed_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'company_signed_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'expiry_alert_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_contracts', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_contracts_end_date'), 'hrm_contracts', ['end_date'], unique=False)
    op.create_index(op.f('ix_hrm_contracts_id'), 'hrm_contracts', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_contracts_previous_contract_id'), 'hrm_contracts', ['previous_contract_id'], unique=False)
    op.create_index(op.f('ix_hrm_contracts_start_date'), 'hrm_contracts', ['start_date'], unique=False)
    op.create_foreign_key(None, 'hrm_contracts', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_deductions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_deductions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_deductions', 'deduction_type',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=False)
    op.alter_column('hrm_deductions', 'description',
               existing_type=sa.VARCHAR(length=255),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=False)
    op.alter_column('hrm_deductions', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_deductions', 'remaining_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_deductions', 'monthly_deduction',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_deductions', 'start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_deductions', 'end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_deductions', 'interest_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_deductions', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_deductions', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_deductions_id'), 'hrm_deductions', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_deductions_is_active'), 'hrm_deductions', ['is_active'], unique=False)
    op.create_index(op.f('ix_hrm_deductions_start_date'), 'hrm_deductions', ['start_date'], unique=False)
    op.create_foreign_key(None, 'hrm_deductions', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_departments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_departments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_departments', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_departments', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_departments', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_departments_id'), 'hrm_departments', ['id'], unique=False)
    op.alter_column('hrm_employee_dependents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_dependents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_dependents', 'date_of_birth',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'id_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'tax_code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'deduction_from',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'deduction_to',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'document_type',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=100),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'document_number',
               existing_type=sa.VARCHAR(length=100),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_employee_dependents', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_employee_dependents_id'), 'hrm_employee_dependents', ['id'], unique=False)
    op.alter_column('hrm_employee_documents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_documents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_documents', 'document_number',
               existing_type=sa.VARCHAR(length=100),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'issue_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'expiry_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'file_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'alert_before_days',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_employee_documents', 'is_verified',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_employee_documents', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_employee_documents_expiry_date'), 'hrm_employee_documents', ['expiry_date'], unique=False)
    op.create_index(op.f('ix_hrm_employee_documents_id'), 'hrm_employee_documents', ['id'], unique=False)
    op.create_foreign_key(None, 'hrm_employee_documents', 'users', ['verified_by'], ['id'])
    op.alter_column('hrm_employee_evaluations', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_evaluations', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_evaluations', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_employee_evaluations', 'total_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_employee_evaluations', 'weighted_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_employee_evaluations', 'strengths',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'improvements',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'overall_comments',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'goals_next_period',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'employee_comments',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_employee_evaluations_id'), 'hrm_employee_evaluations', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_employee_evaluations_template_id'), 'hrm_employee_evaluations', ['template_id'], unique=False)
    op.alter_column('hrm_employee_final_scores', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_final_scores', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_final_scores', 'self_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'manager_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'peer_avg_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'subordinate_avg_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'final_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_employee_final_scores', 'salary_adjustment_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'bonus_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'promotion_recommended',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_employee_final_scores', 'training_recommended',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'review_comments',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.create_index(op.f('ix_hrm_employee_final_scores_id'), 'hrm_employee_final_scores', ['id'], unique=False)
    op.alter_column('hrm_employee_namecards', 'show_zalo',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('hrm_employee_namecards', 'show_facebook',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('hrm_employee_namecards', 'show_linkedin',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('hrm_employee_namecards', 'show_website',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('hrm_employee_salaries', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_salaries', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employee_salaries', 'effective_from',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_employee_salaries', 'effective_to',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'overrides_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=5000),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'trip_rate_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'is_current',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_employee_salaries', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_employee_salaries_effective_from'), 'hrm_employee_salaries', ['effective_from'], unique=False)
    op.create_index(op.f('ix_hrm_employee_salaries_effective_to'), 'hrm_employee_salaries', ['effective_to'], unique=False)
    op.create_index(op.f('ix_hrm_employee_salaries_id'), 'hrm_employee_salaries', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_employee_salaries_is_current'), 'hrm_employee_salaries', ['is_current'], unique=False)
    op.create_index(op.f('ix_hrm_employee_salaries_structure_id'), 'hrm_employee_salaries', ['structure_id'], unique=False)
    op.create_foreign_key(None, 'hrm_employee_salaries', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_employees', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employees', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_employees', 'date_of_birth',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'nationality',
               existing_type=sa.VARCHAR(length=50),
               nullable=False)
    op.alter_column('hrm_employees', 'phone',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'permanent_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'current_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'id_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'id_issue_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'id_expiry_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'tax_code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'employee_type',
               existing_type=sa.VARCHAR(length=20),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               nullable=False)
    op.alter_column('hrm_employees', 'status',
               existing_type=sa.VARCHAR(length=20),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               nullable=False)
    op.alter_column('hrm_employees', 'join_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'probation_end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'official_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'resign_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'resign_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'social_insurance_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'health_insurance_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'license_class',
               existing_type=sa.VARCHAR(length=20),
               type_=sqlmodel.sql.sqltypes.AutoString(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'license_expiry',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'health_check_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'health_check_expiry',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'avatar_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.drop_index(op.f('ix_hrm_employees_tenant_code'), table_name='hrm_employees')
    op.create_index(op.f('ix_hrm_employees_branch_id'), 'hrm_employees', ['branch_id'], unique=False)
    op.create_index(op.f('ix_hrm_employees_department_id'), 'hrm_employees', ['department_id'], unique=False)
    op.create_index(op.f('ix_hrm_employees_id'), 'hrm_employees', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_employees_join_date'), 'hrm_employees', ['join_date'], unique=False)
    op.create_index(op.f('ix_hrm_employees_manager_id'), 'hrm_employees', ['manager_id'], unique=False)
    op.create_index(op.f('ix_hrm_employees_position_id'), 'hrm_employees', ['position_id'], unique=False)
    op.create_index(op.f('ix_hrm_employees_resign_date'), 'hrm_employees', ['resign_date'], unique=False)
    op.create_index(op.f('ix_hrm_employees_team_id'), 'hrm_employees', ['team_id'], unique=False)
    op.create_index(op.f('ix_hrm_employees_work_shift_id'), 'hrm_employees', ['work_shift_id'], unique=False)
    op.create_foreign_key(None, 'hrm_employees', 'users', ['user_id'], ['id'])
    op.create_foreign_key(None, 'hrm_employees', 'drivers', ['driver_id'], ['id'])
    op.alter_column('hrm_evaluation_criteria', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'category',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'min_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=1),
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'max_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=1),
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'score_labels_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'target_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'target_unit',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.create_index(op.f('ix_hrm_evaluation_criteria_id'), 'hrm_evaluation_criteria', ['id'], unique=False)
    op.alter_column('hrm_evaluation_periods', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'name',
               existing_type=sa.VARCHAR(length=255),
               type_=sqlmodel.sql.sqltypes.AutoString(length=100),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'period_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'evaluation_start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'evaluation_end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'enable_self_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'enable_manager_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'enable_peer_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'enable_subordinate_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'self_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'manager_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'peer_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'subordinate_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_evaluation_periods', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_evaluation_periods_end_date'), 'hrm_evaluation_periods', ['end_date'], unique=False)
    op.create_index(op.f('ix_hrm_evaluation_periods_id'), 'hrm_evaluation_periods', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_evaluation_periods_start_date'), 'hrm_evaluation_periods', ['start_date'], unique=False)
    op.alter_column('hrm_evaluation_scores', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_scores', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_scores', 'score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_scores', 'weighted_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_evaluation_scores', 'actual_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'achievement_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=6, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'comments',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'evidence',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_evaluation_scores_id'), 'hrm_evaluation_scores', ['id'], unique=False)
    op.alter_column('hrm_evaluation_templates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_templates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_evaluation_templates', 'code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=30),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_templates', 'name',
               existing_type=sa.VARCHAR(length=255),
               type_=sqlmodel.sql.sqltypes.AutoString(length=100),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_templates', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_templates', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_evaluation_templates', 'is_default',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.create_index(op.f('ix_hrm_evaluation_templates_department_id'), 'hrm_evaluation_templates', ['department_id'], unique=False)
    op.create_index(op.f('ix_hrm_evaluation_templates_id'), 'hrm_evaluation_templates', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_evaluation_templates_is_active'), 'hrm_evaluation_templates', ['is_active'], unique=False)
    op.create_index(op.f('ix_hrm_evaluation_templates_position_id'), 'hrm_evaluation_templates', ['position_id'], unique=False)
    op.alter_column('hrm_insurance_contributions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'salary_base',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'employee_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'employer_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'is_paid',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_insurance_contributions', 'paid_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_insurance_contributions', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_insurance_contributions_id'), 'hrm_insurance_contributions', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_insurance_contributions_payroll_record_id'), 'hrm_insurance_contributions', ['payroll_record_id'], unique=False)
    op.alter_column('hrm_insurance_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_insurance_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_insurance_records', 'insurance_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=30),
               existing_nullable=False)
    op.alter_column('hrm_insurance_records', 'registered_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_records', 'start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_insurance_records', 'end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_insurance_records', 'employee_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_records', 'employer_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_insurance_records', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_insurance_records', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_insurance_records_id'), 'hrm_insurance_records', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_insurance_records_is_active'), 'hrm_insurance_records', ['is_active'], unique=False)
    op.create_index(op.f('ix_hrm_insurance_records_start_date'), 'hrm_insurance_records', ['start_date'], unique=False)
    op.alter_column('hrm_interviews', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_interviews', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_interviews', 'interview_round',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_interviews', 'interview_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_interviews', 'duration_minutes',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_interviews', 'meeting_link',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'interviewer_ids_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_interviews', 'result',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_interviews', 'strengths',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'weaknesses',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'overall_feedback',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'completed_at',
               existing_type=postgresql.TIMESTAMP(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_interviews_id'), 'hrm_interviews', ['id'], unique=False)
    op.alter_column('hrm_job_postings', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_job_postings', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_job_postings', 'job_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_job_postings', 'headcount',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_job_postings', 'salary_currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=False)
    op.alter_column('hrm_job_postings', 'show_salary',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_job_postings', 'is_remote',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_job_postings', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'requirements',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'benefits',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'skills_required',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'views_count',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_job_postings', 'applications_count',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_job_postings', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_job_postings', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_job_postings_id'), 'hrm_job_postings', ['id'], unique=False)
    op.alter_column('hrm_leave_approval_flows', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_approval_flows', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_approval_flows', 'min_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_approval_flows', 'max_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               existing_nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'approval_levels',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_leave_approval_flows', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_approval_flows', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_leave_approval_flows_department_id'), 'hrm_leave_approval_flows', ['department_id'], unique=False)
    op.create_index(op.f('ix_hrm_leave_approval_flows_id'), 'hrm_leave_approval_flows', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_leave_approval_flows_is_active'), 'hrm_leave_approval_flows', ['is_active'], unique=False)
    op.create_index(op.f('ix_hrm_leave_approval_flows_leave_type_id'), 'hrm_leave_approval_flows', ['leave_type_id'], unique=False)
    op.alter_column('hrm_leave_approvers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_approvers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_approvers', 'level',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_leave_approvers', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_leave_approvers', 'rejection_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_leave_approvers', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_leave_approvers_approver_id'), 'hrm_leave_approvers', ['approver_id'], unique=False)
    op.create_index(op.f('ix_hrm_leave_approvers_id'), 'hrm_leave_approvers', ['id'], unique=False)
    op.alter_column('hrm_leave_balances', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_balances', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_balances', 'entitled_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_balances', 'carried_forward_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_balances', 'used_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_balances', 'pending_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_balances', 'available_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_balances', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_leave_balances_id'), 'hrm_leave_balances', ['id'], unique=False)
    op.add_column('hrm_leave_requests', sa.Column('workflow_instance_id', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.alter_column('hrm_leave_requests', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_requests', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_requests', 'from_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_leave_requests', 'to_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_leave_requests', 'is_half_day',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_requests', 'total_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_requests', 'reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'attachment_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_leave_requests', 'handover_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'cancellation_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_leave_requests_from_date'), 'hrm_leave_requests', ['from_date'], unique=False)
    op.create_index(op.f('ix_hrm_leave_requests_handover_to_id'), 'hrm_leave_requests', ['handover_to_id'], unique=False)
    op.create_index(op.f('ix_hrm_leave_requests_id'), 'hrm_leave_requests', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_leave_requests_to_date'), 'hrm_leave_requests', ['to_date'], unique=False)
    op.create_index(op.f('ix_hrm_leave_requests_workflow_instance_id'), 'hrm_leave_requests', ['workflow_instance_id'], unique=False)
    op.create_foreign_key(None, 'hrm_leave_requests', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_leave_types', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_types', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_leave_types', 'is_paid',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'default_days_per_year',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_types', 'is_accrual',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'accrual_per_month',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=2),
               nullable=False)
    op.alter_column('hrm_leave_types', 'allow_carry_forward',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'max_carry_forward_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_types', 'allow_negative_balance',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'max_negative_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_leave_types', 'requires_approval',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'requires_attachment',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'min_tenure_months',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_leave_types', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_leave_types', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.create_index(op.f('ix_hrm_leave_types_id'), 'hrm_leave_types', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_leave_types_is_active'), 'hrm_leave_types', ['is_active'], unique=False)
    op.alter_column('hrm_overtime_requests', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_overtime_requests', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_overtime_requests', 'date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'start_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'end_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'hours',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'ot_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_overtime_requests', 'multiplier',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=2),
               nullable=False)
    op.alter_column('hrm_overtime_requests', 'reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_overtime_requests', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_overtime_requests', 'rejection_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_overtime_requests', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_overtime_requests_attendance_record_id'), 'hrm_overtime_requests', ['attendance_record_id'], unique=False)
    op.create_index(op.f('ix_hrm_overtime_requests_id'), 'hrm_overtime_requests', ['id'], unique=False)
    op.create_foreign_key(None, 'hrm_overtime_requests', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_payroll_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_payroll_items', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_payroll_items', 'component_type',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=False)
    op.alter_column('hrm_payroll_items', 'amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_items', 'calculation_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_payroll_items', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.create_index(op.f('ix_hrm_payroll_items_id'), 'hrm_payroll_items', ['id'], unique=False)
    op.alter_column('hrm_payroll_periods', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_payroll_periods', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_payroll_periods', 'start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_payroll_periods', 'end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_payroll_periods', 'attendance_cutoff_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_payroll_periods', 'payroll_run_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'payment_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_payroll_periods', 'total_working_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_payroll_periods', 'holidays_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_payroll_periods_id'), 'hrm_payroll_periods', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_payroll_periods_status'), 'hrm_payroll_periods', ['status'], unique=False)
    op.create_foreign_key(None, 'hrm_payroll_periods', 'users', ['locked_by'], ['id'])
    op.alter_column('hrm_payroll_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_payroll_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_payroll_records', 'working_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'leave_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'unpaid_leave_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'absent_days',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=1),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'late_count',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'early_leave_count',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'ot_hours_weekday',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=6, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'ot_hours_weekend',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=6, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'ot_hours_holiday',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=6, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'basic_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'prorated_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'allowances_total',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'overtime_total',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'bonus_total',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'commission_total',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'trip_income_total',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'gross_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'insurance_employee',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'advance_deduction',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'loan_deduction',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'penalty_deduction',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'other_deductions',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'total_deductions',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'net_salary',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'insurance_employer',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'total_cost',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_payroll_records', 'payment_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'earnings_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=10000),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'deductions_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=5000),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.drop_index(op.f('ix_hrm_payroll_tenant_period'), table_name='hrm_payroll_records')
    op.create_index(op.f('ix_hrm_payroll_records_employee_salary_id'), 'hrm_payroll_records', ['employee_salary_id'], unique=False)
    op.create_index(op.f('ix_hrm_payroll_records_id'), 'hrm_payroll_records', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_payroll_records_payment_status'), 'hrm_payroll_records', ['payment_status'], unique=False)
    op.create_foreign_key(None, 'hrm_payroll_records', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_positions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_positions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_positions', 'level',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_positions', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_positions', 'requirements',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('hrm_positions', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_positions', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.create_index(op.f('ix_hrm_positions_id'), 'hrm_positions', ['id'], unique=False)
    op.alter_column('hrm_salary_components', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_salary_components', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_salary_components', 'component_type',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               nullable=False)
    op.alter_column('hrm_salary_components', 'calculation_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_salary_components', 'default_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_salary_components', 'formula',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_salary_components', 'percent_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_salary_components', 'is_taxable',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_salary_components', 'is_insurance_base',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_salary_components', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_salary_components', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.create_index(op.f('ix_hrm_salary_components_id'), 'hrm_salary_components', ['id'], unique=False)
    op.alter_column('hrm_salary_structures', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_salary_structures', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_salary_structures', 'employee_type',
               existing_type=sa.VARCHAR(length=20),
               type_=sqlmodel.sql.sqltypes.AutoString(length=50),
               existing_nullable=True)
    op.alter_column('hrm_salary_structures', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_salary_structures', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_salary_structures', 'is_default',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.create_index(op.f('ix_hrm_salary_structures_department_id'), 'hrm_salary_structures', ['department_id'], unique=False)
    op.create_index(op.f('ix_hrm_salary_structures_id'), 'hrm_salary_structures', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_salary_structures_is_active'), 'hrm_salary_structures', ['is_active'], unique=False)
    op.create_index(op.f('ix_hrm_salary_structures_position_id'), 'hrm_salary_structures', ['position_id'], unique=False)
    op.alter_column('hrm_shift_assignments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_shift_assignments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_shift_assignments', 'effective_from',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_shift_assignments', 'effective_to',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_shift_assignments', 'working_days_json',
               existing_type=sa.VARCHAR(length=50),
               nullable=False)
    op.alter_column('hrm_shift_assignments', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_shift_assignments', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_shift_assignments_effective_from'), 'hrm_shift_assignments', ['effective_from'], unique=False)
    op.create_index(op.f('ix_hrm_shift_assignments_id'), 'hrm_shift_assignments', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_shift_assignments_is_active'), 'hrm_shift_assignments', ['is_active'], unique=False)
    op.create_index(op.f('ix_hrm_shift_assignments_shift_id'), 'hrm_shift_assignments', ['shift_id'], unique=False)
    op.alter_column('hrm_teams', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_teams', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_teams', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_teams', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_teams_id'), 'hrm_teams', ['id'], unique=False)
    op.alter_column('hrm_training_participants', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_training_participants', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_training_participants', 'enrolled_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=False)
    op.alter_column('hrm_training_participants', 'modules_completed',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_training_participants', 'progress_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_training_participants', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_training_participants', 'completion_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'attended_hours',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=6, scale=2),
               nullable=False)
    op.alter_column('hrm_training_participants', 'attendance_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_training_participants', 'feedback_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'feedback_comment',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_training_participants_certificate_id'), 'hrm_training_participants', ['certificate_id'], unique=False)
    op.create_index(op.f('ix_hrm_training_participants_id'), 'hrm_training_participants', ['id'], unique=False)
    op.create_foreign_key(None, 'hrm_training_participants', 'users', ['enrolled_by'], ['id'])
    op.alter_column('hrm_trainings', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_trainings', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_trainings', 'code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=30),
               existing_nullable=False)
    op.alter_column('hrm_trainings', 'training_type',
               existing_type=sa.VARCHAR(length=30),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               nullable=False)
    op.alter_column('hrm_trainings', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'objectives',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'content_outline',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=2000),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'start_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'end_date',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Date(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'duration_hours',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=6, scale=2),
               nullable=False)
    op.alter_column('hrm_trainings', 'format',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_trainings', 'course_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'total_modules',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_trainings', 'cost_per_person',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_trainings', 'total_budget',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_trainings', 'actual_cost',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=18, scale=2),
               nullable=False)
    op.alter_column('hrm_trainings', 'passing_score',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=5, scale=2),
               nullable=False)
    op.alter_column('hrm_trainings', 'is_mandatory',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_trainings', 'mandatory_for_departments',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'mandatory_for_positions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=False)
    op.alter_column('hrm_trainings', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=1000),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_trainings_end_date'), 'hrm_trainings', ['end_date'], unique=False)
    op.create_index(op.f('ix_hrm_trainings_id'), 'hrm_trainings', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_trainings_start_date'), 'hrm_trainings', ['start_date'], unique=False)
    op.create_foreign_key(None, 'hrm_trainings', 'users', ['created_by'], ['id'])
    op.alter_column('hrm_work_shifts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_work_shifts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('hrm_work_shifts', 'code',
               existing_type=sa.VARCHAR(length=50),
               type_=sqlmodel.sql.sqltypes.AutoString(length=20),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'name',
               existing_type=sa.VARCHAR(length=255),
               type_=sqlmodel.sql.sqltypes.AutoString(length=100),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'start_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'end_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'break_start',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'break_end',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'break_duration_minutes',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'working_hours',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=4, scale=2),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'late_grace_minutes',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'early_leave_grace_minutes',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'is_night_shift',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'night_shift_multiplier',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               type_=sa.Numeric(precision=3, scale=2),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'is_flexible',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'core_start_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'core_end_time',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Time(),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('hrm_work_shifts', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(length=500),
               existing_nullable=True)
    op.create_index(op.f('ix_hrm_work_shifts_id'), 'hrm_work_shifts', ['id'], unique=False)
    op.create_index(op.f('ix_hrm_work_shifts_is_active'), 'hrm_work_shifts', ['is_active'], unique=False)
    op.alter_column('invoice_items', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('invoice_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoice_items', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_invoice_items_id'), 'invoice_items', ['id'], unique=False)
    op.alter_column('invoices', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'subtotal',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'discount_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'amount_due',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('invoices', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('invoices', 'internal_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_invoices_id'), 'invoices', ['id'], unique=False)
    op.alter_column('location_aliases', 'language',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_location_aliases_id'), 'location_aliases', ['id'], unique=False)
    op.alter_column('locations', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.drop_index(op.f('idx_locations_district'), table_name='locations')
    op.drop_index(op.f('idx_locations_province'), table_name='locations')
    op.drop_index(op.f('idx_locations_ward'), table_name='locations')
    op.drop_index(op.f('ix_locations_tenant_active'), table_name='locations')
    op.create_index(op.f('ix_locations_district'), 'locations', ['district'], unique=False)
    op.create_index(op.f('ix_locations_is_active'), 'locations', ['is_active'], unique=False)
    op.create_index(op.f('ix_locations_province'), 'locations', ['province'], unique=False)
    op.create_index(op.f('ix_locations_ward'), 'locations', ['ward'], unique=False)
    op.alter_column('login_attempts', 'user_agent',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_login_attempts_id'), 'login_attempts', ['id'], unique=False)
    op.alter_column('maintenance_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('maintenance_items', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('maintenance_items', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('maintenance_items', 'quantity',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_maintenance_items_record_id'), table_name='maintenance_items')
    op.drop_index(op.f('idx_maintenance_items_tenant_id'), table_name='maintenance_items')
    op.create_index(op.f('ix_maintenance_items_id'), 'maintenance_items', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_items_record_id'), 'maintenance_items', ['record_id'], unique=False)
    op.create_index(op.f('ix_maintenance_items_tenant_id'), 'maintenance_items', ['tenant_id'], unique=False)
    op.drop_constraint(op.f('maintenance_items_record_id_fkey'), 'maintenance_items', type_='foreignkey')
    op.create_foreign_key(None, 'maintenance_items', 'maintenance_records', ['record_id'], ['id'])
    op.alter_column('maintenance_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('maintenance_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('maintenance_records', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('maintenance_records', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_maintenance_records_date'), table_name='maintenance_records')
    op.drop_index(op.f('idx_maintenance_records_schedule_id'), table_name='maintenance_records')
    op.drop_index(op.f('idx_maintenance_records_tenant_id'), table_name='maintenance_records')
    op.drop_index(op.f('idx_maintenance_records_type'), table_name='maintenance_records')
    op.drop_index(op.f('idx_maintenance_records_vehicle_id'), table_name='maintenance_records')
    op.create_index(op.f('ix_maintenance_records_id'), 'maintenance_records', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_records_maintenance_type'), 'maintenance_records', ['maintenance_type'], unique=False)
    op.create_index(op.f('ix_maintenance_records_schedule_id'), 'maintenance_records', ['schedule_id'], unique=False)
    op.create_index(op.f('ix_maintenance_records_service_date'), 'maintenance_records', ['service_date'], unique=False)
    op.create_index(op.f('ix_maintenance_records_tenant_id'), 'maintenance_records', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_maintenance_records_vehicle_id'), 'maintenance_records', ['vehicle_id'], unique=False)
    op.drop_constraint(op.f('maintenance_records_vehicle_id_fkey'), 'maintenance_records', type_='foreignkey')
    op.drop_constraint(op.f('maintenance_records_schedule_id_fkey'), 'maintenance_records', type_='foreignkey')
    op.create_foreign_key(None, 'maintenance_records', 'vehicles', ['vehicle_id'], ['id'])
    op.create_foreign_key(None, 'maintenance_records', 'maintenance_schedules', ['schedule_id'], ['id'])
    op.alter_column('maintenance_schedules', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('maintenance_schedules', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('maintenance_schedules', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('maintenance_schedules', 'alert_before_days',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=True)
    op.alter_column('maintenance_schedules', 'alert_before_km',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=True)
    op.alter_column('maintenance_schedules', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_maintenance_schedules_tenant_id'), table_name='maintenance_schedules')
    op.drop_index(op.f('idx_maintenance_schedules_type'), table_name='maintenance_schedules')
    op.drop_index(op.f('idx_maintenance_schedules_vehicle_id'), table_name='maintenance_schedules')
    op.create_index(op.f('ix_maintenance_schedules_id'), 'maintenance_schedules', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_schedules_maintenance_type'), 'maintenance_schedules', ['maintenance_type'], unique=False)
    op.create_index(op.f('ix_maintenance_schedules_tenant_id'), 'maintenance_schedules', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_maintenance_schedules_vehicle_id'), 'maintenance_schedules', ['vehicle_id'], unique=False)
    op.drop_constraint(op.f('maintenance_schedules_vehicle_id_fkey'), 'maintenance_schedules', type_='foreignkey')
    op.create_foreign_key(None, 'maintenance_schedules', 'vehicles', ['vehicle_id'], ['id'])
    op.alter_column('notification_preferences', 'in_app_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('notification_preferences', 'push_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('notification_preferences', 'email_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('notification_preferences', 'sms_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_notification_preferences_id'), 'notification_preferences', ['id'], unique=False)
    op.alter_column('notification_templates', 'language',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('notification_templates', 'title_template',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('notification_templates', 'message_template',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('notification_templates', 'email_html_template',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('notification_templates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_notification_templates_id'), 'notification_templates', ['id'], unique=False)
    op.alter_column('notifications', 'priority',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('notifications', 'message',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('notifications', 'is_read',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('notifications', 'action_url',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_notifications_id'), 'notifications', ['id'], unique=False)
    op.alter_column('order_assignments', 'segment_number',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('order_assignments', 'segment_from',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'segment_to',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('order_assignments', 'decline_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('order_assignments', 'driver_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_order_assignments_id'), 'order_assignments', ['id'], unique=False)
    op.alter_column('order_documents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('order_documents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('order_documents', 'uploaded_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('order_documents', 'note',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_order_documents_id'), 'order_documents', ['id'], unique=False)
    op.alter_column('order_status_history', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_order_status_history_id'), 'order_status_history', ['id'], unique=False)
    op.alter_column('order_status_logs', 'changed_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('order_status_logs', 'note',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('idx_order_status_logs_changed_at'), table_name='order_status_logs')
    op.drop_index(op.f('idx_order_status_logs_order_id'), table_name='order_status_logs')
    op.drop_index(op.f('idx_order_status_logs_to_status'), table_name='order_status_logs')
    op.create_index(op.f('ix_order_status_logs_changed_at'), 'order_status_logs', ['changed_at'], unique=False)
    op.create_index(op.f('ix_order_status_logs_id'), 'order_status_logs', ['id'], unique=False)
    op.create_index(op.f('ix_order_status_logs_order_id'), 'order_status_logs', ['order_id'], unique=False)
    op.create_index(op.f('ix_order_status_logs_tenant_id'), 'order_status_logs', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_order_status_logs_to_status'), 'order_status_logs', ['to_status'], unique=False)
    op.drop_constraint(op.f('order_status_logs_order_id_fkey'), 'order_status_logs', type_='foreignkey')
    op.create_foreign_key(None, 'order_status_logs', 'orders', ['order_id'], ['id'])
    op.drop_column('order_status_logs', 'created_at')
    op.drop_column('order_status_logs', 'updated_at')
    op.alter_column('orders', 'pickup_text',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('orders', 'delivery_text',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('orders', 'qty',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('orders', 'cargo_note',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('orders', 'empty_return_note',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('orders', 'reject_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('idx_orders_created_by_user'), table_name='orders')
    op.drop_index(op.f('idx_orders_delivery_site_id'), table_name='orders')
    op.drop_index(op.f('idx_orders_dispatcher'), table_name='orders')
    op.drop_index(op.f('idx_orders_driver'), table_name='orders')
    op.drop_index(op.f('idx_orders_pickup_site_id'), table_name='orders')
    op.drop_index(op.f('idx_orders_port_site_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_created_at'), table_name='orders')
    op.drop_index(op.f('ix_orders_sales_user_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_tenant_date'), table_name='orders')
    op.drop_index(op.f('ix_orders_tenant_status'), table_name='orders')
    op.create_index(op.f('ix_orders_created_by_user_id'), 'orders', ['created_by_user_id'], unique=False)
    op.create_index(op.f('ix_orders_delivery_location_id'), 'orders', ['delivery_location_id'], unique=False)
    op.create_index(op.f('ix_orders_delivery_site_id'), 'orders', ['delivery_site_id'], unique=False)
    op.create_index(op.f('ix_orders_dispatcher_id'), 'orders', ['dispatcher_id'], unique=False)
    op.create_index(op.f('ix_orders_pickup_location_id'), 'orders', ['pickup_location_id'], unique=False)
    op.create_index(op.f('ix_orders_pickup_site_id'), 'orders', ['pickup_site_id'], unique=False)
    op.create_index(op.f('ix_orders_port_site_id'), 'orders', ['port_site_id'], unique=False)
    op.drop_column('orders', 'sales_user_id')
    op.drop_column('orders', 'service_type')
    op.drop_column('orders', 'notes')
    op.drop_column('orders', 'incoterm')
    op.alter_column('payment_terms', 'payment_cycle',
               existing_type=sa.VARCHAR(length=30),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payment_terms', 'current_balance',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payment_terms', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payment_terms', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payment_terms', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_payment_terms_id'), 'payment_terms', ['id'], unique=False)
    op.alter_column('payments', 'payment_method',
               existing_type=sa.VARCHAR(length=30),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payments', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payments', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('payments', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('payments', 'receipt_image',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_payments_id'), 'payments', ['id'], unique=False)
    op.alter_column('push_tokens', 'token',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('push_tokens', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_push_tokens_id'), 'push_tokens', ['id'], unique=False)
    op.alter_column('rate_customers', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('rate_customers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('rate_customers', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_rate_customers_customer_id'), table_name='rate_customers')
    op.drop_index(op.f('idx_rate_customers_rate_id'), table_name='rate_customers')
    op.drop_index(op.f('idx_rate_customers_tenant_id'), table_name='rate_customers')
    op.drop_constraint(op.f('rate_customers_rate_id_customer_id_key'), 'rate_customers', type_='unique')
    op.create_index(op.f('ix_rate_customers_customer_id'), 'rate_customers', ['customer_id'], unique=False)
    op.create_index(op.f('ix_rate_customers_id'), 'rate_customers', ['id'], unique=False)
    op.create_index(op.f('ix_rate_customers_rate_id'), 'rate_customers', ['rate_id'], unique=False)
    op.create_index(op.f('ix_rate_customers_tenant_id'), 'rate_customers', ['tenant_id'], unique=False)
    op.drop_constraint(op.f('rate_customers_rate_id_fkey'), 'rate_customers', type_='foreignkey')
    op.drop_constraint(op.f('rate_customers_customer_id_fkey'), 'rate_customers', type_='foreignkey')
    op.create_foreign_key(None, 'rate_customers', 'customers', ['customer_id'], ['id'])
    op.create_foreign_key(None, 'rate_customers', 'rates', ['rate_id'], ['id'])
    op.alter_column('rates', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('rates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('rates', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('rates', 'pricing_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('rates', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_rates_delivery_location_id'), table_name='rates')
    op.drop_index(op.f('idx_rates_effective_date'), table_name='rates')
    op.drop_index(op.f('idx_rates_pickup_location_id'), table_name='rates')
    op.drop_index(op.f('idx_rates_pricing_type'), table_name='rates')
    op.drop_index(op.f('idx_rates_tenant_id'), table_name='rates')
    op.create_index(op.f('ix_rates_delivery_location_id'), 'rates', ['delivery_location_id'], unique=False)
    op.create_index(op.f('ix_rates_effective_date'), 'rates', ['effective_date'], unique=False)
    op.create_index(op.f('ix_rates_id'), 'rates', ['id'], unique=False)
    op.create_index(op.f('ix_rates_pickup_location_id'), 'rates', ['pickup_location_id'], unique=False)
    op.create_index(op.f('ix_rates_pricing_type'), 'rates', ['pricing_type'], unique=False)
    op.create_index(op.f('ix_rates_tenant_id'), 'rates', ['tenant_id'], unique=False)
    op.alter_column('role_permissions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('role_permissions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('role_permissions', 'permissions_json',
               existing_type=sa.TEXT(),
               server_default=None,
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('role_permissions', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('role_permissions', 'is_system',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.drop_index(op.f('idx_role_permissions_tenant_role'), table_name='role_permissions')
    op.create_index(op.f('ix_role_permissions_id'), 'role_permissions', ['id'], unique=False)
    op.create_index(op.f('ix_role_permissions_role'), 'role_permissions', ['role'], unique=False)
    op.create_index(op.f('ix_role_permissions_tenant_id'), 'role_permissions', ['tenant_id'], unique=False)
    op.alter_column('shipments', 'from_port',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('shipments', 'requires_empty_return',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('shipments', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               nullable=False)
    op.drop_index(op.f('uq_shipments_tenant_order'), table_name='shipments')
    op.drop_index(op.f('ux_shipments_order_id'), table_name='shipments')
    op.create_index(op.f('ix_shipments_from_port'), 'shipments', ['from_port'], unique=False)
    op.create_index(op.f('ix_shipments_status'), 'shipments', ['status'], unique=False)
    op.create_foreign_key(None, 'shipments', 'orders', ['order_id'], ['id'])
    op.alter_column('sites', 'created_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('sites', 'updated_at',
               existing_type=postgresql.TIMESTAMP(timezone=True),
               server_default=None,
               type_=sa.DateTime(),
               nullable=False)
    op.alter_column('sites', 'id',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('sites', 'site_type',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('sites', 'status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('idx_sites_code'), table_name='sites')
    op.drop_index(op.f('idx_sites_location_id'), table_name='sites')
    op.drop_index(op.f('idx_sites_site_type'), table_name='sites')
    op.drop_index(op.f('idx_sites_tenant_id'), table_name='sites')
    op.drop_index(op.f('ix_sites_tenant_status'), table_name='sites')
    op.create_index(op.f('ix_sites_code'), 'sites', ['code'], unique=False)
    op.create_index(op.f('ix_sites_id'), 'sites', ['id'], unique=False)
    op.create_index(op.f('ix_sites_site_type'), 'sites', ['site_type'], unique=False)
    op.create_index(op.f('ix_sites_tenant_id'), 'sites', ['tenant_id'], unique=False)
    op.alter_column('tenants', 'code',
               existing_type=sa.VARCHAR(length=50),
               nullable=False)
    op.alter_column('tenants', 'type',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('tenants', 'country',
               existing_type=sa.VARCHAR(length=100),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'subscription_plan',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'subscription_status',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'enabled_modules',
               existing_type=sa.TEXT(),
               server_default=None,
               type_=sqlmodel.sql.sqltypes.AutoString(),
               nullable=False)
    op.alter_column('tenants', 'timezone',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'locale',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'deployment_type',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               nullable=False)
    op.alter_column('tenants', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.create_index(op.f('ix_tenants_code'), 'tenants', ['code'], unique=True)
    op.create_index(op.f('ix_tenants_subscription_status'), 'tenants', ['subscription_status'], unique=False)
    op.create_index(op.f('ix_tenants_tax_code'), 'tenants', ['tax_code'], unique=False)
    op.alter_column('trips', 'shipment_id',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('trips', 'route_code',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_trips_route_code'), 'trips', ['route_code'], unique=False)
    op.alter_column('unified_locations', 'is_global',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_locations', 'type',
               existing_type=sa.VARCHAR(length=30),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_locations', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_locations', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_locations', 'country',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_locations', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_locations', 'directions',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_unified_locations_id'), 'unified_locations', ['id'], unique=False)
    op.alter_column('unified_order_sequences', 'prefix',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_order_sequences', 'last_seq',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_order_sequences', 'year',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_unified_order_sequences_id'), 'unified_order_sequences', ['id'], unique=False)
    op.alter_column('unified_orders', 'source_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'pickup_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'pickup_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'delivery_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'delivery_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'cargo_description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'is_hazardous',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'payment_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'driver_payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_orders', 'internal_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'driver_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'customer_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_unified_orders_owner_code'), table_name='unified_orders')
    op.drop_index(op.f('ix_unified_orders_owner_status'), table_name='unified_orders')
    op.create_index(op.f('ix_unified_orders_id'), 'unified_orders', ['id'], unique=False)
    op.alter_column('unified_rates', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_rates', 'base_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_rates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_rates', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_unified_rates_id'), 'unified_rates', ['id'], unique=False)
    op.alter_column('unified_vehicle_assignments', 'is_current',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_vehicle_assignments', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_unified_vehicle_assignments_id'), 'unified_vehicle_assignments', ['id'], unique=False)
    op.alter_column('unified_vehicles', 'ownership_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_vehicles', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('unified_vehicles', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_unified_vehicles_id'), 'unified_vehicles', ['id'], unique=False)
    op.alter_column('user_task_comments', 'content',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('user_task_comments', 'comment_type',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_task_comments', 'attachments_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_task_comments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_task_comments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_constraint(op.f('user_task_comments_task_id_fkey'), 'user_task_comments', type_='foreignkey')
    op.create_foreign_key(None, 'user_task_comments', 'user_tasks', ['task_id'], ['id'])
    op.alter_column('user_task_sequences', 'last_number',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.drop_constraint(op.f('uq_user_task_sequences_tenant_year'), 'user_task_sequences', type_='unique')
    op.alter_column('user_task_watchers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_constraint(op.f('uq_user_task_watchers_task_user'), 'user_task_watchers', type_='unique')
    op.drop_constraint(op.f('user_task_watchers_task_id_fkey'), 'user_task_watchers', type_='foreignkey')
    op.create_foreign_key(None, 'user_task_watchers', 'user_tasks', ['task_id'], ['id'])
    op.alter_column('user_tasks', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'task_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'scope',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'source',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'priority',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'assigned_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'watchers_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'is_overdue',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'result_data',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'result_note',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'attachments_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'actions_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'tags_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'comments_count',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tasks', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.drop_index(op.f('ix_user_tasks_due_date'), table_name='user_tasks')
    op.drop_index(op.f('ix_user_tasks_tenant_assigned'), table_name='user_tasks')
    op.drop_index(op.f('ix_user_tasks_tenant_status'), table_name='user_tasks')
    op.alter_column('users', 'full_name',
               existing_type=sa.VARCHAR(length=255),
               server_default=None,
               existing_nullable=True)
    op.alter_column('users', 'email',
               existing_type=sa.VARCHAR(length=255),
               server_default=None,
               existing_nullable=True)
    op.alter_column('users', 'phone',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               existing_nullable=True)
    op.alter_column('users', 'avatar_url',
               existing_type=sa.VARCHAR(length=500),
               server_default=None,
               existing_nullable=True)
    op.alter_column('users', 'system_role',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               nullable=False)
    op.alter_column('users', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               nullable=False)
    op.alter_column('users', 'last_login_at',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               existing_nullable=True)
    op.alter_column('users', 'failed_login_attempts',
               existing_type=sa.INTEGER(),
               server_default=None,
               nullable=False)
    op.alter_column('users', 'two_factor_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               nullable=False)
    op.alter_column('users', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('idx_users_email'), table_name='users')
    op.drop_index(op.f('idx_users_status'), table_name='users')
    op.drop_index(op.f('ix_users_phone'), table_name='users')
    op.drop_index(op.f('ix_users_tenant_status'), table_name='users')
    op.create_index(op.f('ix_users_status'), 'users', ['status'], unique=False)
    op.alter_column('vehicle_assignments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('vehicle_assignments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               nullable=False)
    op.alter_column('vehicle_assignments', 'assigned_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('vehicle_assignments', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('idx_vehicle_assignments_driver'), table_name='vehicle_assignments')
    op.drop_index(op.f('idx_vehicle_assignments_tenant'), table_name='vehicle_assignments')
    op.drop_index(op.f('idx_vehicle_assignments_vehicle'), table_name='vehicle_assignments')
    op.create_index(op.f('ix_vehicle_assignments_driver_id'), 'vehicle_assignments', ['driver_id'], unique=False)
    op.create_index(op.f('ix_vehicle_assignments_id'), 'vehicle_assignments', ['id'], unique=False)
    op.create_index(op.f('ix_vehicle_assignments_tenant_id'), 'vehicle_assignments', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_vehicle_assignments_vehicle_id'), 'vehicle_assignments', ['vehicle_id'], unique=False)
    op.drop_index(op.f('ix_vehicle_cost_allocations_period'), table_name='vehicle_cost_allocations')
    op.drop_index(op.f('ix_vehicle_cost_allocations_vehicle_period'), table_name='vehicle_cost_allocations')
    op.alter_column('vehicle_fuel_logs', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('vehicle_fuel_logs', 'station_address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('vehicle_fuel_logs', 'receipt_image',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('vehicle_fuel_logs', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_vehicle_fuel_logs_id'), 'vehicle_fuel_logs', ['id'], unique=False)
    op.alter_column('vehicle_gps', 'work_status',
               existing_type=sa.VARCHAR(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_vehicle_gps_current_order_id'), 'vehicle_gps', ['current_order_id'], unique=False)
    op.create_index(op.f('ix_vehicle_gps_current_trip_id'), 'vehicle_gps', ['current_trip_id'], unique=False)
    op.create_index(op.f('ix_vehicle_gps_id'), 'vehicle_gps', ['id'], unique=False)
    op.alter_column('vehicle_maintenance_logs', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=False)
    op.alter_column('vehicle_maintenance_logs', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('vehicle_maintenance_logs', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_vehicle_maintenance_logs_id'), 'vehicle_maintenance_logs', ['id'], unique=False)
    op.alter_column('vehicle_operating_costs', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('vehicle_operating_costs', 'attachments',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.drop_index(op.f('ix_vehicle_operating_costs_category'), table_name='vehicle_operating_costs')
    op.alter_column('vehicle_pairings', 'is_current',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('vehicle_pairings', 'notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_vehicle_pairings_id'), 'vehicle_pairings', ['id'], unique=False)
    op.drop_index(op.f('idx_vehicles_code'), table_name='vehicles')
    op.drop_index(op.f('idx_vehicles_type'), table_name='vehicles')
    op.drop_index(op.f('ix_vehicles_tenant_status'), table_name='vehicles')
    op.create_index(op.f('ix_vehicles_code'), 'vehicles', ['code'], unique=False)
    op.alter_column('wf_definitions', 'trigger_condition',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('wf_definitions', 'trigger_priority',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'initiated_by',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'message',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('worker_connections', 'decline_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('worker_connections', 'enable_payment_tracking',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_orders_completed',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_amount_pending',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_ratings',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_worker_connections_id'), 'worker_connections', ['id'], unique=False)
    op.alter_column('worker_tasks', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tasks', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tasks', 'role_used',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('worker_tasks', 'description',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('worker_tasks', 'status',
               existing_type=sa.VARCHAR(length=30),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tasks', 'worker_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('worker_tasks', 'company_notes',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_worker_tasks_id'), 'worker_tasks', ['id'], unique=False)
    op.alter_column('worker_tenant_access', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'role',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'permissions_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('worker_tenant_access', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'deactivated_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('worker_tenant_access', 'total_tasks_completed',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'total_ratings',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.drop_constraint(op.f('uq_worker_tenant_access'), 'worker_tenant_access', type_='unique')
    op.create_index(op.f('ix_worker_tenant_access_id'), 'worker_tenant_access', ['id'], unique=False)
    op.alter_column('workers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'bio',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workers', 'skills',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workers', 'country',
               existing_type=sa.VARCHAR(length=10),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'address',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workers', 'is_available',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'preferred_work_types',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workers', 'preferred_locations',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workers', 'status',
               existing_type=sa.VARCHAR(length=30),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'email_verified',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'phone_verified',
               existing_type=sa.BOOLEAN(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workers', 'failed_login_attempts',
               existing_type=sa.INTEGER(),
               server_default=None,
               existing_nullable=False)
    op.create_index(op.f('ix_workers_id'), 'workers', ['id'], unique=False)
    op.alter_column('workspace_invitations', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'role',
               existing_type=sa.VARCHAR(length=50),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'message',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workspace_invitations', 'permissions_json',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.alter_column('workspace_invitations', 'status',
               existing_type=sa.VARCHAR(length=30),
               server_default=None,
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'decline_reason',
               existing_type=sa.TEXT(),
               type_=sqlmodel.sql.sqltypes.AutoString(),
               existing_nullable=True)
    op.create_index(op.f('ix_workspace_invitations_id'), 'workspace_invitations', ['id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_workspace_invitations_id'), table_name='workspace_invitations')
    op.alter_column('workspace_invitations', 'decline_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workspace_invitations', 'status',
               existing_type=sa.VARCHAR(length=30),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'permissions_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workspace_invitations', 'message',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workspace_invitations', 'role',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'WORKER'::character varying"),
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('workspace_invitations', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index(op.f('ix_workers_id'), table_name='workers')
    op.alter_column('workers', 'failed_login_attempts',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('workers', 'phone_verified',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('workers', 'email_verified',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('workers', 'status',
               existing_type=sa.VARCHAR(length=30),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('workers', 'preferred_locations',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workers', 'preferred_work_types',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workers', 'is_available',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('workers', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workers', 'country',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VN'::character varying"),
               existing_nullable=False)
    op.alter_column('workers', 'skills',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workers', 'bio',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('workers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('workers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index(op.f('ix_worker_tenant_access_id'), table_name='worker_tenant_access')
    op.create_unique_constraint(op.f('uq_worker_tenant_access'), 'worker_tenant_access', ['worker_id', 'tenant_id'], postgresql_nulls_not_distinct=False)
    op.alter_column('worker_tenant_access', 'total_ratings',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'total_tasks_completed',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'deactivated_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_tenant_access', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'permissions_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_tenant_access', 'role',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'WORKER'::character varying"),
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('worker_tenant_access', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index(op.f('ix_worker_tasks_id'), table_name='worker_tasks')
    op.alter_column('worker_tasks', 'company_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_tasks', 'worker_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_tasks', 'status',
               existing_type=sa.VARCHAR(length=30),
               server_default=sa.text("'ASSIGNED'::character varying"),
               existing_nullable=False)
    op.alter_column('worker_tasks', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_tasks', 'role_used',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('worker_tasks', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('worker_tasks', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index(op.f('ix_worker_connections_id'), table_name='worker_connections')
    op.alter_column('worker_connections', 'total_ratings',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_amount_pending',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('worker_connections', 'total_orders_completed',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('worker_connections', 'enable_payment_tracking',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('worker_connections', 'decline_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_connections', 'message',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('worker_connections', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('worker_connections', 'initiated_by',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'DISPATCHER'::character varying"),
               existing_nullable=False)
    op.alter_column('wf_definitions', 'trigger_priority',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('wf_definitions', 'trigger_condition',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_index(op.f('ix_vehicles_code'), table_name='vehicles')
    op.create_index(op.f('ix_vehicles_tenant_status'), 'vehicles', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('idx_vehicles_type'), 'vehicles', ['type'], unique=False)
    op.create_index(op.f('idx_vehicles_code'), 'vehicles', ['code'], unique=False)
    op.drop_index(op.f('ix_vehicle_pairings_id'), table_name='vehicle_pairings')
    op.alter_column('vehicle_pairings', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_pairings', 'is_current',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.create_index(op.f('ix_vehicle_operating_costs_category'), 'vehicle_operating_costs', ['category'], unique=False)
    op.alter_column('vehicle_operating_costs', 'attachments',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_operating_costs', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_index(op.f('ix_vehicle_maintenance_logs_id'), table_name='vehicle_maintenance_logs')
    op.alter_column('vehicle_maintenance_logs', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_maintenance_logs', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('vehicle_maintenance_logs', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.drop_index(op.f('ix_vehicle_gps_id'), table_name='vehicle_gps')
    op.drop_index(op.f('ix_vehicle_gps_current_trip_id'), table_name='vehicle_gps')
    op.drop_index(op.f('ix_vehicle_gps_current_order_id'), table_name='vehicle_gps')
    op.alter_column('vehicle_gps', 'work_status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'available'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_vehicle_fuel_logs_id'), table_name='vehicle_fuel_logs')
    op.alter_column('vehicle_fuel_logs', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_fuel_logs', 'receipt_image',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_fuel_logs', 'station_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_fuel_logs', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.create_index(op.f('ix_vehicle_cost_allocations_vehicle_period'), 'vehicle_cost_allocations', ['tenant_id', 'vehicle_id', 'year', 'month'], unique=False)
    op.create_index(op.f('ix_vehicle_cost_allocations_period'), 'vehicle_cost_allocations', ['tenant_id', 'year', 'month'], unique=False)
    op.drop_index(op.f('ix_vehicle_assignments_vehicle_id'), table_name='vehicle_assignments')
    op.drop_index(op.f('ix_vehicle_assignments_tenant_id'), table_name='vehicle_assignments')
    op.drop_index(op.f('ix_vehicle_assignments_id'), table_name='vehicle_assignments')
    op.drop_index(op.f('ix_vehicle_assignments_driver_id'), table_name='vehicle_assignments')
    op.create_index(op.f('idx_vehicle_assignments_vehicle'), 'vehicle_assignments', ['vehicle_id'], unique=False)
    op.create_index(op.f('idx_vehicle_assignments_tenant'), 'vehicle_assignments', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_vehicle_assignments_driver'), 'vehicle_assignments', ['driver_id'], unique=False)
    op.alter_column('vehicle_assignments', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vehicle_assignments', 'assigned_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('vehicle_assignments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('vehicle_assignments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_users_status'), table_name='users')
    op.create_index(op.f('ix_users_tenant_status'), 'users', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('ix_users_phone'), 'users', ['phone'], unique=False)
    op.create_index(op.f('idx_users_status'), 'users', ['status'], unique=False)
    op.create_index(op.f('idx_users_email'), 'users', ['email'], unique=False)
    op.alter_column('users', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('users', 'two_factor_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('users', 'failed_login_attempts',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('users', 'last_login_at',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text('NULL::character varying'),
               existing_nullable=True)
    op.alter_column('users', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'ACTIVE'::character varying"),
               nullable=True)
    op.alter_column('users', 'system_role',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'USER'::character varying"),
               nullable=True)
    op.alter_column('users', 'avatar_url',
               existing_type=sa.VARCHAR(length=500),
               server_default=sa.text('NULL::character varying'),
               existing_nullable=True)
    op.alter_column('users', 'phone',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text('NULL::character varying'),
               existing_nullable=True)
    op.alter_column('users', 'email',
               existing_type=sa.VARCHAR(length=255),
               server_default=sa.text('NULL::character varying'),
               existing_nullable=True)
    op.alter_column('users', 'full_name',
               existing_type=sa.VARCHAR(length=255),
               server_default=sa.text('NULL::character varying'),
               existing_nullable=True)
    op.create_index(op.f('ix_user_tasks_tenant_status'), 'user_tasks', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('ix_user_tasks_tenant_assigned'), 'user_tasks', ['tenant_id', 'assigned_to_id'], unique=False)
    op.create_index(op.f('ix_user_tasks_due_date'), 'user_tasks', ['due_date'], unique=False)
    op.alter_column('user_tasks', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('user_tasks', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('user_tasks', 'comments_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('user_tasks', 'tags_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'actions_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'attachments_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'result_note',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'result_data',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'is_overdue',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('user_tasks', 'watchers_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_tasks', 'assigned_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('user_tasks', 'priority',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'NORMAL'::character varying"),
               existing_nullable=False)
    op.alter_column('user_tasks', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('user_tasks', 'source',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'MANUAL'::character varying"),
               existing_nullable=False)
    op.alter_column('user_tasks', 'scope',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'COMPANY'::character varying"),
               existing_nullable=False)
    op.alter_column('user_tasks', 'task_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'ACTION'::character varying"),
               existing_nullable=False)
    op.alter_column('user_tasks', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_constraint(None, 'user_task_watchers', type_='foreignkey')
    op.create_foreign_key(op.f('user_task_watchers_task_id_fkey'), 'user_task_watchers', 'user_tasks', ['task_id'], ['id'], ondelete='CASCADE')
    op.create_unique_constraint(op.f('uq_user_task_watchers_task_user'), 'user_task_watchers', ['task_id', 'user_id'], postgresql_nulls_not_distinct=False)
    op.alter_column('user_task_watchers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_unique_constraint(op.f('uq_user_task_sequences_tenant_year'), 'user_task_sequences', ['tenant_id', 'year'], postgresql_nulls_not_distinct=False)
    op.alter_column('user_task_sequences', 'last_number',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.drop_constraint(None, 'user_task_comments', type_='foreignkey')
    op.create_foreign_key(op.f('user_task_comments_task_id_fkey'), 'user_task_comments', 'user_tasks', ['task_id'], ['id'], ondelete='CASCADE')
    op.alter_column('user_task_comments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('user_task_comments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('user_task_comments', 'attachments_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('user_task_comments', 'comment_type',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'COMMENT'::character varying"),
               existing_nullable=False)
    op.alter_column('user_task_comments', 'content',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.drop_index(op.f('ix_unified_vehicles_id'), table_name='unified_vehicles')
    op.alter_column('unified_vehicles', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_vehicles', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_vehicles', 'ownership_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'COMPANY'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_unified_vehicle_assignments_id'), table_name='unified_vehicle_assignments')
    op.alter_column('unified_vehicle_assignments', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_vehicle_assignments', 'is_current',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.drop_index(op.f('ix_unified_rates_id'), table_name='unified_rates')
    op.alter_column('unified_rates', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_rates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('unified_rates', 'base_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('unified_rates', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_unified_orders_id'), table_name='unified_orders')
    op.create_index(op.f('ix_unified_orders_owner_status'), 'unified_orders', ['owner_actor_id', 'status'], unique=False)
    op.create_index(op.f('ix_unified_orders_owner_code'), 'unified_orders', ['owner_actor_id', 'order_code'], unique=False)
    op.alter_column('unified_orders', 'customer_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'driver_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'internal_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'driver_payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_orders', 'payment_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('unified_orders', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_orders', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_orders', 'is_hazardous',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('unified_orders', 'cargo_description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'delivery_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'delivery_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'pickup_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'pickup_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_orders', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'DRAFT'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_orders', 'source_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'TENANT'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_unified_order_sequences_id'), table_name='unified_order_sequences')
    op.alter_column('unified_order_sequences', 'year',
               existing_type=sa.INTEGER(),
               server_default=sa.text('2026'),
               existing_nullable=False)
    op.alter_column('unified_order_sequences', 'last_seq',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('unified_order_sequences', 'prefix',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'ORD'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_unified_locations_id'), table_name='unified_locations')
    op.alter_column('unified_locations', 'directions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_locations', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_locations', 'country',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VN'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_locations', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('unified_locations', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_locations', 'type',
               existing_type=sa.VARCHAR(length=30),
               server_default=sa.text("'OTHER'::character varying"),
               existing_nullable=False)
    op.alter_column('unified_locations', 'is_global',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.drop_index(op.f('ix_trips_route_code'), table_name='trips')
    op.alter_column('trips', 'route_code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('trips', 'shipment_id',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.drop_index(op.f('ix_tenants_tax_code'), table_name='tenants')
    op.drop_index(op.f('ix_tenants_subscription_status'), table_name='tenants')
    op.drop_index(op.f('ix_tenants_code'), table_name='tenants')
    op.alter_column('tenants', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               nullable=True)
    op.alter_column('tenants', 'deployment_type',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'CLOUD'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'locale',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'vi-VN'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'timezone',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'Asia/Ho_Chi_Minh'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'enabled_modules',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               server_default=sa.text('\'["tms"]\'::text'),
               type_=sa.TEXT(),
               nullable=True)
    op.alter_column('tenants', 'subscription_status',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'ACTIVE'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'subscription_plan',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'FREE'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'country',
               existing_type=sa.VARCHAR(length=100),
               server_default=sa.text("'VN'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('tenants', 'type',
               existing_type=sa.VARCHAR(length=50),
               server_default=sa.text("'CARRIER'::character varying"),
               nullable=True)
    op.alter_column('tenants', 'code',
               existing_type=sa.VARCHAR(length=50),
               nullable=True)
    op.drop_index(op.f('ix_sites_tenant_id'), table_name='sites')
    op.drop_index(op.f('ix_sites_site_type'), table_name='sites')
    op.drop_index(op.f('ix_sites_id'), table_name='sites')
    op.drop_index(op.f('ix_sites_code'), table_name='sites')
    op.create_index(op.f('ix_sites_tenant_status'), 'sites', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('idx_sites_tenant_id'), 'sites', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_sites_site_type'), 'sites', ['site_type'], unique=False)
    op.create_index(op.f('idx_sites_location_id'), 'sites', ['location_id'], unique=False)
    op.create_index(op.f('idx_sites_code'), 'sites', ['code'], unique=False)
    op.alter_column('sites', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('sites', 'site_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'CUSTOMER'::character varying"),
               existing_nullable=False)
    op.alter_column('sites', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('sites', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('sites', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_constraint(None, 'shipments', type_='foreignkey')
    op.drop_index(op.f('ix_shipments_status'), table_name='shipments')
    op.drop_index(op.f('ix_shipments_from_port'), table_name='shipments')
    op.create_index(op.f('ux_shipments_order_id'), 'shipments', ['order_id'], unique=True)
    op.create_index(op.f('uq_shipments_tenant_order'), 'shipments', ['tenant_id', 'order_id'], unique=True)
    op.alter_column('shipments', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'pending'::character varying"),
               nullable=True)
    op.alter_column('shipments', 'requires_empty_return',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('shipments', 'from_port',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.drop_index(op.f('ix_role_permissions_tenant_id'), table_name='role_permissions')
    op.drop_index(op.f('ix_role_permissions_role'), table_name='role_permissions')
    op.drop_index(op.f('ix_role_permissions_id'), table_name='role_permissions')
    op.create_index(op.f('idx_role_permissions_tenant_role'), 'role_permissions', ['tenant_id', 'role'], unique=False)
    op.alter_column('role_permissions', 'is_system',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('role_permissions', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('role_permissions', 'permissions_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               server_default=sa.text("'{}'::text"),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('role_permissions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('role_permissions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.drop_index(op.f('ix_rates_tenant_id'), table_name='rates')
    op.drop_index(op.f('ix_rates_pricing_type'), table_name='rates')
    op.drop_index(op.f('ix_rates_pickup_location_id'), table_name='rates')
    op.drop_index(op.f('ix_rates_id'), table_name='rates')
    op.drop_index(op.f('ix_rates_effective_date'), table_name='rates')
    op.drop_index(op.f('ix_rates_delivery_location_id'), table_name='rates')
    op.create_index(op.f('idx_rates_tenant_id'), 'rates', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_rates_pricing_type'), 'rates', ['pricing_type'], unique=False)
    op.create_index(op.f('idx_rates_pickup_location_id'), 'rates', ['pickup_location_id'], unique=False)
    op.create_index(op.f('idx_rates_effective_date'), 'rates', ['effective_date'], unique=False)
    op.create_index(op.f('idx_rates_delivery_location_id'), 'rates', ['delivery_location_id'], unique=False)
    op.alter_column('rates', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('rates', 'pricing_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'CONTAINER'::character varying"),
               existing_nullable=False)
    op.alter_column('rates', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('rates', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('rates', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_constraint(None, 'rate_customers', type_='foreignkey')
    op.drop_constraint(None, 'rate_customers', type_='foreignkey')
    op.create_foreign_key(op.f('rate_customers_customer_id_fkey'), 'rate_customers', 'customers', ['customer_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key(op.f('rate_customers_rate_id_fkey'), 'rate_customers', 'rates', ['rate_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_rate_customers_tenant_id'), table_name='rate_customers')
    op.drop_index(op.f('ix_rate_customers_rate_id'), table_name='rate_customers')
    op.drop_index(op.f('ix_rate_customers_id'), table_name='rate_customers')
    op.drop_index(op.f('ix_rate_customers_customer_id'), table_name='rate_customers')
    op.create_unique_constraint(op.f('rate_customers_rate_id_customer_id_key'), 'rate_customers', ['rate_id', 'customer_id'], postgresql_nulls_not_distinct=False)
    op.create_index(op.f('idx_rate_customers_tenant_id'), 'rate_customers', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_rate_customers_rate_id'), 'rate_customers', ['rate_id'], unique=False)
    op.create_index(op.f('idx_rate_customers_customer_id'), 'rate_customers', ['customer_id'], unique=False)
    op.alter_column('rate_customers', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('rate_customers', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('rate_customers', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_index(op.f('ix_push_tokens_id'), table_name='push_tokens')
    op.alter_column('push_tokens', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('push_tokens', 'token',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.drop_index(op.f('ix_payments_id'), table_name='payments')
    op.alter_column('payments', 'receipt_image',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payments', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payments', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'COMPLETED'::character varying"),
               existing_nullable=False)
    op.alter_column('payments', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('payments', 'payment_method',
               existing_type=sa.VARCHAR(length=30),
               server_default=sa.text("'BANK_TRANSFER'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_payment_terms_id'), table_name='payment_terms')
    op.alter_column('payment_terms', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payment_terms', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('payment_terms', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('payment_terms', 'current_balance',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('payment_terms', 'payment_cycle',
               existing_type=sa.VARCHAR(length=30),
               server_default=sa.text("'ON_DELIVERY'::character varying"),
               existing_nullable=False)
    op.add_column('orders', sa.Column('incoterm', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('orders', sa.Column('notes', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('orders', sa.Column('service_type', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('orders', sa.Column('sales_user_id', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_orders_port_site_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_pickup_site_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_pickup_location_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_dispatcher_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_delivery_site_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_delivery_location_id'), table_name='orders')
    op.drop_index(op.f('ix_orders_created_by_user_id'), table_name='orders')
    op.create_index(op.f('ix_orders_tenant_status'), 'orders', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('ix_orders_tenant_date'), 'orders', ['tenant_id', 'order_date'], unique=False)
    op.create_index(op.f('ix_orders_sales_user_id'), 'orders', ['sales_user_id'], unique=False)
    op.create_index(op.f('ix_orders_created_at'), 'orders', ['created_at'], unique=False)
    op.create_index(op.f('idx_orders_port_site_id'), 'orders', ['port_site_id'], unique=False)
    op.create_index(op.f('idx_orders_pickup_site_id'), 'orders', ['pickup_site_id'], unique=False)
    op.create_index(op.f('idx_orders_driver'), 'orders', ['driver_id'], unique=False)
    op.create_index(op.f('idx_orders_dispatcher'), 'orders', ['dispatcher_id'], unique=False)
    op.create_index(op.f('idx_orders_delivery_site_id'), 'orders', ['delivery_site_id'], unique=False)
    op.create_index(op.f('idx_orders_created_by_user'), 'orders', ['created_by_user_id'], unique=False)
    op.alter_column('orders', 'reject_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('orders', 'empty_return_note',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('orders', 'cargo_note',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('orders', 'qty',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               nullable=True)
    op.alter_column('orders', 'delivery_text',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('orders', 'pickup_text',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.add_column('order_status_logs', sa.Column('updated_at', postgresql.TIMESTAMP(), server_default=sa.text('CURRENT_TIMESTAMP'), autoincrement=False, nullable=True))
    op.add_column('order_status_logs', sa.Column('created_at', postgresql.TIMESTAMP(), server_default=sa.text('CURRENT_TIMESTAMP'), autoincrement=False, nullable=True))
    op.drop_constraint(None, 'order_status_logs', type_='foreignkey')
    op.create_foreign_key(op.f('order_status_logs_order_id_fkey'), 'order_status_logs', 'orders', ['order_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_order_status_logs_to_status'), table_name='order_status_logs')
    op.drop_index(op.f('ix_order_status_logs_tenant_id'), table_name='order_status_logs')
    op.drop_index(op.f('ix_order_status_logs_order_id'), table_name='order_status_logs')
    op.drop_index(op.f('ix_order_status_logs_id'), table_name='order_status_logs')
    op.drop_index(op.f('ix_order_status_logs_changed_at'), table_name='order_status_logs')
    op.create_index(op.f('idx_order_status_logs_to_status'), 'order_status_logs', ['to_status'], unique=False)
    op.create_index(op.f('idx_order_status_logs_order_id'), 'order_status_logs', ['order_id'], unique=False)
    op.create_index(op.f('idx_order_status_logs_changed_at'), 'order_status_logs', ['changed_at'], unique=False)
    op.alter_column('order_status_logs', 'note',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_status_logs', 'changed_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.drop_index(op.f('ix_order_status_history_id'), table_name='order_status_history')
    op.alter_column('order_status_history', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_index(op.f('ix_order_documents_id'), table_name='order_documents')
    op.alter_column('order_documents', 'note',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_documents', 'uploaded_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               existing_nullable=False)
    op.alter_column('order_documents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.alter_column('order_documents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.drop_index(op.f('ix_order_assignments_id'), table_name='order_assignments')
    op.alter_column('order_assignments', 'driver_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('order_assignments', 'decline_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('order_assignments', 'segment_to',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'segment_from',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_assignments', 'segment_number',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.drop_index(op.f('ix_notifications_id'), table_name='notifications')
    op.alter_column('notifications', 'action_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('notifications', 'is_read',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('notifications', 'message',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('notifications', 'priority',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'NORMAL'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_notification_templates_id'), table_name='notification_templates')
    op.alter_column('notification_templates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('notification_templates', 'email_html_template',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('notification_templates', 'message_template',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('notification_templates', 'title_template',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('notification_templates', 'language',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'vi'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_notification_preferences_id'), table_name='notification_preferences')
    op.alter_column('notification_preferences', 'sms_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('notification_preferences', 'email_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('notification_preferences', 'push_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('notification_preferences', 'in_app_enabled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.drop_constraint(None, 'maintenance_schedules', type_='foreignkey')
    op.create_foreign_key(op.f('maintenance_schedules_vehicle_id_fkey'), 'maintenance_schedules', 'vehicles', ['vehicle_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_maintenance_schedules_vehicle_id'), table_name='maintenance_schedules')
    op.drop_index(op.f('ix_maintenance_schedules_tenant_id'), table_name='maintenance_schedules')
    op.drop_index(op.f('ix_maintenance_schedules_maintenance_type'), table_name='maintenance_schedules')
    op.drop_index(op.f('ix_maintenance_schedules_id'), table_name='maintenance_schedules')
    op.create_index(op.f('idx_maintenance_schedules_vehicle_id'), 'maintenance_schedules', ['vehicle_id'], unique=False)
    op.create_index(op.f('idx_maintenance_schedules_type'), 'maintenance_schedules', ['maintenance_type'], unique=False)
    op.create_index(op.f('idx_maintenance_schedules_tenant_id'), 'maintenance_schedules', ['tenant_id'], unique=False)
    op.alter_column('maintenance_schedules', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('maintenance_schedules', 'alert_before_km',
               existing_type=sa.INTEGER(),
               server_default=sa.text('500'),
               existing_nullable=True)
    op.alter_column('maintenance_schedules', 'alert_before_days',
               existing_type=sa.INTEGER(),
               server_default=sa.text('7'),
               existing_nullable=True)
    op.alter_column('maintenance_schedules', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('maintenance_schedules', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('maintenance_schedules', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_constraint(None, 'maintenance_records', type_='foreignkey')
    op.drop_constraint(None, 'maintenance_records', type_='foreignkey')
    op.create_foreign_key(op.f('maintenance_records_schedule_id_fkey'), 'maintenance_records', 'maintenance_schedules', ['schedule_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key(op.f('maintenance_records_vehicle_id_fkey'), 'maintenance_records', 'vehicles', ['vehicle_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_maintenance_records_vehicle_id'), table_name='maintenance_records')
    op.drop_index(op.f('ix_maintenance_records_tenant_id'), table_name='maintenance_records')
    op.drop_index(op.f('ix_maintenance_records_service_date'), table_name='maintenance_records')
    op.drop_index(op.f('ix_maintenance_records_schedule_id'), table_name='maintenance_records')
    op.drop_index(op.f('ix_maintenance_records_maintenance_type'), table_name='maintenance_records')
    op.drop_index(op.f('ix_maintenance_records_id'), table_name='maintenance_records')
    op.create_index(op.f('idx_maintenance_records_vehicle_id'), 'maintenance_records', ['vehicle_id'], unique=False)
    op.create_index(op.f('idx_maintenance_records_type'), 'maintenance_records', ['maintenance_type'], unique=False)
    op.create_index(op.f('idx_maintenance_records_tenant_id'), 'maintenance_records', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_maintenance_records_schedule_id'), 'maintenance_records', ['schedule_id'], unique=False)
    op.create_index(op.f('idx_maintenance_records_date'), 'maintenance_records', ['service_date'], unique=False)
    op.alter_column('maintenance_records', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'COMPLETED'::character varying"),
               existing_nullable=False)
    op.alter_column('maintenance_records', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('maintenance_records', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('maintenance_records', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_constraint(None, 'maintenance_items', type_='foreignkey')
    op.create_foreign_key(op.f('maintenance_items_record_id_fkey'), 'maintenance_items', 'maintenance_records', ['record_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_maintenance_items_tenant_id'), table_name='maintenance_items')
    op.drop_index(op.f('ix_maintenance_items_record_id'), table_name='maintenance_items')
    op.drop_index(op.f('ix_maintenance_items_id'), table_name='maintenance_items')
    op.create_index(op.f('idx_maintenance_items_tenant_id'), 'maintenance_items', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_maintenance_items_record_id'), 'maintenance_items', ['record_id'], unique=False)
    op.alter_column('maintenance_items', 'quantity',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.alter_column('maintenance_items', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('maintenance_items', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('maintenance_items', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_index(op.f('ix_login_attempts_id'), table_name='login_attempts')
    op.alter_column('login_attempts', 'user_agent',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_index(op.f('ix_locations_ward'), table_name='locations')
    op.drop_index(op.f('ix_locations_province'), table_name='locations')
    op.drop_index(op.f('ix_locations_is_active'), table_name='locations')
    op.drop_index(op.f('ix_locations_district'), table_name='locations')
    op.create_index(op.f('ix_locations_tenant_active'), 'locations', ['tenant_id', 'is_active'], unique=False)
    op.create_index(op.f('idx_locations_ward'), 'locations', ['ward'], unique=False)
    op.create_index(op.f('idx_locations_province'), 'locations', ['province'], unique=False)
    op.create_index(op.f('idx_locations_district'), 'locations', ['district'], unique=False)
    op.alter_column('locations', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               nullable=True)
    op.drop_index(op.f('ix_location_aliases_id'), table_name='location_aliases')
    op.alter_column('location_aliases', 'language',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'vi'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_invoices_id'), table_name='invoices')
    op.alter_column('invoices', 'internal_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('invoices', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('invoices', 'amount_due',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('invoices', 'amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('invoices', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('invoices', 'discount_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('invoices', 'tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('invoices', 'subtotal',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('invoices', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('invoices', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'DRAFT'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_invoice_items_id'), table_name='invoice_items')
    op.alter_column('invoice_items', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('invoice_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'1'::double precision"),
               existing_nullable=False)
    op.alter_column('invoice_items', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.drop_index(op.f('ix_hrm_work_shifts_is_active'), table_name='hrm_work_shifts')
    op.drop_index(op.f('ix_hrm_work_shifts_id'), table_name='hrm_work_shifts')
    op.alter_column('hrm_work_shifts', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'core_end_time',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'core_start_time',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'is_flexible',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'night_shift_multiplier',
               existing_type=sa.Numeric(precision=3, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'is_night_shift',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'early_leave_grace_minutes',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'late_grace_minutes',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'working_hours',
               existing_type=sa.Numeric(precision=4, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'break_duration_minutes',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'break_end',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'break_start',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_work_shifts', 'end_time',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'start_time',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'name',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=100),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_work_shifts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_work_shifts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_trainings', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_trainings_start_date'), table_name='hrm_trainings')
    op.drop_index(op.f('ix_hrm_trainings_id'), table_name='hrm_trainings')
    op.drop_index(op.f('ix_hrm_trainings_end_date'), table_name='hrm_trainings')
    op.alter_column('hrm_trainings', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_trainings', 'mandatory_for_positions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'mandatory_for_departments',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'is_mandatory',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_trainings', 'passing_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_trainings', 'actual_cost',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_trainings', 'total_budget',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_trainings', 'cost_per_person',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_trainings', 'total_modules',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_trainings', 'course_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'format',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_trainings', 'duration_hours',
               existing_type=sa.Numeric(precision=6, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_trainings', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'content_outline',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'objectives',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_trainings', 'training_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=30),
               nullable=True)
    op.alter_column('hrm_trainings', 'code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=30),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_trainings', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_trainings', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_training_participants', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_training_participants_id'), table_name='hrm_training_participants')
    op.drop_index(op.f('ix_hrm_training_participants_certificate_id'), table_name='hrm_training_participants')
    op.alter_column('hrm_training_participants', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'feedback_comment',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'feedback_score',
               existing_type=sa.Integer(),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'attendance_percent',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_training_participants', 'attended_hours',
               existing_type=sa.Numeric(precision=6, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_training_participants', 'score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'completion_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_training_participants', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_training_participants', 'progress_percent',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_training_participants', 'modules_completed',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_training_participants', 'enrolled_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_training_participants', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_training_participants', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_teams_id'), table_name='hrm_teams')
    op.alter_column('hrm_teams', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_teams', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_teams', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_teams', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_shift_assignments_shift_id'), table_name='hrm_shift_assignments')
    op.drop_index(op.f('ix_hrm_shift_assignments_is_active'), table_name='hrm_shift_assignments')
    op.drop_index(op.f('ix_hrm_shift_assignments_id'), table_name='hrm_shift_assignments')
    op.drop_index(op.f('ix_hrm_shift_assignments_effective_from'), table_name='hrm_shift_assignments')
    op.alter_column('hrm_shift_assignments', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_shift_assignments', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_shift_assignments', 'working_days_json',
               existing_type=sa.VARCHAR(length=50),
               nullable=True)
    op.alter_column('hrm_shift_assignments', 'effective_to',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_shift_assignments', 'effective_from',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_shift_assignments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_shift_assignments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_salary_structures_position_id'), table_name='hrm_salary_structures')
    op.drop_index(op.f('ix_hrm_salary_structures_is_active'), table_name='hrm_salary_structures')
    op.drop_index(op.f('ix_hrm_salary_structures_id'), table_name='hrm_salary_structures')
    op.drop_index(op.f('ix_hrm_salary_structures_department_id'), table_name='hrm_salary_structures')
    op.alter_column('hrm_salary_structures', 'is_default',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_salary_structures', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_salary_structures', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_salary_structures', 'employee_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('hrm_salary_structures', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_salary_structures', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_salary_components_id'), table_name='hrm_salary_components')
    op.alter_column('hrm_salary_components', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_salary_components', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_salary_components', 'is_insurance_base',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_salary_components', 'is_taxable',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_salary_components', 'percent_value',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_salary_components', 'formula',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_salary_components', 'default_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_salary_components', 'calculation_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_salary_components', 'component_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=30),
               nullable=True)
    op.alter_column('hrm_salary_components', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_salary_components', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_positions_id'), table_name='hrm_positions')
    op.alter_column('hrm_positions', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_positions', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_positions', 'requirements',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_positions', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_positions', 'level',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_positions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_positions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_payroll_records', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_payroll_records_payment_status'), table_name='hrm_payroll_records')
    op.drop_index(op.f('ix_hrm_payroll_records_id'), table_name='hrm_payroll_records')
    op.drop_index(op.f('ix_hrm_payroll_records_employee_salary_id'), table_name='hrm_payroll_records')
    op.create_index(op.f('ix_hrm_payroll_tenant_period'), 'hrm_payroll_records', ['tenant_id', 'payroll_period_id'], unique=False)
    op.alter_column('hrm_payroll_records', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'deductions_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=5000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'earnings_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=10000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'payment_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_payroll_records', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'total_cost',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'insurance_employer',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'net_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'total_deductions',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'other_deductions',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'penalty_deduction',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'loan_deduction',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'advance_deduction',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'tax_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'insurance_employee',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'gross_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'trip_income_total',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'commission_total',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'bonus_total',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'overtime_total',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'allowances_total',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'prorated_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'basic_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'ot_hours_holiday',
               existing_type=sa.Numeric(precision=6, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'ot_hours_weekend',
               existing_type=sa.Numeric(precision=6, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'ot_hours_weekday',
               existing_type=sa.Numeric(precision=6, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'early_leave_count',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'late_count',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'absent_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'unpaid_leave_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'leave_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'working_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_payroll_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_payroll_periods', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_payroll_periods_status'), table_name='hrm_payroll_periods')
    op.drop_index(op.f('ix_hrm_payroll_periods_id'), table_name='hrm_payroll_periods')
    op.alter_column('hrm_payroll_periods', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'holidays_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'total_working_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_periods', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_payroll_periods', 'payment_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'payroll_run_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_payroll_periods', 'attendance_cutoff_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_payroll_periods', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_payroll_periods', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_payroll_periods', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_payroll_periods', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_payroll_items_id'), table_name='hrm_payroll_items')
    op.alter_column('hrm_payroll_items', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_payroll_items', 'calculation_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_payroll_items', 'amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_payroll_items', 'component_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=30),
               existing_nullable=False)
    op.alter_column('hrm_payroll_items', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_payroll_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_overtime_requests', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_overtime_requests_id'), table_name='hrm_overtime_requests')
    op.drop_index(op.f('ix_hrm_overtime_requests_attendance_record_id'), table_name='hrm_overtime_requests')
    op.alter_column('hrm_overtime_requests', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_overtime_requests', 'rejection_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_overtime_requests', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_overtime_requests', 'reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_overtime_requests', 'multiplier',
               existing_type=sa.Numeric(precision=3, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_overtime_requests', 'ot_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_overtime_requests', 'hours',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'end_time',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'start_time',
               existing_type=sa.Time(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_overtime_requests', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_overtime_requests', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_leave_types_is_active'), table_name='hrm_leave_types')
    op.drop_index(op.f('ix_hrm_leave_types_id'), table_name='hrm_leave_types')
    op.alter_column('hrm_leave_types', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_types', 'min_tenure_months',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'requires_attachment',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'requires_approval',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'max_negative_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_types', 'allow_negative_balance',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'max_carry_forward_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_types', 'allow_carry_forward',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'accrual_per_month',
               existing_type=sa.Numeric(precision=4, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_types', 'is_accrual',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'default_days_per_year',
               existing_type=sa.Numeric(precision=5, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_types', 'is_paid',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_types', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_leave_types', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_leave_requests', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_leave_requests_workflow_instance_id'), table_name='hrm_leave_requests')
    op.drop_index(op.f('ix_hrm_leave_requests_to_date'), table_name='hrm_leave_requests')
    op.drop_index(op.f('ix_hrm_leave_requests_id'), table_name='hrm_leave_requests')
    op.drop_index(op.f('ix_hrm_leave_requests_handover_to_id'), table_name='hrm_leave_requests')
    op.drop_index(op.f('ix_hrm_leave_requests_from_date'), table_name='hrm_leave_requests')
    op.alter_column('hrm_leave_requests', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'cancellation_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'handover_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_leave_requests', 'attachment_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_requests', 'total_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_requests', 'is_half_day',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_requests', 'to_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_leave_requests', 'from_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_leave_requests', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_leave_requests', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_column('hrm_leave_requests', 'workflow_instance_id')
    op.drop_index(op.f('ix_hrm_leave_balances_id'), table_name='hrm_leave_balances')
    op.alter_column('hrm_leave_balances', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_balances', 'available_days',
               existing_type=sa.Numeric(precision=5, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_balances', 'pending_days',
               existing_type=sa.Numeric(precision=5, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_balances', 'used_days',
               existing_type=sa.Numeric(precision=5, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_balances', 'carried_forward_days',
               existing_type=sa.Numeric(precision=5, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_balances', 'entitled_days',
               existing_type=sa.Numeric(precision=5, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_balances', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_leave_balances', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_leave_approvers_id'), table_name='hrm_leave_approvers')
    op.drop_index(op.f('ix_hrm_leave_approvers_approver_id'), table_name='hrm_leave_approvers')
    op.alter_column('hrm_leave_approvers', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_approvers', 'rejection_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_approvers', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_leave_approvers', 'level',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_leave_approvers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_leave_approvers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_leave_approval_flows_leave_type_id'), table_name='hrm_leave_approval_flows')
    op.drop_index(op.f('ix_hrm_leave_approval_flows_is_active'), table_name='hrm_leave_approval_flows')
    op.drop_index(op.f('ix_hrm_leave_approval_flows_id'), table_name='hrm_leave_approval_flows')
    op.drop_index(op.f('ix_hrm_leave_approval_flows_department_id'), table_name='hrm_leave_approval_flows')
    op.alter_column('hrm_leave_approval_flows', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'approval_levels',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'max_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'min_days',
               existing_type=sa.Numeric(precision=4, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_leave_approval_flows', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_job_postings_id'), table_name='hrm_job_postings')
    op.alter_column('hrm_job_postings', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_job_postings', 'applications_count',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_job_postings', 'views_count',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_job_postings', 'skills_required',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'benefits',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'requirements',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_job_postings', 'is_remote',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_job_postings', 'show_salary',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_job_postings', 'salary_currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('hrm_job_postings', 'headcount',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_job_postings', 'job_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_job_postings', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_job_postings', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_interviews_id'), table_name='hrm_interviews')
    op.alter_column('hrm_interviews', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'completed_at',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.TIMESTAMP(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'overall_feedback',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'weaknesses',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'strengths',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'result',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_interviews', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_interviews', 'interviewer_ids_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'meeting_link',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_interviews', 'duration_minutes',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_interviews', 'interview_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_interviews', 'interview_round',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_interviews', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_interviews', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_insurance_records_start_date'), table_name='hrm_insurance_records')
    op.drop_index(op.f('ix_hrm_insurance_records_is_active'), table_name='hrm_insurance_records')
    op.drop_index(op.f('ix_hrm_insurance_records_id'), table_name='hrm_insurance_records')
    op.alter_column('hrm_insurance_records', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_insurance_records', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_insurance_records', 'employer_rate',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_records', 'employee_rate',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_records', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_insurance_records', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_insurance_records', 'registered_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_records', 'insurance_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=30),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_insurance_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_insurance_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_insurance_contributions_payroll_record_id'), table_name='hrm_insurance_contributions')
    op.drop_index(op.f('ix_hrm_insurance_contributions_id'), table_name='hrm_insurance_contributions')
    op.alter_column('hrm_insurance_contributions', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_insurance_contributions', 'paid_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_insurance_contributions', 'is_paid',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_insurance_contributions', 'total_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_contributions', 'employer_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_contributions', 'employee_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_contributions', 'salary_base',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_insurance_contributions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_insurance_contributions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_evaluation_templates_position_id'), table_name='hrm_evaluation_templates')
    op.drop_index(op.f('ix_hrm_evaluation_templates_is_active'), table_name='hrm_evaluation_templates')
    op.drop_index(op.f('ix_hrm_evaluation_templates_id'), table_name='hrm_evaluation_templates')
    op.drop_index(op.f('ix_hrm_evaluation_templates_department_id'), table_name='hrm_evaluation_templates')
    op.alter_column('hrm_evaluation_templates', 'is_default',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_templates', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_templates', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_templates', 'name',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=100),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_templates', 'code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=30),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_templates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_evaluation_templates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_evaluation_scores_id'), table_name='hrm_evaluation_scores')
    op.alter_column('hrm_evaluation_scores', 'evidence',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'comments',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'achievement_percent',
               existing_type=sa.Numeric(precision=6, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'actual_value',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_scores', 'weighted_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_scores', 'score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_scores', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_evaluation_scores', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_evaluation_periods_start_date'), table_name='hrm_evaluation_periods')
    op.drop_index(op.f('ix_hrm_evaluation_periods_id'), table_name='hrm_evaluation_periods')
    op.drop_index(op.f('ix_hrm_evaluation_periods_end_date'), table_name='hrm_evaluation_periods')
    op.alter_column('hrm_evaluation_periods', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'subordinate_weight',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'peer_weight',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'manager_weight',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'self_weight',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'enable_subordinate_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'enable_peer_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'enable_manager_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'enable_self_evaluation',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'evaluation_end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'evaluation_start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_periods', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'period_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'name',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=100),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_periods', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_evaluation_periods', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_evaluation_criteria_id'), table_name='hrm_evaluation_criteria')
    op.alter_column('hrm_evaluation_criteria', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'target_unit',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'target_value',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'score_labels_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'max_score',
               existing_type=sa.Numeric(precision=3, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'min_score',
               existing_type=sa.Numeric(precision=3, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'weight',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'category',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=30),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_evaluation_criteria', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_evaluation_criteria', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_employees', type_='foreignkey')
    op.drop_constraint(None, 'hrm_employees', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_employees_work_shift_id'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_team_id'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_resign_date'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_position_id'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_manager_id'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_join_date'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_id'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_department_id'), table_name='hrm_employees')
    op.drop_index(op.f('ix_hrm_employees_branch_id'), table_name='hrm_employees')
    op.create_index(op.f('ix_hrm_employees_tenant_code'), 'hrm_employees', ['tenant_id', 'employee_code'], unique=False)
    op.alter_column('hrm_employees', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'avatar_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'health_check_expiry',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'health_check_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'license_expiry',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'license_class',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=10),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'health_insurance_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'social_insurance_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'resign_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'resign_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'official_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'probation_end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'join_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'status',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_employees', 'employee_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_employees', 'tax_code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'id_expiry_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'id_issue_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'id_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'current_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'permanent_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'phone',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'nationality',
               existing_type=sa.VARCHAR(length=50),
               nullable=True)
    op.alter_column('hrm_employees', 'date_of_birth',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employees', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employees', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_employee_salaries', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_employee_salaries_structure_id'), table_name='hrm_employee_salaries')
    op.drop_index(op.f('ix_hrm_employee_salaries_is_current'), table_name='hrm_employee_salaries')
    op.drop_index(op.f('ix_hrm_employee_salaries_id'), table_name='hrm_employee_salaries')
    op.drop_index(op.f('ix_hrm_employee_salaries_effective_to'), table_name='hrm_employee_salaries')
    op.drop_index(op.f('ix_hrm_employee_salaries_effective_from'), table_name='hrm_employee_salaries')
    op.alter_column('hrm_employee_salaries', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'is_current',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_employee_salaries', 'trip_rate_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'overrides_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=5000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'effective_to',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employee_salaries', 'effective_from',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_employee_salaries', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employee_salaries', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employee_namecards', 'show_website',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('hrm_employee_namecards', 'show_linkedin',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('hrm_employee_namecards', 'show_facebook',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('hrm_employee_namecards', 'show_zalo',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.drop_index(op.f('ix_hrm_employee_final_scores_id'), table_name='hrm_employee_final_scores')
    op.alter_column('hrm_employee_final_scores', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_employee_final_scores', 'review_comments',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'training_recommended',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'promotion_recommended',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_employee_final_scores', 'bonus_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'salary_adjustment_percent',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'final_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_employee_final_scores', 'subordinate_avg_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'peer_avg_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'manager_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'self_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_employee_final_scores', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employee_final_scores', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_employee_evaluations_template_id'), table_name='hrm_employee_evaluations')
    op.drop_index(op.f('ix_hrm_employee_evaluations_id'), table_name='hrm_employee_evaluations')
    op.alter_column('hrm_employee_evaluations', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'employee_comments',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'goals_next_period',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'overall_comments',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'improvements',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'strengths',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_evaluations', 'weighted_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_employee_evaluations', 'total_score',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_employee_evaluations', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_employee_evaluations', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employee_evaluations', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_employee_documents', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_employee_documents_id'), table_name='hrm_employee_documents')
    op.drop_index(op.f('ix_hrm_employee_documents_expiry_date'), table_name='hrm_employee_documents')
    op.alter_column('hrm_employee_documents', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'is_verified',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_employee_documents', 'alert_before_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_employee_documents', 'file_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'expiry_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'issue_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'document_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('hrm_employee_documents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employee_documents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_employee_dependents_id'), table_name='hrm_employee_dependents')
    op.alter_column('hrm_employee_dependents', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_employee_dependents', 'document_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'document_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=100),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'deduction_to',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'deduction_from',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'tax_code',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'id_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'date_of_birth',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_employee_dependents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_employee_dependents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_departments_id'), table_name='hrm_departments')
    op.alter_column('hrm_departments', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_departments', 'sort_order',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_departments', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_departments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_departments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_deductions', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_deductions_start_date'), table_name='hrm_deductions')
    op.drop_index(op.f('ix_hrm_deductions_is_active'), table_name='hrm_deductions')
    op.drop_index(op.f('ix_hrm_deductions_id'), table_name='hrm_deductions')
    op.alter_column('hrm_deductions', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_deductions', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_deductions', 'interest_rate',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_deductions', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_deductions', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_deductions', 'monthly_deduction',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_deductions', 'remaining_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_deductions', 'total_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_deductions', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('hrm_deductions', 'deduction_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=30),
               existing_nullable=False)
    op.alter_column('hrm_deductions', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_deductions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_contracts', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_contracts_start_date'), table_name='hrm_contracts')
    op.drop_index(op.f('ix_hrm_contracts_previous_contract_id'), table_name='hrm_contracts')
    op.drop_index(op.f('ix_hrm_contracts_id'), table_name='hrm_contracts')
    op.drop_index(op.f('ix_hrm_contracts_end_date'), table_name='hrm_contracts')
    op.alter_column('hrm_contracts', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'expiry_alert_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_contracts', 'company_signed_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'employee_signed_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'contract_file_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'termination_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'termination_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'working_days_per_week',
               existing_type=sa.Numeric(precision=3, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_contracts', 'working_hours_per_day',
               existing_type=sa.Numeric(precision=3, scale=1),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_contracts', 'job_description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'job_title',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=100),
               type_=sa.VARCHAR(length=255),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'probation_salary_percent',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_contracts', 'allowances_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'insurance_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'basic_salary',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_contracts', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_contracts', 'sign_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_contracts', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_contracts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_contracts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_certificates', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_certificates_training_id'), table_name='hrm_certificates')
    op.drop_index(op.f('ix_hrm_certificates_issue_date'), table_name='hrm_certificates')
    op.drop_index(op.f('ix_hrm_certificates_id'), table_name='hrm_certificates')
    op.drop_index(op.f('ix_hrm_certificates_expiry_date'), table_name='hrm_certificates')
    op.alter_column('hrm_certificates', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'is_verified',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_certificates', 'alert_before_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_certificates', 'file_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'license_class',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=10),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'expiry_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_certificates', 'issue_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_certificates', 'certificate_type',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=30),
               existing_nullable=False)
    op.alter_column('hrm_certificates', 'certificate_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('hrm_certificates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_certificates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_candidates_id'), table_name='hrm_candidates')
    op.alter_column('hrm_candidates', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'rejection_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'status',
               existing_type=sa.VARCHAR(length=30),
               nullable=True)
    op.alter_column('hrm_candidates', 'languages_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'skills_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'portfolio_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'cover_letter',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'resume_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_candidates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_candidates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_hrm_branches_id'), table_name='hrm_branches')
    op.alter_column('hrm_branches', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_branches', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_branches', 'is_headquarters',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_branches', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_branches', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_branches', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_attendance_records', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_attendance_records_shift_id'), table_name='hrm_attendance_records')
    op.drop_index(op.f('ix_hrm_attendance_records_id'), table_name='hrm_attendance_records')
    op.create_index(op.f('ix_hrm_attendance_tenant_date'), 'hrm_attendance_records', ['tenant_id', 'date'], unique=False)
    op.alter_column('hrm_attendance_records', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'is_approved',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'trip_ids_json',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'work_units',
               existing_type=sa.Numeric(precision=3, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'overtime_hours',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'working_hours',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'early_leave_minutes',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'late_minutes',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'check_out_time',
               existing_type=sa.DateTime(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'check_in_time',
               existing_type=sa.DateTime(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_attendance_records', 'date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_attendance_records', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_attendance_records', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_advance_requests', type_='foreignkey')
    op.drop_constraint(None, 'hrm_advance_requests', type_='foreignkey')
    op.drop_constraint(None, 'hrm_advance_requests', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_advance_requests_trip_id'), table_name='hrm_advance_requests')
    op.drop_index(op.f('ix_hrm_advance_requests_request_date'), table_name='hrm_advance_requests')
    op.drop_index(op.f('ix_hrm_advance_requests_id'), table_name='hrm_advance_requests')
    op.alter_column('hrm_advance_requests', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'monthly_deduction_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'deduction_start_month',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=7),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'repayment_method',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=30),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'remaining_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'repaid_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'paid_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'rejection_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'needed_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'request_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_advance_requests', 'advance_type',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'purpose',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_advance_requests', 'approved_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'requested_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=False)
    op.alter_column('hrm_advance_requests', 'request_number',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=30),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('hrm_advance_requests', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_advance_requests', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'hrm_advance_repayments', type_='foreignkey')
    op.drop_index(op.f('ix_hrm_advance_repayments_repayment_date'), table_name='hrm_advance_repayments')
    op.drop_index(op.f('ix_hrm_advance_repayments_payroll_record_id'), table_name='hrm_advance_repayments')
    op.drop_index(op.f('ix_hrm_advance_repayments_id'), table_name='hrm_advance_repayments')
    op.alter_column('hrm_advance_repayments', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('hrm_advance_repayments', 'repayment_method',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=20),
               type_=sa.VARCHAR(length=30),
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'repayment_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('hrm_advance_repayments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('hrm_advance_repayments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('gps_vehicle_mappings', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('gps_sync_logs', 'vehicles_synced',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('gps_sync_logs', 'success',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.create_index(op.f('ix_gps_providers_status'), 'gps_providers', ['status'], unique=False)
    op.create_index(op.f('ix_gps_providers_provider_type'), 'gps_providers', ['provider_type'], unique=False)
    op.alter_column('gps_providers', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('gps_providers', 'error_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('gps_providers', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'inactive'::character varying"),
               existing_nullable=False)
    op.alter_column('gps_providers', 'is_realtime',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('gps_providers', 'sync_interval_seconds',
               existing_type=sa.INTEGER(),
               server_default=sa.text('30'),
               existing_nullable=False)
    op.alter_column('gps_providers', 'auth_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'api_key'::character varying"),
               existing_nullable=False)
    op.alter_column('gps_providers', 'provider_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'binh_anh'::character varying"),
               existing_nullable=False)
    op.drop_constraint(None, 'fuel_logs', type_='foreignkey')
    op.drop_constraint(None, 'fuel_logs', type_='foreignkey')
    op.create_foreign_key(op.f('fuel_logs_vehicle_id_fkey'), 'fuel_logs', 'vehicles', ['vehicle_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key(op.f('fuel_logs_driver_id_fkey'), 'fuel_logs', 'drivers', ['driver_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_fuel_logs_vehicle_id'), table_name='fuel_logs')
    op.drop_index(op.f('ix_fuel_logs_tenant_id'), table_name='fuel_logs')
    op.drop_index(op.f('ix_fuel_logs_payment_status'), table_name='fuel_logs')
    op.drop_index(op.f('ix_fuel_logs_id'), table_name='fuel_logs')
    op.drop_index(op.f('ix_fuel_logs_driver_id'), table_name='fuel_logs')
    op.drop_index(op.f('ix_fuel_logs_date'), table_name='fuel_logs')
    op.create_index(op.f('idx_fuel_logs_vehicle_id'), 'fuel_logs', ['vehicle_id'], unique=False)
    op.create_index(op.f('idx_fuel_logs_tenant_id'), 'fuel_logs', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_fuel_logs_payment_status'), 'fuel_logs', ['payment_status'], unique=False)
    op.create_index(op.f('idx_fuel_logs_driver_id'), 'fuel_logs', ['driver_id'], unique=False)
    op.create_index(op.f('idx_fuel_logs_date'), 'fuel_logs', ['date'], unique=False)
    op.alter_column('fuel_logs', 'payment_status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'UNPAID'::character varying"),
               existing_nullable=False)
    op.alter_column('fuel_logs', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('fuel_logs', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('fuel_logs', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('fms_units', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_units', 'conversion_factor',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'1'::double precision"),
               existing_nullable=False)
    op.add_column('fms_shipments', sa.Column('destination_agent_name', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('customer_ref_no', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('ops_person_name', sa.VARCHAR(length=100), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('currency_code', sa.VARCHAR(), server_default=sa.text("'USD'::character varying"), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('container_count_45', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('origin_agent_name', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('total_packages', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('place_of_delivery', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('consignee_id', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('house_awb_no', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('total_buy_rate', sa.NUMERIC(precision=15, scale=2), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('total_revenue', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('container_count_40hc', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('master_awb_no', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('total_sell_rate', sa.NUMERIC(precision=15, scale=2), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('container_count_20', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('container_count_40', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('place_of_receipt', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('is_dangerous_goods', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('is_reefer', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('shipper_id', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('volume_cbm', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('ops_person_id', sa.VARCHAR(length=50), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('is_oversized', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=True))
    op.add_column('fms_shipments', sa.Column('cargo_description', sa.TEXT(), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_fms_shipments_customer_id'), table_name='fms_shipments')
    op.create_index(op.f('ix_fms_shipments_status'), 'fms_shipments', ['status'], unique=False)
    op.alter_column('fms_shipments', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_shipments', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('fms_shipments', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_shipments', 'special_instructions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'internal_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'insurance_value',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_shipments', 'is_insured',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_shipments', 'profit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_shipments', 'total_cost',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_shipments', 'total_charges',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_shipments', 'freight_currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('fms_shipments', 'freight_amount',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_shipments', 'container_qty',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_shipments', 'chargeable_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_shipments', 'volume',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_shipments', 'net_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_shipments', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_shipments', 'package_qty',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_shipments', 'ata',
               existing_type=sa.DateTime(),
               type_=sa.DATE(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'atd',
               existing_type=sa.DateTime(),
               type_=sa.DATE(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'eta',
               existing_type=sa.DateTime(),
               type_=sa.DATE(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'etd',
               existing_type=sa.DateTime(),
               type_=sa.DATE(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'delivery_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'pickup_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'notify_party_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'consignee_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'shipper_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_shipments', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'DRAFT'::character varying"),
               existing_nullable=False)
    op.add_column('fms_quotations', sa.Column('container_20', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('profit', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('contact_email', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('sent_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('packages', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('sent_by', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('valid_to', sa.DATE(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('total_sell_price', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('converted_to_shipment_id', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('contact_phone', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('total_buy_cost', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('accepted_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('container_40', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('container_40hc', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('incoterm', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('accepted_by', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('rejection_reason', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('volume_cbm', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('deleted_by', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('rejected_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('terms_and_conditions', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('cargo_description', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_quotations', sa.Column('contact_person', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_fms_quotations_customer_id'), table_name='fms_quotations')
    op.alter_column('fms_quotations', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_quotations', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('fms_quotations', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_quotations', 'version',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               nullable=True)
    op.alter_column('fms_quotations', 'profit_margin',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_quotations', 'profit_amount',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'total_sell_rate',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'total_buy_rate',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'total_amount',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'tax_amount',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'discount_percent',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'discount_amount',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'subtotal',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'currency_code',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'USD'::character varying"),
               nullable=True)
    op.alter_column('fms_quotations', 'is_oversize',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_quotations', 'is_reefer',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_quotations', 'is_dangerous_goods',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_quotations', 'container_qty',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_quotations', 'chargeable_weight',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'volume',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_quotations', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_quotations', 'package_qty',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_quotations', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'DRAFT'::character varying"),
               nullable=True)
    op.alter_column('fms_quotations', 'quotation_date',
               existing_type=sa.DATE(),
               nullable=True)
    op.add_column('fms_quotation_items', sa.Column('sell_amount', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_quotation_items', sa.Column('buy_amount', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_quotation_items', sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_quotation_items', sa.Column('vendor_name', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotation_items', sa.Column('vendor_id', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_quotation_items', sa.Column('is_deleted', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False))
    op.create_foreign_key(op.f('fms_quotation_items_quotation_id_fkey'), 'fms_quotation_items', 'fms_quotations', ['quotation_id'], ['id'])
    op.drop_index(op.f('ix_fms_quotation_items_tenant_id'), table_name='fms_quotation_items')
    op.drop_index(op.f('ix_fms_quotation_items_quotation_id'), table_name='fms_quotation_items')
    op.alter_column('fms_quotation_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_quotation_items', 'sell_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_quotation_items', 'buy_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_quotation_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'1'::double precision"),
               nullable=True)
    op.alter_column('fms_quotation_items', 'charge_name',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('fms_quotation_items', 'charge_type',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.drop_column('fms_quotation_items', 'created_by')
    op.drop_column('fms_quotation_items', 'updated_at')
    op.drop_column('fms_quotation_items', 'notes')
    op.drop_column('fms_quotation_items', 'payable_to')
    op.drop_column('fms_quotation_items', 'payment_terms')
    op.drop_column('fms_quotation_items', 'is_optional')
    op.drop_column('fms_quotation_items', 'is_included')
    op.drop_column('fms_quotation_items', 'charge_category')
    op.drop_column('fms_quotation_items', 'profit')
    op.drop_column('fms_quotation_items', 'amount')
    op.drop_column('fms_quotation_items', 'currency_code')
    op.drop_column('fms_quotation_items', 'unit_price')
    op.drop_column('fms_quotation_items', 'description')
    op.drop_column('fms_quotation_items', 'item_no')
    op.alter_column('fms_ports', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_ports', 'is_customs_clearance',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_ports', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_ports', 'port_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'SEAPORT'::character varying"),
               existing_nullable=False)
    op.create_index(op.f('ix_fms_parsing_instructions_pattern'), 'fms_parsing_instructions', ['tenant_id', 'shipper_pattern', 'is_active'], unique=False)
    op.alter_column('fms_parsing_instructions', 'times_applied',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_parsing_instructions', 'priority',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_parsing_instructions', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_parsing_instructions', 'examples',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'value_transforms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'data_source_priority',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'field_mappings',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_parsing_instructions', 'instructions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('fms_parsing_instructions', 'shipper_keywords',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.add_column('fms_hs_codes', sa.Column('item_no', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('duty_rate', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('sct_amount', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('sct_rate', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('description', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('duty_amount', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_hs_codes', sa.Column('origin_country', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_fms_hs_codes_tenant_id'), table_name='fms_hs_codes')
    op.drop_index(op.f('ix_fms_hs_codes_hs_code'), table_name='fms_hs_codes')
    op.drop_index(op.f('ix_fms_hs_codes_declaration_id'), table_name='fms_hs_codes')
    op.drop_index(op.f('ix_fms_hs_codes_product_code'), table_name='fms_hs_codes')
    op.create_index(op.f('ix_fms_hs_codes_product_code'), 'fms_hs_codes', ['tenant_id', 'product_code'], unique=False)
    op.alter_column('fms_hs_codes', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_hs_codes', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_hs_codes', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'exemption_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'total_tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'environmental_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'special_consumption_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'vat_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'import_duty_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'environmental_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'special_consumption_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'vat_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'10'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'import_duty_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'customs_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_hs_codes', 'total_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'currency_code',
               existing_type=sa.VARCHAR(length=5),
               nullable=True)
    op.alter_column('fms_hs_codes', 'unit_price',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'net_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_hs_codes', 'product_specification',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'product_name',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'hs_description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_hs_codes', 'line_no',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_hs_code_catalog', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'special_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_hs_code_catalog', 'requires_inspection',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'requires_license',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'export_duty_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'environmental_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'special_consumption_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'vat_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'10'::double precision"),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'import_duty_rate',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'description_vi',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('fms_hs_code_catalog', 'description_en',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'internal_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'terms_conditions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'remarks',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_freight_rates', 'free_demurrage_days',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'free_detention_days',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'is_promotional',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'is_spot_rate',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'is_contract_rate',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'doc_fee_included',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'thc_dest_included',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'thc_origin_included',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'currency_code',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'USD'::character varying"),
               nullable=True)
    op.alter_column('fms_freight_rates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               nullable=True)
    op.alter_column('fms_freight_rates', 'rate_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'SEA_FCL'::character varying"),
               nullable=True)
    op.alter_column('fms_exemption_codes', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_exemption_codes', 'legal_reference',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_exemption_codes', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_declaration_types', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_declaration_types', 'special_handling',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_declaration_types', 'requires_co',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_declaration_types', 'requires_license',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_declaration_types', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_customs_offices', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_customs_offices', 'managed_ports',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_customs_offices', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_customs_offices', 'level',
               existing_type=sa.INTEGER(),
               server_default=sa.text('2'),
               existing_nullable=False)
    op.alter_column('fms_customs_locations', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_customs_locations', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.create_index(op.f('idx_importers_tax_code_hash'), 'fms_customs_importers', ['tax_code_hash'], unique=False)
    op.create_index(op.f('idx_importers_name_hash'), 'fms_customs_importers', ['name_hash'], unique=False)
    op.alter_column('fms_customs_importers', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_customs_importers', 'user_select_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_customs_importers', 'ai_match_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_customs_importers', 'match_priority',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_customs_importers', 'alias_names',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.JSON(astext_type=sa.Text()),
               existing_nullable=True)
    op.alter_column('fms_customs_importers', 'name_tokens',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_customs_importers', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.create_index(op.f('idx_exporters_name_hash'), 'fms_customs_exporters', ['name_hash'], unique=False)
    op.alter_column('fms_customs_exporters', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_customs_exporters', 'user_select_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_customs_exporters', 'ai_match_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_customs_exporters', 'match_priority',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('fms_customs_exporters', 'alias_names',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.JSON(astext_type=sa.Text()),
               existing_nullable=True)
    op.alter_column('fms_customs_exporters', 'name_tokens',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_customs_exporters', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_customs_declarations', 'ecus_synced',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'vat_exempted',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'vat_payable',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'import_duty_exempted',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'import_duty_payable',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'total_items',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'total_value_vnd',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'total_value_foreign',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'packing_cost',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'brokerage_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'commission_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_customs_declarations', 'amendment_count',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_currencies', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_currencies', 'decimal_places',
               existing_type=sa.INTEGER(),
               server_default=sa.text('2'),
               existing_nullable=False)
    op.alter_column('fms_countries', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('fms_countries', 'fta_codes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_countries', 'is_fta_partner',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.add_column('fms_containers', sa.Column('max_payload', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('discharge_date', postgresql.TIMESTAMP(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('detention_from', sa.DATE(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('packages', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('over_width', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('loading_date', postgresql.TIMESTAMP(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('empty_pickup_location', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('deleted_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('temperature_setting', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('demurrage_from', sa.DATE(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('vgm_certificate_no', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('humidity_setting', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('over_length_front', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('is_dangerous_goods', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('ventilation_setting', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('empty_return_location', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('un_no', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('volume_cbm', sa.DOUBLE_PRECISION(precision=53), server_default=sa.text("'0'::double precision"), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('deleted_by', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('vgm_weight', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('is_deleted', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False))
    op.add_column('fms_containers', sa.Column('free_days', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('over_length_back', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.add_column('fms_containers', sa.Column('over_height', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True))
    op.create_foreign_key(op.f('fms_containers_shipment_id_fkey'), 'fms_containers', 'fms_shipments', ['shipment_id'], ['id'])
    op.drop_index(op.f('ix_fms_containers_shipment_id'), table_name='fms_containers')
    op.alter_column('fms_containers', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('fms_containers', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_containers', 'remarks',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_containers', 'free_demurrage_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_containers', 'free_detention_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_containers', 'storage_cost',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_containers', 'demurrage_cost',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_containers', 'detention_cost',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_containers', 'storage_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_containers', 'demurrage_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_containers', 'detention_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_containers', 'oog_top',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_right',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_left',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_back',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'oog_front',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'is_oog',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_containers', 'is_dg',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_containers', 'humidity',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'temperature',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'is_reefer',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('fms_containers', 'vgm',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               existing_nullable=True)
    op.alter_column('fms_containers', 'volume',
               existing_type=sa.Float(),
               server_default=sa.text('0'),
               type_=sa.NUMERIC(precision=15, scale=2),
               nullable=True)
    op.alter_column('fms_containers', 'net_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_containers', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_containers', 'package_qty',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_containers', 'tare_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_containers', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'EMPTY'::character varying"),
               nullable=True)
    op.alter_column('fms_containers', 'container_type',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.add_column('fms_consolidation_items', sa.Column('packages', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('fms_consolidation_items', sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True))
    op.create_foreign_key(op.f('fms_consolidation_items_shipment_id_fkey'), 'fms_consolidation_items', 'fms_shipments', ['shipment_id'], ['id'])
    op.drop_index(op.f('ix_fms_consolidation_items_tenant_id'), table_name='fms_consolidation_items')
    op.drop_index(op.f('ix_fms_consolidation_items_shipment_id'), table_name='fms_consolidation_items')
    op.drop_index(op.f('ix_fms_consolidation_items_consolidation_id'), table_name='fms_consolidation_items')
    op.alter_column('fms_consolidation_items', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_consolidation_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_consolidation_items', 'chargeable_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_consolidation_items', 'volume',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.alter_column('fms_consolidation_items', 'gross_weight',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               nullable=True)
    op.drop_column('fms_consolidation_items', 'updated_at')
    op.drop_column('fms_consolidation_items', 'notes')
    op.drop_column('fms_consolidation_items', 'pod_received')
    op.drop_column('fms_consolidation_items', 'delivered_to')
    op.drop_column('fms_consolidation_items', 'delivery_date')
    op.drop_column('fms_consolidation_items', 'status')
    op.drop_column('fms_consolidation_items', 'package_type')
    op.drop_column('fms_consolidation_items', 'pieces')
    op.drop_column('fms_consolidation_items', 'description')
    op.drop_column('fms_consolidation_items', 'marks_numbers')
    op.drop_column('fms_consolidation_items', 'consignee_name')
    op.drop_column('fms_consolidation_items', 'shipper_name')
    op.drop_column('fms_consolidation_items', 'house_awb_id')
    op.drop_column('fms_consolidation_items', 'house_bl_id')
    op.drop_column('fms_consolidation_items', 'item_no')
    op.drop_constraint(None, 'fms_ai_partner_matches', type_='foreignkey')
    op.create_foreign_key(op.f('fms_ai_partner_matches_session_id_fkey'), 'fms_ai_partner_matches', 'fms_ai_parsing_sessions', ['session_id'], ['id'], ondelete='CASCADE')
    op.create_index(op.f('idx_ai_partner_matches_type'), 'fms_ai_partner_matches', ['partner_type'], unique=False)
    op.alter_column('fms_ai_partner_matches', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_ai_partner_matches', 'alternative_matches',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.JSON(astext_type=sa.Text()),
               existing_nullable=True)
    op.alter_column('fms_ai_partner_matches', 'extracted_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_ai_partner_matches', 'extracted_name',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.create_index(op.f('idx_ai_sessions_status'), 'fms_ai_parsing_sessions', ['status'], unique=False)
    op.create_index(op.f('idx_ai_sessions_created'), 'fms_ai_parsing_sessions', ['created_at'], unique=False)
    op.alter_column('fms_ai_parsing_sessions', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_ai_parsing_sessions', 'total_fields_corrected',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_ai_parsing_sessions', 'total_fields_parsed',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_ai_parsing_sessions', 'document_types',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.JSON(astext_type=sa.Text()),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_sessions', 'original_files',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.JSON(astext_type=sa.Text()),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_sessions', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.drop_constraint(None, 'fms_ai_parsing_outputs', type_='foreignkey')
    op.create_foreign_key(op.f('fms_ai_parsing_outputs_session_id_fkey'), 'fms_ai_parsing_outputs', 'fms_ai_parsing_sessions', ['session_id'], ['id'], ondelete='CASCADE')
    op.create_index(op.f('idx_ai_outputs_field'), 'fms_ai_parsing_outputs', ['field_category', 'field_name'], unique=False)
    op.alter_column('fms_ai_parsing_outputs', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_ai_parsing_outputs', 'ai_source_content',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_ai_parsing_outputs', 'ai_extracted_value',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.create_index(op.f('idx_ai_rules_type'), 'fms_ai_customer_rules', ['rule_type'], unique=False)
    op.alter_column('fms_ai_customer_rules', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_ai_customer_rules', 'is_auto_generated',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_ai_customer_rules', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('fms_ai_customer_rules', 'times_overridden',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_ai_customer_rules', 'times_applied',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('fms_ai_customer_rules', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_ai_customer_rules', 'transform_logic',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=postgresql.JSON(astext_type=sa.Text()),
               existing_nullable=True)
    op.drop_constraint(None, 'fms_ai_corrections', type_='foreignkey')
    op.drop_constraint(None, 'fms_ai_corrections', type_='foreignkey')
    op.create_foreign_key(op.f('fms_ai_corrections_output_id_fkey'), 'fms_ai_corrections', 'fms_ai_parsing_outputs', ['output_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key(op.f('fms_ai_corrections_session_id_fkey'), 'fms_ai_corrections', 'fms_ai_parsing_sessions', ['session_id'], ['id'], ondelete='CASCADE')
    op.create_index(op.f('idx_ai_corrections_field'), 'fms_ai_corrections', ['field_category', 'field_name'], unique=False)
    op.alter_column('fms_ai_corrections', 'corrected_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_ai_corrections', 'corrected_value',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_ai_corrections', 'original_value',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('fms_agents', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('fms_agents', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_agents', 'remarks',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'trade_lanes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'services',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'payment_terms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'credit_limit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('fms_agents', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('fms_agents', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               nullable=True)
    op.alter_column('fms_agents', 'agent_type',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.add_column('fms_agent_agreements', sa.Column('start_date', sa.DATE(), autoincrement=False, nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('is_deleted', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False))
    op.add_column('fms_agent_agreements', sa.Column('terms_and_conditions', sa.TEXT(), autoincrement=False, nullable=True))
    op.add_column('fms_agent_agreements', sa.Column('end_date', sa.DATE(), autoincrement=False, nullable=True))
    op.create_foreign_key(op.f('fms_agent_agreements_agent_id_fkey'), 'fms_agent_agreements', 'fms_agents', ['agent_id'], ['id'])
    op.drop_index(op.f('ix_fms_agent_agreements_tenant_id'), table_name='fms_agent_agreements')
    op.drop_index(op.f('ix_fms_agent_agreements_agreement_no'), table_name='fms_agent_agreements')
    op.drop_index(op.f('ix_fms_agent_agreements_agent_id'), table_name='fms_agent_agreements')
    op.alter_column('fms_agent_agreements', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('fms_agent_agreements', 'payment_terms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('fms_agent_agreements', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'ACTIVE'::character varying"),
               nullable=True)
    op.alter_column('fms_agent_agreements', 'agreement_no',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.drop_column('fms_agent_agreements', 'updated_by')
    op.drop_column('fms_agent_agreements', 'created_by')
    op.drop_column('fms_agent_agreements', 'updated_at')
    op.drop_column('fms_agent_agreements', 'notes')
    op.drop_column('fms_agent_agreements', 'agreement_file')
    op.drop_column('fms_agent_agreements', 'services')
    op.drop_column('fms_agent_agreements', 'routes')
    op.drop_column('fms_agent_agreements', 'currency_code')
    op.drop_column('fms_agent_agreements', 'expiry_date')
    op.drop_column('fms_agent_agreements', 'effective_date')
    op.drop_index(op.f('ix_financial_summaries_id'), table_name='financial_summaries')
    op.alter_column('financial_summaries', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'outstanding_payables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_payables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'outstanding_receivables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_received',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_receivables',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'gross_profit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_other_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_maintenance_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_fuel_costs',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_driver_payments',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_additional_charges',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_freight_charges',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_revenue',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('financial_summaries', 'total_orders',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.drop_constraint(None, 'empty_returns', type_='foreignkey')
    op.create_foreign_key(op.f('empty_returns_order_id_fkey'), 'empty_returns', 'orders', ['order_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_empty_returns_tenant_id'), table_name='empty_returns')
    op.drop_index(op.f('ix_empty_returns_status'), table_name='empty_returns')
    op.drop_index(op.f('ix_empty_returns_return_date'), table_name='empty_returns')
    op.drop_index(op.f('ix_empty_returns_port_site_id'), table_name='empty_returns')
    op.drop_index(op.f('ix_empty_returns_order_id'), table_name='empty_returns')
    op.drop_index(op.f('ix_empty_returns_id'), table_name='empty_returns')
    op.create_index(op.f('idx_empty_returns_tenant_id'), 'empty_returns', ['tenant_id'], unique=False)
    op.create_index(op.f('idx_empty_returns_status'), 'empty_returns', ['status'], unique=False)
    op.create_index(op.f('idx_empty_returns_return_date'), 'empty_returns', ['return_date'], unique=False)
    op.create_index(op.f('idx_empty_returns_port_site_id'), 'empty_returns', ['port_site_id'], unique=False)
    op.create_index(op.f('idx_empty_returns_order_id'), 'empty_returns', ['order_id'], unique=False)
    op.alter_column('empty_returns', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('empty_returns', 'total_paid',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'total_amount',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'other_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'other_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'repair_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'repair_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'storage_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'storage_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'lift_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'lift_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'cleaning_fee_paid',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'cleaning_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('empty_returns', 'port_site_id',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('empty_returns', 'return_date',
               existing_type=sa.DATE(),
               nullable=False)
    op.alter_column('empty_returns', 'id',
               existing_type=sa.VARCHAR(),
               server_default=sa.text('(gen_random_uuid())::text'),
               existing_nullable=False)
    op.alter_column('empty_returns', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.alter_column('empty_returns', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('now()'),
               type_=postgresql.TIMESTAMP(timezone=True),
               nullable=True)
    op.drop_constraint(None, 'drivers', type_='foreignkey')
    op.drop_constraint(None, 'drivers', type_='foreignkey')
    op.drop_constraint(None, 'drivers', type_='foreignkey')
    op.create_foreign_key(op.f('fk_drivers_employee_id'), 'drivers', 'hrm_employees', ['employee_id'], ['id'], ondelete='SET NULL')
    op.drop_index(op.f('ix_drivers_vehicle_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_trailer_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_tractor_id'), table_name='drivers')
    op.create_index(op.f('ix_drivers_tenant_status'), 'drivers', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('ix_drivers_phone'), 'drivers', ['phone'], unique=False)
    op.create_index(op.f('idx_drivers_vehicle'), 'drivers', ['vehicle_id'], unique=False)
    op.create_index(op.f('idx_drivers_trailer'), 'drivers', ['trailer_id'], unique=False)
    op.create_index(op.f('idx_drivers_tractor'), 'drivers', ['tractor_id'], unique=False)
    op.alter_column('drivers', 'source',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'INTERNAL'::character varying"),
               nullable=True)
    op.alter_column('drivers', 'dependent_count',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('drivers', 'base_salary',
               existing_type=sa.INTEGER(),
               server_default=sa.text('5000000'),
               nullable=True)
    op.drop_index(op.f('ix_driver_salary_settings_tenant_id'), table_name='driver_salary_settings')
    op.drop_index(op.f('ix_driver_salary_settings_id'), table_name='driver_salary_settings')
    op.create_index(op.f('idx_driver_salary_settings_tenant'), 'driver_salary_settings', ['tenant_id'], unique=False)
    op.alter_column('driver_salary_settings', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'ACTIVE'::character varying"),
               nullable=True)
    op.alter_column('driver_salary_settings', 'holiday_multiplier',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text('2.0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'bonus_55_plus_trips',
               existing_type=sa.INTEGER(),
               server_default=sa.text('2000000'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'bonus_51_54_trips',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1500000'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'bonus_45_50_trips',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1000000'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'third_trip_bonus',
               existing_type=sa.INTEGER(),
               server_default=sa.text('700000'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'second_trip_bonus',
               existing_type=sa.INTEGER(),
               server_default=sa.text('500000'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_to_customer_bonus',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'flatbed_tarp_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_gate_fee',
               existing_type=sa.INTEGER(),
               server_default=sa.text('50000'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_13',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_12',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_11',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_10',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_9',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_8',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_7',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_6',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_5',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_4',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_3',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_2',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'warehouse_bracket_1',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_13',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_12',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_11',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_10',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_9',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_8',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_7',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_6',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_5',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_4',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_3',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_2',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'port_bracket_1',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_12',
               existing_type=sa.INTEGER(),
               server_default=sa.text('250'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_11',
               existing_type=sa.INTEGER(),
               server_default=sa.text('200'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_10',
               existing_type=sa.INTEGER(),
               server_default=sa.text('150'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_9',
               existing_type=sa.INTEGER(),
               server_default=sa.text('120'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_8',
               existing_type=sa.INTEGER(),
               server_default=sa.text('100'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_7',
               existing_type=sa.INTEGER(),
               server_default=sa.text('80'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_6',
               existing_type=sa.INTEGER(),
               server_default=sa.text('60'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_5',
               existing_type=sa.INTEGER(),
               server_default=sa.text('50'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_4',
               existing_type=sa.INTEGER(),
               server_default=sa.text('200'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_3',
               existing_type=sa.INTEGER(),
               server_default=sa.text('150'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_2',
               existing_type=sa.INTEGER(),
               server_default=sa.text('100'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'distance_bracket_1',
               existing_type=sa.INTEGER(),
               server_default=sa.text('50'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.alter_column('driver_salary_settings', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               nullable=True)
    op.drop_index(op.f('ix_driver_earnings_id'), table_name='driver_earnings')
    op.alter_column('driver_earnings', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('driver_earnings', 'amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('driver_earnings', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('driver_earnings', 'net_earnings',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('driver_earnings', 'deductions',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('driver_earnings', 'gross_earnings',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('driver_earnings', 'currency',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VND'::character varying"),
               existing_nullable=False)
    op.alter_column('driver_earnings', 'total_orders',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.drop_index(op.f('ix_driver_availability_templates_id'), table_name='driver_availability_templates')
    op.alter_column('driver_availability_templates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('driver_availability_templates', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               existing_nullable=False)
    op.alter_column('driver_availability_templates', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               existing_nullable=False)
    op.drop_index(op.f('ix_driver_availability_parent_availability_id'), table_name='driver_availability')
    op.drop_index(op.f('ix_driver_availability_id'), table_name='driver_availability')
    op.drop_index(op.f('ix_driver_availability_availability_date'), table_name='driver_availability')
    op.create_index(op.f('ix_driver_availability_date'), 'driver_availability', ['availability_date'], unique=False)
    op.alter_column('driver_availability', 'recurrence_type',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'NONE'::character varying"),
               existing_nullable=False)
    op.alter_column('driver_availability', 'note',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('driver_availability', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'AVAILABLE'::character varying"),
               existing_nullable=False)
    op.alter_column('driver_availability', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               existing_nullable=False)
    op.alter_column('driver_availability', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('CURRENT_TIMESTAMP'),
               existing_nullable=False)
    op.drop_index(op.f('ix_dispatcher_orders_id'), table_name='dispatcher_orders')
    op.alter_column('dispatcher_orders', 'driver_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'dispatcher_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'payment_status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.alter_column('dispatcher_orders', 'cargo_description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'delivery_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'pickup_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('dispatcher_orders', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'DRAFT'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_dispatcher_order_sequences_id'), table_name='dispatcher_order_sequences')
    op.alter_column('dispatcher_order_sequences', 'last_seq',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('dispatcher_order_sequences', 'prefix',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'DO'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_dispatch_logs_vehicle_id'), table_name='dispatch_logs')
    op.drop_index(op.f('ix_dispatch_logs_user_id'), table_name='dispatch_logs')
    op.drop_index(op.f('ix_dispatch_logs_trip_id'), table_name='dispatch_logs')
    op.drop_index(op.f('ix_dispatch_logs_status'), table_name='dispatch_logs')
    op.drop_index(op.f('ix_dispatch_logs_order_id'), table_name='dispatch_logs')
    op.drop_index(op.f('ix_dispatch_logs_id'), table_name='dispatch_logs')
    op.drop_index(op.f('ix_dispatch_logs_driver_id'), table_name='dispatch_logs')
    op.alter_column('dispatch_logs', 'is_ai',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.drop_index(op.f('ix_dispatch_alerts_vehicle_id'), table_name='dispatch_alerts')
    op.drop_index(op.f('ix_dispatch_alerts_trip_id'), table_name='dispatch_alerts')
    op.drop_index(op.f('ix_dispatch_alerts_order_id'), table_name='dispatch_alerts')
    op.drop_index(op.f('ix_dispatch_alerts_id'), table_name='dispatch_alerts')
    op.drop_index(op.f('ix_dispatch_alerts_driver_id'), table_name='dispatch_alerts')
    op.alter_column('dispatch_alerts', 'is_auto',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('dispatch_alerts', 'is_resolved',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('dispatch_alerts', 'severity',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'warning'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_customers_name'), table_name='customers')
    op.create_index(op.f('ix_customers_tenant_active'), 'customers', ['tenant_id', 'is_active'], unique=False)
    op.alter_column('customers', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('customers', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('customers', 'credit_days',
               existing_type=sa.INTEGER(),
               server_default=sa.text('30'),
               existing_nullable=False)
    op.alter_column('customers', 'credit_limit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('customers', 'country',
               existing_type=sa.VARCHAR(length=100),
               server_default=sa.text("'Vit Nam'::character varying"),
               existing_nullable=False)
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_constraint(None, 'crm_sales_orders', type_='foreignkey')
    op.drop_index(op.f('ix_crm_sales_orders_payment_status'), table_name='crm_sales_orders')
    op.drop_index(op.f('ix_crm_sales_orders_order_date'), table_name='crm_sales_orders')
    op.drop_index(op.f('ix_crm_sales_orders_id'), table_name='crm_sales_orders')
    op.drop_index(op.f('ix_crm_sales_orders_delivery_date'), table_name='crm_sales_orders')
    op.drop_index(op.f('ix_crm_sales_orders_created_by'), table_name='crm_sales_orders')
    op.alter_column('crm_sales_orders', 'internal_notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'payment_terms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'billing_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'shipping_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=500),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'currency',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=3),
               type_=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('crm_sales_orders', 'amount_due',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_orders', 'amount_paid',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_orders', 'total_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_orders', 'shipping_cost',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_orders', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_orders', 'discount_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_orders', 'tax_amount',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_orders', 'subtotal',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_orders', 'delivery_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('crm_sales_orders', 'order_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('crm_sales_orders', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('crm_sales_orders', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'crm_sales_order_items', type_='foreignkey')
    op.drop_index(op.f('ix_crm_sales_order_items_product_id'), table_name='crm_sales_order_items')
    op.drop_index(op.f('ix_crm_sales_order_items_id'), table_name='crm_sales_order_items')
    op.alter_column('crm_sales_order_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'line_total',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'tax_amount',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'tax_percent',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'discount_amount',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'discount_percent',
               existing_type=sa.Numeric(precision=5, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'unit_price',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'quantity_returned',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'quantity_delivered',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'quantity_shipped',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'quantity',
               existing_type=sa.Numeric(precision=12, scale=4),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_sales_order_items', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=1000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_constraint(None, 'crm_quotes', type_='foreignkey')
    op.drop_index(op.f('ix_crm_quotes_status'), table_name='crm_quotes')
    op.drop_index(op.f('ix_crm_quotes_id'), table_name='crm_quotes')
    op.alter_column('crm_quotes', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_quotes', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_quotes', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'rejection_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'terms_conditions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'delivery_terms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'payment_terms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_quotes', 'currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('crm_quotes', 'total_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quotes', 'tax_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quotes', 'tax_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quotes', 'discount_amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quotes', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quotes', 'subtotal',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quotes', 'version',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('crm_quote_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_quote_items', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_quote_items', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quote_items', 'unit_price',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quote_items', 'quantity',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_quote_items', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               nullable=False)
    op.alter_column('crm_quote_items', 'service_type',
               existing_type=sa.VARCHAR(length=50),
               nullable=False)
    op.alter_column('crm_quote_items', 'service_category',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'TMS'::character varying"),
               nullable=True)
    op.alter_column('crm_quote_items', 'line_number',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.drop_index(op.f('ix_crm_opportunities_id'), table_name='crm_opportunities')
    op.create_index(op.f('ix_crm_opportunities_tenant_stage'), 'crm_opportunities', ['tenant_id', 'stage'], unique=False)
    op.alter_column('crm_opportunities', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'next_step',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'close_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_opportunities', 'currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('crm_opportunities', 'amount',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_opportunities', 'probability',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_opportunities', 'code',
               existing_type=sa.VARCHAR(length=50),
               nullable=False)
    op.alter_column('crm_opportunities', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_opportunities', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_constraint(None, 'crm_leads', type_='foreignkey')
    op.drop_constraint(None, 'crm_leads', type_='foreignkey')
    op.drop_constraint(None, 'crm_leads', type_='foreignkey')
    op.drop_index(op.f('ix_crm_leads_id'), table_name='crm_leads')
    op.drop_index(op.f('ix_crm_leads_email'), table_name='crm_leads')
    op.drop_index(op.f('ix_crm_leads_company_name'), table_name='crm_leads')
    op.create_index(op.f('ix_crm_leads_tenant_status'), 'crm_leads', ['tenant_id', 'status'], unique=False)
    op.create_index(op.f('ix_crm_leads_source'), 'crm_leads', ['source'], unique=False)
    op.alter_column('crm_leads', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_leads', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_leads', 'estimated_value',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_leads', 'country',
               existing_type=sa.VARCHAR(length=100),
               nullable=True)
    op.alter_column('crm_leads', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_leads', 'full_name',
               existing_type=sa.VARCHAR(length=255),
               nullable=False)
    op.alter_column('crm_leads', 'last_name',
               existing_type=sa.VARCHAR(length=100),
               nullable=False)
    op.alter_column('crm_leads', 'code',
               existing_type=sa.VARCHAR(length=50),
               nullable=False)
    op.alter_column('crm_leads', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_leads', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_crm_customer_groups_id'), table_name='crm_customer_groups')
    op.alter_column('crm_customer_groups', 'is_active',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_customer_groups', 'priority',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('crm_customer_groups', 'credit_limit_default',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_customer_groups', 'discount_percent',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_customer_groups', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_customer_groups', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_customer_groups', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_crm_contracts_id'), table_name='crm_contracts')
    op.alter_column('crm_contracts', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=2000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'terms_conditions',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=10000),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'renewal_notice_days',
               existing_type=sa.INTEGER(),
               server_default=sa.text('30'),
               nullable=True)
    op.alter_column('crm_contracts', 'auto_renew',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               nullable=True)
    op.alter_column('crm_contracts', 'payment_terms',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=50),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'currency',
               existing_type=sqlmodel.sql.sqltypes.AutoString(length=3),
               type_=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('crm_contracts', 'total_value',
               existing_type=sa.Numeric(precision=18, scale=2),
               type_=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_contracts', 'signed_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'end_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'start_date',
               existing_type=sa.Date(),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('crm_contracts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('crm_contracts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.add_column('crm_contract_items', sa.Column('notes', sa.VARCHAR(length=500), autoincrement=False, nullable=True))
    op.add_column('crm_contract_items', sa.Column('service_type', sa.VARCHAR(length=50), autoincrement=False, nullable=True))
    op.add_column('crm_contract_items', sa.Column('line_number', sa.INTEGER(), server_default=sa.text('1'), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_crm_contract_items_id'), table_name='crm_contract_items')
    op.alter_column('crm_contract_items', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('crm_contract_items', 'line_total',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_contract_items', 'tax_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_contract_items', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_contract_items', 'unit_price',
               existing_type=sa.NUMERIC(precision=18, scale=2),
               server_default=sa.text("'0'::numeric"),
               nullable=True)
    op.alter_column('crm_contract_items', 'quantity',
               existing_type=sa.NUMERIC(precision=12, scale=4),
               server_default=sa.text("'1'::numeric"),
               nullable=True)
    op.alter_column('crm_contract_items', 'product_name',
               existing_type=sa.VARCHAR(length=255),
               nullable=True)
    op.drop_column('crm_contract_items', 'updated_at')
    op.drop_column('crm_contract_items', 'billing_frequency')
    op.drop_column('crm_contract_items', 'billing_end_date')
    op.drop_column('crm_contract_items', 'billing_start_date')
    op.drop_column('crm_contract_items', 'product_code')
    op.drop_index(op.f('ix_crm_contacts_id'), table_name='crm_contacts')
    op.drop_index(op.f('ix_crm_contacts_email'), table_name='crm_contacts')
    op.alter_column('crm_contacts', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_contacts', 'status',
               existing_type=sa.VARCHAR(length=20),
               nullable=True)
    op.alter_column('crm_contacts', 'decision_maker',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_contacts', 'is_shipping_contact',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_contacts', 'is_billing_contact',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_contacts', 'is_primary',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_contacts', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_contacts', 'full_name',
               existing_type=sa.VARCHAR(length=255),
               nullable=False)
    op.alter_column('crm_contacts', 'last_name',
               existing_type=sa.VARCHAR(length=100),
               nullable=False)
    op.alter_column('crm_contacts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_contacts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_crm_activity_logs_id'), table_name='crm_activity_logs')
    op.create_index(op.f('ix_crm_activity_logs_entity'), 'crm_activity_logs', ['entity_type', 'entity_id'], unique=False)
    op.alter_column('crm_activity_logs', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'changed_fields',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'new_values',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'old_values',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activity_logs', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_activity_logs', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_crm_activities_id'), table_name='crm_activities')
    op.create_index(op.f('ix_crm_activities_tenant_type_status'), 'crm_activities', ['tenant_id', 'activity_type', 'status'], unique=False)
    op.alter_column('crm_activities', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'next_action',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'outcome',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'reminded',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_activities', 'participants',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'priority',
               existing_type=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('crm_activities', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_activities', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_activities', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_crm_accounts_tax_code'), table_name='crm_accounts')
    op.drop_index(op.f('ix_crm_accounts_status'), table_name='crm_accounts')
    op.drop_index(op.f('ix_crm_accounts_id'), table_name='crm_accounts')
    op.drop_index(op.f('ix_crm_accounts_account_type'), table_name='crm_accounts')
    op.create_index(op.f('ix_crm_accounts_tenant_type'), 'crm_accounts', ['tenant_id', 'account_type'], unique=False)
    op.create_index(op.f('ix_crm_accounts_tenant_status'), 'crm_accounts', ['tenant_id', 'status'], unique=False)
    op.alter_column('crm_accounts', 'notes',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'synced_to_tms',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('crm_accounts', 'service_preferences',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'default_delivery_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'default_pickup_address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'currency',
               existing_type=sa.VARCHAR(length=10),
               nullable=True)
    op.alter_column('crm_accounts', 'credit_days',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('crm_accounts', 'credit_limit',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               nullable=True)
    op.alter_column('crm_accounts', 'country',
               existing_type=sa.VARCHAR(length=100),
               nullable=True)
    op.alter_column('crm_accounts', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('crm_accounts', 'updated_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('crm_accounts', 'created_at',
               existing_type=postgresql.TIMESTAMP(),
               server_default=sa.text('now()'),
               nullable=True)
    op.drop_index(op.f('ix_audit_logs_id'), table_name='audit_logs')
    op.alter_column('audit_logs', 'description',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('audit_logs', 'user_agent',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.drop_index(op.f('ix_ai_decisions_vehicle_id'), table_name='ai_decisions')
    op.drop_index(op.f('ix_ai_decisions_trip_id'), table_name='ai_decisions')
    op.drop_index(op.f('ix_ai_decisions_order_id'), table_name='ai_decisions')
    op.drop_index(op.f('ix_ai_decisions_id'), table_name='ai_decisions')
    op.drop_index(op.f('ix_ai_decisions_driver_id'), table_name='ai_decisions')
    op.alter_column('ai_decisions', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'pending'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_actors_id'), table_name='actors')
    op.alter_column('actors', 'password_hash',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actors', 'country',
               existing_type=sa.VARCHAR(length=10),
               server_default=sa.text("'VN'::character varying"),
               existing_nullable=True)
    op.alter_column('actors', 'address',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actors', 'bio',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actors', 'avatar_url',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actors', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'ACTIVE'::character varying"),
               existing_nullable=False)
    op.alter_column('actors', 'type',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PERSON'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_actor_sessions_id'), table_name='actor_sessions')
    op.alter_column('actor_sessions', 'revoked_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actor_sessions', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.drop_index(op.f('ix_actor_relationships_id'), table_name='actor_relationships')
    op.create_index(op.f('ix_actor_relationships_pair_type'), 'actor_relationships', ['actor_id', 'related_actor_id', 'type'], unique=False)
    op.alter_column('actor_relationships', 'total_ratings',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('actor_relationships', 'total_amount_pending',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('actor_relationships', 'total_amount_paid',
               existing_type=sa.DOUBLE_PRECISION(precision=53),
               server_default=sa.text("'0'::double precision"),
               existing_nullable=False)
    op.alter_column('actor_relationships', 'total_orders_completed',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('actor_relationships', 'decline_reason',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actor_relationships', 'message',
               existing_type=sqlmodel.sql.sqltypes.AutoString(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('actor_relationships', 'status',
               existing_type=sa.VARCHAR(length=20),
               server_default=sa.text("'PENDING'::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_activity_logs_id'), table_name='activity_logs')
    op.create_index(op.f('ix_activity_logs_tenant_user_date'), 'activity_logs', ['tenant_id', 'user_id', 'created_at'], unique=False)
    op.create_index(op.f('ix_activity_logs_tenant_date'), 'activity_logs', ['tenant_id', 'created_at'], unique=False)
    op.alter_column('activity_logs', 'cost_tokens',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.alter_column('activity_logs', 'success',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('activity_logs', 'response_status',
               existing_type=sa.INTEGER(),
               server_default=sa.text('200'),
               existing_nullable=False)
    op.drop_index(op.f('ix_action_costs_id'), table_name='action_costs')
    op.create_index(op.f('ix_action_costs_unique'), 'action_costs', ['module', 'resource_type', 'action'], unique=True)
    op.alter_column('action_costs', 'priority',
               existing_type=sa.INTEGER(),
               server_default=sa.text('0'),
               existing_nullable=False)
    op.alter_column('action_costs', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('action_costs', 'cost_tokens',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_vendor_invoices_invoice_type'), table_name='acc_vendor_invoices')
    op.drop_index(op.f('ix_acc_vendor_invoices_invoice_date'), table_name='acc_vendor_invoices')
    op.drop_index(op.f('ix_acc_vendor_invoices_id'), table_name='acc_vendor_invoices')
    op.drop_index(op.f('ix_acc_vendor_invoices_due_date'), table_name='acc_vendor_invoices')
    op.alter_column('acc_vendor_invoices', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'balance_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'paid_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'total_amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'total_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'subtotal',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'is_matched',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoices', 'invoice_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''PURCHASE'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_vendor_invoice_lines_id'), table_name='acc_vendor_invoice_lines')
    op.alter_column('acc_vendor_invoice_lines', 'received_quantity',
               existing_type=sa.NUMERIC(precision=15, scale=4),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'line_total',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'tax_rate',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'unit_price',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'quantity',
               existing_type=sa.NUMERIC(precision=15, scale=4),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_vendor_invoice_lines', 'line_number',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_tax_rates_id'), table_name='acc_tax_rates')
    op.alter_column('acc_tax_rates', 'is_default',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'rate_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''PERCENTAGE'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'rate',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_tax_rates', 'tax_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VAT'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_projects_id'), table_name='acc_projects')
    op.alter_column('acc_projects', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_projects', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''ACTIVE'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_projects', 'actual_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_projects', 'budget_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_payment_vouchers_voucher_date'), table_name='acc_payment_vouchers')
    op.drop_index(op.f('ix_acc_payment_vouchers_id'), table_name='acc_payment_vouchers')
    op.alter_column('acc_payment_vouchers', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'unallocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_vouchers', 'payment_method',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''BANK_TRANSFER'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_payment_voucher_allocations_voucher_id'), table_name='acc_payment_voucher_allocations')
    op.drop_index(op.f('ix_acc_payment_voucher_allocations_invoice_id'), table_name='acc_payment_voucher_allocations')
    op.drop_index(op.f('ix_acc_payment_voucher_allocations_id'), table_name='acc_payment_voucher_allocations')
    op.alter_column('acc_payment_voucher_allocations', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_payment_receipts_receipt_date'), table_name='acc_payment_receipts')
    op.drop_index(op.f('ix_acc_payment_receipts_id'), table_name='acc_payment_receipts')
    op.alter_column('acc_payment_receipts', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'unallocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_payment_receipts', 'payment_method',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''CASH'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_payment_receipt_allocations_receipt_id'), table_name='acc_payment_receipt_allocations')
    op.drop_index(op.f('ix_acc_payment_receipt_allocations_invoice_id'), table_name='acc_payment_receipt_allocations')
    op.drop_index(op.f('ix_acc_payment_receipt_allocations_id'), table_name='acc_payment_receipt_allocations')
    op.alter_column('acc_payment_receipt_allocations', 'allocated_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_journals_id'), table_name='acc_journals')
    op.alter_column('acc_journals', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_journals', 'sequence_padding',
               existing_type=sa.INTEGER(),
               server_default=sa.text('6'),
               existing_nullable=False)
    op.alter_column('acc_journals', 'next_sequence',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.alter_column('acc_journals', 'sequence_prefix',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''JE'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_journals', 'journal_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''GENERAL'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_journal_entry_lines_partner_id'), table_name='acc_journal_entry_lines')
    op.drop_index(op.f('ix_acc_journal_entry_lines_id'), table_name='acc_journal_entry_lines')
    op.alter_column('acc_journal_entry_lines', 'is_reconciled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'amount_currency',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'credit_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'debit_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entry_lines', 'line_number',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_journal_entries_journal_id'), table_name='acc_journal_entries')
    op.drop_index(op.f('ix_acc_journal_entries_id'), table_name='acc_journal_entries')
    op.alter_column('acc_journal_entries', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'total_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_journal_entries', 'total_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_general_ledger_partner_id'), table_name='acc_general_ledger')
    op.drop_index(op.f('ix_acc_general_ledger_id'), table_name='acc_general_ledger')
    op.drop_index(op.f('ix_acc_general_ledger_account_code'), table_name='acc_general_ledger')
    op.alter_column('acc_general_ledger', 'closing_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'closing_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'period_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'period_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'opening_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_general_ledger', 'opening_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_fixed_assets_vehicle_id'), table_name='acc_fixed_assets')
    op.drop_index(op.f('ix_acc_fixed_assets_id'), table_name='acc_fixed_assets')
    op.alter_column('acc_fixed_assets', 'is_fully_depreciated',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'disposal_gain_loss',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'disposal_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'book_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'accumulated_depreciation',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'monthly_depreciation',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'remaining_life_months',
               existing_type=sa.INTEGER(),
               server_default=sa.text('60'),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'useful_life_months',
               existing_type=sa.INTEGER(),
               server_default=sa.text('60'),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'depreciation_method',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''STRAIGHT_LINE'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'depreciable_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'salvage_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'original_cost',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'additional_costs',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_assets', 'purchase_price',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_fixed_asset_categories_id'), table_name='acc_fixed_asset_categories')
    op.alter_column('acc_fixed_asset_categories', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'default_salvage_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'default_depreciation_method',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''STRAIGHT_LINE'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'default_useful_life',
               existing_type=sa.INTEGER(),
               server_default=sa.text('60'),
               existing_nullable=False)
    op.alter_column('acc_fixed_asset_categories', 'category_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''MACHINERY'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_fiscal_years_id'), table_name='acc_fiscal_years')
    op.alter_column('acc_fiscal_years', 'is_closed',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_fiscal_years', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_fiscal_periods_id'), table_name='acc_fiscal_periods')
    op.alter_column('acc_fiscal_periods', 'is_adjustment',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_fiscal_periods', 'is_open',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_customer_invoices_invoice_type'), table_name='acc_customer_invoices')
    op.drop_index(op.f('ix_acc_customer_invoices_invoice_date'), table_name='acc_customer_invoices')
    op.drop_index(op.f('ix_acc_customer_invoices_id'), table_name='acc_customer_invoices')
    op.drop_index(op.f('ix_acc_customer_invoices_due_date'), table_name='acc_customer_invoices')
    op.alter_column('acc_customer_invoices', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'balance_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'paid_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'total_amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'total_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'subtotal',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoices', 'invoice_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''SALES'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_customer_invoice_lines_id'), table_name='acc_customer_invoice_lines')
    op.alter_column('acc_customer_invoice_lines', 'line_total',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'tax_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'tax_rate',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'discount_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'discount_percent',
               existing_type=sa.NUMERIC(precision=5, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'unit_price',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'quantity',
               existing_type=sa.NUMERIC(precision=15, scale=4),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_customer_invoice_lines', 'line_number',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_cost_centers_id'), table_name='acc_cost_centers')
    op.alter_column('acc_cost_centers', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_cost_centers', 'budget_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_chart_of_accounts_is_active'), table_name='acc_chart_of_accounts')
    op.drop_index(op.f('ix_acc_chart_of_accounts_id'), table_name='acc_chart_of_accounts')
    op.drop_index(op.f('ix_acc_chart_of_accounts_category'), table_name='acc_chart_of_accounts')
    op.alter_column('acc_chart_of_accounts', 'current_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'current_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'opening_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'opening_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'allow_multi_currency',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'require_project',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'require_cost_center',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'require_partner',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'allow_posting',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'is_system',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'is_active',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('true'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'nature',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DEBIT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'classification',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''ASSET'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'is_parent',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_chart_of_accounts', 'level',
               existing_type=sa.INTEGER(),
               server_default=sa.text('1'),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_bank_transactions_transaction_type'), table_name='acc_bank_transactions')
    op.drop_index(op.f('ix_acc_bank_transactions_transaction_number'), table_name='acc_bank_transactions')
    op.drop_index(op.f('ix_acc_bank_transactions_partner_id'), table_name='acc_bank_transactions')
    op.drop_index(op.f('ix_acc_bank_transactions_is_reconciled'), table_name='acc_bank_transactions')
    op.drop_index(op.f('ix_acc_bank_transactions_id'), table_name='acc_bank_transactions')
    op.alter_column('acc_bank_transactions', 'is_reconciled',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''PENDING'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'running_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'amount_vnd',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'exchange_rate',
               existing_type=sa.NUMERIC(precision=15, scale=6),
               server_default=sa.text("'1'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_transactions', 'transaction_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''CREDIT'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_bank_reconciliations_status'), table_name='acc_bank_reconciliations')
    op.drop_index(op.f('ix_acc_bank_reconciliations_reconciliation_date'), table_name='acc_bank_reconciliations')
    op.drop_index(op.f('ix_acc_bank_reconciliations_id'), table_name='acc_bank_reconciliations')
    op.alter_column('acc_bank_reconciliations', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''DRAFT'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'difference',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'adjusted_book_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'adjusted_statement_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'other_adjustments',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'bank_interest',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'bank_charges',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'outstanding_checks',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'deposits_in_transit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'book_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_reconciliations', 'statement_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_bank_accounts_id'), table_name='acc_bank_accounts')
    op.drop_index(op.f('ix_acc_bank_accounts_account_type'), table_name='acc_bank_accounts')
    op.alter_column('acc_bank_accounts', 'last_reconcile_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'status',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''ACTIVE'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'opening_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'available_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'current_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'is_primary',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_bank_accounts', 'account_type',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''CURRENT'''::character varying"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_asset_depreciations_id'), table_name='acc_asset_depreciations')
    op.drop_index(op.f('ix_acc_asset_depreciations_depreciation_date'), table_name='acc_asset_depreciations')
    op.alter_column('acc_asset_depreciations', 'is_posted',
               existing_type=sa.BOOLEAN(),
               server_default=sa.text('false'),
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'closing_book_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'accumulated_depreciation',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'depreciation_amount',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_asset_depreciations', 'opening_book_value',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.drop_index(op.f('ix_acc_account_balances_id'), table_name='acc_account_balances')
    op.alter_column('acc_account_balances', 'currency_credit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'currency_debit',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'currency',
               existing_type=sa.VARCHAR(),
               server_default=sa.text("'''VND'''::character varying"),
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'credit_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.alter_column('acc_account_balances', 'debit_balance',
               existing_type=sa.NUMERIC(precision=20, scale=2),
               server_default=sa.text("'0'::numeric"),
               existing_nullable=False)
    op.create_table('ai_feature_configs',
    sa.Column('id', sa.VARCHAR(length=36), autoincrement=False, nullable=False),
    sa.Column('feature_code', sa.VARCHAR(length=50), autoincrement=False, nullable=False),
    sa.Column('feature_name', sa.VARCHAR(length=100), autoincrement=False, nullable=False),
    sa.Column('description', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('module_code', sa.VARCHAR(length=20), autoincrement=False, nullable=True),
    sa.Column('provider_priority', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('preferred_model', sa.VARCHAR(length=100), autoincrement=False, nullable=True),
    sa.Column('max_retries', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('timeout_seconds', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('fallback_enabled', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('is_enabled', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('created_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('updated_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('updated_by', sa.VARCHAR(length=36), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name=op.f('ai_feature_configs_pkey'))
    )
    op.create_index(op.f('ix_ai_feature_configs_feature_code'), 'ai_feature_configs', ['feature_code'], unique=False)
    op.create_table('trip_shipments',
    sa.Column('id', sa.UUID(), server_default=sa.text('gen_random_uuid()'), autoincrement=False, nullable=False),
    sa.Column('tenant_id', sa.TEXT(), autoincrement=False, nullable=False),
    sa.Column('trip_id', sa.UUID(), autoincrement=False, nullable=False),
    sa.Column('shipment_id', sa.UUID(), autoincrement=False, nullable=False),
    sa.Column('seq', sa.INTEGER(), server_default=sa.text('1'), autoincrement=False, nullable=False),
    sa.Column('created_at', postgresql.TIMESTAMP(timezone=True), server_default=sa.text('now()'), autoincrement=False, nullable=False),
    sa.Column('updated_at', postgresql.TIMESTAMP(timezone=True), server_default=sa.text('now()'), autoincrement=False, nullable=False),
    sa.PrimaryKeyConstraint('id', name=op.f('trip_shipments_pkey')),
    sa.UniqueConstraint('tenant_id', 'trip_id', 'shipment_id', name=op.f('trip_shipments_tenant_id_trip_id_shipment_id_key'), postgresql_include=[], postgresql_nulls_not_distinct=False)
    )
    op.create_index(op.f('idx_trip_shipments_trip'), 'trip_shipments', ['trip_id'], unique=False)
    op.create_index(op.f('idx_trip_shipments_shipment'), 'trip_shipments', ['shipment_id'], unique=False)
    op.create_table('ai_providers',
    sa.Column('id', sa.VARCHAR(length=36), autoincrement=False, nullable=False),
    sa.Column('provider_code', sa.VARCHAR(length=50), autoincrement=False, nullable=False),
    sa.Column('provider_name', sa.VARCHAR(length=100), autoincrement=False, nullable=False),
    sa.Column('api_key', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('api_endpoint', sa.VARCHAR(length=500), autoincrement=False, nullable=True),
    sa.Column('default_model', sa.VARCHAR(length=100), autoincrement=False, nullable=True),
    sa.Column('available_models', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('is_enabled', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('is_configured', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('max_requests_per_minute', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('max_tokens_per_request', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('cost_per_1m_input_tokens', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('cost_per_1m_output_tokens', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('created_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('updated_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('updated_by', sa.VARCHAR(length=36), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name=op.f('ai_providers_pkey'))
    )
    op.create_index(op.f('ix_ai_providers_provider_code'), 'ai_providers', ['provider_code'], unique=True)
    op.create_table('trip',
    sa.Column('id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('order_id', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('vehicle_id', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('trailer_id', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('driver_id', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('status', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('planned_start', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('planned_end', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name=op.f('trip_pkey'))
    )
    op.create_index(op.f('ix_trip_id'), 'trip', ['id'], unique=False)
    op.create_table('fms_rates',
    sa.Column('id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('tenant_id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('rate_code', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('rate_name', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('rate_type', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('is_active', sa.BOOLEAN(), server_default=sa.text('true'), autoincrement=False, nullable=True),
    sa.Column('carrier_name', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('agent_id', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('agent_name', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('origin_port', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('origin_port_name', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('destination_port', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('destination_port_name', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('transit_time_min', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('transit_time_max', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('currency_code', sa.VARCHAR(), server_default=sa.text("'USD'::character varying"), autoincrement=False, nullable=True),
    sa.Column('rate_20gp', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_40gp', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_40hc', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_per_cbm', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_per_ton', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('min_charge', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_min', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_normal', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_45kg', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_100kg', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_300kg', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('rate_500kg', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('effective_date', sa.DATE(), autoincrement=False, nullable=True),
    sa.Column('expiry_date', sa.DATE(), autoincrement=False, nullable=True),
    sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('created_by', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('updated_by', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('deleted_by', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('created_at', postgresql.TIMESTAMP(), server_default=sa.text('now()'), autoincrement=False, nullable=False),
    sa.Column('updated_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('deleted_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('is_deleted', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False),
    sa.PrimaryKeyConstraint('id', name=op.f('fms_rates_pkey'))
    )
    op.create_index(op.f('ix_fms_rates_tenant_id'), 'fms_rates', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_fms_rates_rate_code'), 'fms_rates', ['rate_code'], unique=False)
    op.create_table('fms_tracking',
    sa.Column('id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('tenant_id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('shipment_id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('event_type', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('event_datetime', postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
    sa.Column('location', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('location_code', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('vessel_name', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('voyage_no', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('container_no', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('description', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('remarks', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('is_milestone', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=True),
    sa.Column('created_by', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('deleted_by', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('created_at', postgresql.TIMESTAMP(), server_default=sa.text('now()'), autoincrement=False, nullable=False),
    sa.Column('deleted_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('is_deleted', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False),
    sa.ForeignKeyConstraint(['shipment_id'], ['fms_shipments.id'], name=op.f('fms_tracking_shipment_id_fkey')),
    sa.PrimaryKeyConstraint('id', name=op.f('fms_tracking_pkey'))
    )
    op.create_index(op.f('ix_fms_tracking_tenant_id'), 'fms_tracking', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_fms_tracking_shipment_id'), 'fms_tracking', ['shipment_id'], unique=False)
    op.create_table('ai_usage_logs',
    sa.Column('id', sa.VARCHAR(length=36), autoincrement=False, nullable=False),
    sa.Column('tenant_id', sa.VARCHAR(length=36), autoincrement=False, nullable=True),
    sa.Column('user_id', sa.VARCHAR(length=36), autoincrement=False, nullable=True),
    sa.Column('feature_code', sa.VARCHAR(length=50), autoincrement=False, nullable=False),
    sa.Column('provider_code', sa.VARCHAR(length=50), autoincrement=False, nullable=False),
    sa.Column('model_used', sa.VARCHAR(length=100), autoincrement=False, nullable=False),
    sa.Column('input_tokens', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('output_tokens', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('total_tokens', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('estimated_cost', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=True),
    sa.Column('latency_ms', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('success', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('error_message', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('created_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name=op.f('ai_usage_logs_pkey'))
    )
    op.create_index(op.f('ix_ai_usage_logs_tenant_id'), 'ai_usage_logs', ['tenant_id'], unique=False)
    op.create_index(op.f('ix_ai_usage_logs_provider_code'), 'ai_usage_logs', ['provider_code'], unique=False)
    op.create_index(op.f('ix_ai_usage_logs_feature_code'), 'ai_usage_logs', ['feature_code'], unique=False)
    op.drop_index(op.f('ix_driver_payroll_year'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_workflow_instance_id'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_tenant_id'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_status'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_month'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_id'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_driver_id'), table_name='driver_payroll')
    op.drop_index(op.f('ix_driver_payroll_created_by_id'), table_name='driver_payroll')
    op.drop_table('driver_payroll')
    # ### end Alembic commands ###
